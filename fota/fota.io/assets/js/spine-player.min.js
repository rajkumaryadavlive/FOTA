var spine=(()=>{var Ui=Object.defineProperty,Xs=e=>Ui(e,"__esModule",{value:!0}),Bs=(e,t)=>{Xs(e);for(var i in t)Ui(e,i,{get:t[i],enumerable:!0})},zi={};Bs(zi,{AlphaTimeline:()=>ei,Animation:()=>yt,AnimationState:()=>St,AnimationStateAdapter:()=>Os,AnimationStateData:()=>$i,AssetManager:()=>Yi,AssetManagerBase:()=>rs,AtlasAttachmentLoader:()=>pi,Attachment:()=>zt,AttachmentTimeline:()=>Ke,BinaryInput:()=>cs,BlendMode:()=>ye,Bone:()=>wi,BoneData:()=>xi,BoundingBoxAttachment:()=>kt,CURRENT:()=>Qi,CameraController:()=>fr,ClippingAttachment:()=>gt,Color:()=>O,Color2Attribute:()=>bs,ColorAttribute:()=>Lt,ConstraintData:()=>Mt,CurveTimeline:()=>Ye,CurveTimeline1:()=>Re,CurveTimeline2:()=>At,DebugUtils:()=>Vs,DeformTimeline:()=>si,Downloader:()=>as,DrawOrderTimeline:()=>Qe,Event:()=>bi,EventData:()=>vi,EventQueue:()=>Ji,EventTimeline:()=>mt,EventType:()=>Ce,FIRST:()=>hi,FakeTexture:()=>Ns,GLTexture:()=>pt,HOLD_FIRST:()=>Tt,HOLD_MIX:()=>Ki,HOLD_SUBSEQUENT:()=>di,IkConstraint:()=>ns,IkConstraintData:()=>yi,IkConstraintTimeline:()=>ri,Input:()=>xt,IntSet:()=>Ps,Interpolation:()=>Wi,JitterEffect:()=>dr,LoadingScreen:()=>Cs,M00:()=>N,M01:()=>j,M02:()=>H,M03:()=>U,M10:()=>G,M11:()=>z,M12:()=>Z,M13:()=>W,M20:()=>J,M21:()=>K,M22:()=>_,M23:()=>q,M30:()=>$,M31:()=>ee,M32:()=>te,M33:()=>Q,ManagedWebGLRenderingContext:()=>we,MathUtils:()=>F,Matrix4:()=>_e,Mesh:()=>Ri,MeshAttachment:()=>je,MixBlend:()=>fe,MixDirection:()=>Pe,OrthoCamera:()=>xs,PathAttachment:()=>et,PathConstraint:()=>at,PathConstraintData:()=>Ai,PathConstraintMixTimeline:()=>oi,PathConstraintPositionTimeline:()=>ni,PathConstraintSpacingTimeline:()=>li,PointAttachment:()=>gi,PolygonBatcher:()=>Li,Pool:()=>ut,Position2Attribute:()=>Ft,Position3Attribute:()=>mr,PositionMode:()=>Ve,Pow:()=>_i,PowOut:()=>qi,RGB2Timeline:()=>ii,RGBA2Timeline:()=>ti,RGBATimeline:()=>Qt,RGBTimeline:()=>$t,RegionAttachment:()=>ae,ResizeMode:()=>it,RotateMode:()=>tt,RotateTimeline:()=>ft,SETUP:()=>ci,SUBSEQUENT:()=>Ct,ScaleTimeline:()=>jt,ScaleXTimeline:()=>Ht,ScaleYTimeline:()=>Gt,SceneRenderer:()=>Pi,Shader:()=>be,ShapeRenderer:()=>Xi,ShapeType:()=>Ae,ShearTimeline:()=>Zt,ShearXTimeline:()=>Jt,ShearYTimeline:()=>Kt,Skeleton:()=>hs,SkeletonBinary:()=>ds,SkeletonBounds:()=>us,SkeletonClipping:()=>It,SkeletonData:()=>Si,SkeletonDebugRenderer:()=>Bt,SkeletonJson:()=>fs,SkeletonRenderer:()=>Bi,Skin:()=>Et,SkinEntry:()=>Ci,Slot:()=>ls,SlotData:()=>Ti,SpacingMode:()=>ge,SpineCanvas:()=>br,SpinePlayer:()=>vr,SpinePlayerEditor:()=>Es,StringSet:()=>Ut,SwirlEffect:()=>gs,TexCoordAttribute:()=>Fi,Texture:()=>fi,TextureAtlas:()=>ts,TextureAtlasPage:()=>is,TextureAtlasRegion:()=>mi,TextureFilter:()=>pe,TextureRegion:()=>es,TextureWrap:()=>$e,TimeKeeper:()=>vt,Timeline:()=>me,Touch:()=>ws,TrackEntry:()=>Zi,TransformConstraint:()=>os,TransformConstraintData:()=>ki,TransformConstraintTimeline:()=>ai,TransformMode:()=>Te,TranslateTimeline:()=>Wt,TranslateXTimeline:()=>_t,TranslateYTimeline:()=>qt,Triangulator:()=>ke,Utils:()=>V,Vector2:()=>Ne,Vector3:()=>Me,VertexAttachment:()=>Be,VertexAttribute:()=>lt,VertexAttributeType:()=>He,WebGLBlendModeConverter:()=>Rt,WindowedMean:()=>Ds});var Ps=class{constructor(){this.array=new Array}add(e){let t=this.contains(e);return this.array[e|0]=e|0,!t}contains(e){return this.array[e|0]!=null}remove(e){this.array[e|0]=void 0}clear(){this.array.length=0}},Ut=class{constructor(){this.entries={},this.size=0}add(e){let t=this.entries[e];return this.entries[e]=!0,t?!1:(this.size++,!0)}addAll(e){let t=this.size;for(var i=0,s=e.length;i<s;i++)this.add(e[i]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}},Je=class{constructor(e=0,t=0,i=0,s=0){this.r=e,this.g=t,this.b=i,this.a=s}set(e,t,i,s){return this.r=e,this.g=t,this.b=i,this.a=s,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,i,s){return this.r+=e,this.g+=t,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((t&4278190080)>>>24)/255,e.g=((t&16711680)>>>16)/255,e.b=((t&65280)>>>8)/255,e.a=(t&255)/255}static rgb888ToColor(e,t){e.r=((t&16711680)>>>16)/255,e.g=((t&65280)>>>8)/255,e.b=(t&255)/255}static fromString(e){return new Je().setFromString(e)}},O=Je;O.WHITE=new Je(1,1,1,1),O.RED=new Je(1,0,0,1),O.GREEN=new Je(0,1,0,1),O.BLUE=new Je(0,0,1,1),O.MAGENTA=new Je(1,0,1,1);var Oe=class{static clamp(e,t,i){return e<t?t:e>i?i:e}static cosDeg(e){return Math.cos(e*Oe.degRad)}static sinDeg(e){return Math.sin(e*Oe.degRad)}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}static randomTriangular(e,t){return Oe.randomTriangularWith(e,t,(e+t)*.5)}static randomTriangularWith(e,t,i){let s=Math.random(),a=t-e;return s<=(i-e)/a?e+Math.sqrt(s*a*(i-e)):t-Math.sqrt((1-s)*a*(t-i))}static isPowerOfTwo(e){return e&&(e&e-1)==0}},F=Oe;F.PI=3.1415927,F.PI2=Oe.PI*2,F.radiansToDegrees=180/Oe.PI,F.radDeg=Oe.radiansToDegrees,F.degreesToRadians=Oe.PI/180,F.degRad=Oe.degreesToRadians;var Wi=class{apply(e,t,i){return e+(t-e)*this.applyInternal(i)}},_i=class extends Wi{constructor(e){super();this.power=2,this.power=e}applyInternal(e){return e<=.5?Math.pow(e*2,this.power)/2:Math.pow((e-1)*2,this.power)/(this.power%2==0?-2:2)+1}},qi=class extends _i{constructor(e){super(e)}applyInternal(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1}},rt=class{static arrayCopy(e,t,i,s,a){for(let d=t,n=s;d<t+a;d++,n++)i[n]=e[d]}static arrayFill(e,t,i,s){for(let a=t;a<i;a++)e[a]=s}static setArraySize(e,t,i=0){let s=e.length;if(s==t)return e;if(e.length=t,s<t)for(let a=s;a<t;a++)e[a]=i;return e}static ensureArrayCapacity(e,t,i=0){return e.length>=t?e:rt.setArraySize(e,t,i)}static newArray(e,t){let i=new Array(e);for(let s=0;s<e;s++)i[s]=t;return i}static newFloatArray(e){if(rt.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let t=new Array(e);for(let i=0;i<t.length;i++)t[i]=0;return t}}static newShortArray(e){if(rt.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let t=new Array(e);for(let i=0;i<t.length;i++)t[i]=0;return t}}static toFloatArray(e){return rt.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return rt.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,t){}static contains(e,t,i=!0){for(var s=0;s<e.length;s++)if(e[s]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}},V=rt;V.SUPPORTS_TYPED_ARRAYS=typeof Float32Array!="undefined";var Vs=class{static logBones(e){for(let t=0;t<e.bones.length;t++){let i=e.bones[t];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}}},ut=class{constructor(e){this.items=new Array,this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}},Ne=class{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}length(){let e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}normalize(){let e=this.length();return e!=0&&(this.x/=e,this.y/=e),this}},vt=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){let e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},Ds=class{constructor(e=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(e){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=e,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let e=0;for(let t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0}},zt=class{constructor(e){if(!e)throw new Error("name cannot be null.");this.name=e}},ji=class extends zt{constructor(e){super(e);this.id=ji.nextID++,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVertices(e,t,i,s,a,d){i=a+(i>>1)*d;let n=e.bone.skeleton,r=e.deform,h=this.vertices,o=this.bones;if(!o){r.length>0&&(h=r);let m=e.bone,f=m.worldX,g=m.worldY,x=m.a,v=m.b,p=m.c,b=m.d;for(let w=t,y=a;y<i;w+=2,y+=d){let T=h[w],A=h[w+1];s[y]=T*x+A*v+f,s[y+1]=T*p+A*b+g}return}let l=0,c=0;for(let m=0;m<t;m+=2){let f=o[l];l+=f+1,c+=f}let u=n.bones;if(r.length==0)for(let m=a,f=c*3;m<i;m+=d){let g=0,x=0,v=o[l++];for(v+=l;l<v;l++,f+=3){let p=u[o[l]],b=h[f],w=h[f+1],y=h[f+2];g+=(b*p.a+w*p.b+p.worldX)*y,x+=(b*p.c+w*p.d+p.worldY)*y}s[m]=g,s[m+1]=x}else{let m=r;for(let f=a,g=c*3,x=c<<1;f<i;f+=d){let v=0,p=0,b=o[l++];for(b+=l;l<b;l++,g+=3,x+=2){let w=u[o[l]],y=h[g]+m[x],T=h[g+1]+m[x+1],A=h[g+2];v+=(y*w.a+T*w.b+w.worldX)*A,p+=(y*w.c+T*w.d+w.worldY)*A}s[f]=v,s[f+1]=p}}}copyTo(e){this.bones?(e.bones=new Array(this.bones.length),V.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices?(e.vertices=V.newFloatArray(this.vertices.length),V.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment}},Be=ji;Be.nextID=0;var yt=class{constructor(e,t,i){if(!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=i}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds=new Ut;for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,i,s,a,d,n,r){if(!e)throw new Error("skeleton cannot be null.");s&&this.duration!=0&&(i%=this.duration,t>0&&(t%=this.duration));let h=this.timelines;for(let o=0,l=h.length;o<l;o++)h[o].apply(e,t,i,a,d,n,r)}},fe;(function(e){e[e.setup=0]="setup",e[e.first=1]="first",e[e.replace=2]="replace",e[e.add=3]="add"})(fe||(fe={}));var Pe;(function(e){e[e.mixIn=0]="mixIn",e[e.mixOut=1]="mixOut"})(Pe||(Pe={}));var oe={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18},me=class{constructor(e,t){this.propertyIds=t,this.frames=V.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let i=e.length;for(let s=1;s<i;s++)if(e[s]>t)return s-1;return i-1}static search(e,t,i){let s=e.length;for(let a=i;a<s;a+=i)if(e[a]>t)return a-i;return s-i}},Ye=class extends me{constructor(e,t,i){super(e,i);this.curves=V.newFloatArray(e+t*18),this.curves[e-1]=1}setLinear(e){this.curves[e]=0}setStepped(e){this.curves[e]=1}shrink(e){let t=this.getFrameCount()+e*18;if(this.curves.length>t){let i=V.newFloatArray(t);V.arrayCopy(this.curves,0,i,0,t),this.curves=i}}setBezier(e,t,i,s,a,d,n,r,h,o,l){let c=this.curves,u=this.getFrameCount()+e*18;i==0&&(c[t]=2+u);let m=(s-d*2+r)*.03,f=(a-n*2+h)*.03,g=((d-r)*3-s+o)*.006,x=((n-h)*3-a+l)*.006,v=m*2+g,p=f*2+x,b=(d-s)*.3+m+g*.16666667,w=(n-a)*.3+f+x*.16666667,y=s+b,T=a+w;for(let A=u+18;u<A;u+=2)c[u]=y,c[u+1]=T,b+=v,w+=p,v+=g,p+=x,y+=b,T+=w}getBezierValue(e,t,i,s){let a=this.curves;if(a[s]>e){let h=this.frames[t],o=this.frames[t+i];return o+(e-h)/(a[s]-h)*(a[s+1]-o)}let d=s+18;for(s+=2;s<d;s+=2)if(a[s]>=e){let h=a[s-2],o=a[s-1];return o+(e-h)/(a[s]-h)*(a[s+1]-o)}t+=this.getFrameEntries();let n=a[d-2],r=a[d-1];return r+(e-n)/(this.frames[t]-n)*(this.frames[t+i]-r)}},Re=class extends Ye{constructor(e,t,i){super(e,t,[i])}getFrameEntries(){return 2}setFrame(e,t,i){e<<=1,this.frames[e]=t,this.frames[e+1]=i}getCurveValue(e){let t=this.frames,i=t.length-2;for(let a=2;a<=i;a+=2)if(t[a]>e){i=a-2;break}let s=this.curves[i>>1];switch(s){case 0:let a=t[i],d=t[i+1];return d+(e-a)/(t[i+2]-a)*(t[i+2+1]-d);case 1:return t[i+1]}return this.getBezierValue(e,i,1,s-2)}},At=class extends Ye{constructor(e,t,i,s){super(e,t,[i,s])}getFrameEntries(){return 3}setFrame(e,t,i,s){e*=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s}},ft=class extends Re{constructor(e,t,i){super(e,t,oe.rotate+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.rotation=r.data.rotation;return;case 1:r.rotation+=(r.data.rotation-r.rotation)*a}return}let o=this.getCurveValue(i);switch(d){case 0:r.rotation=r.data.rotation+o*a;break;case 1:case 2:o+=r.data.rotation-r.rotation;case 3:r.rotation+=o*a}}},Wt=class extends At{constructor(e,t,i){super(e,t,oe.x+"|"+i,oe.y+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.x=r.data.x,r.y=r.data.y;return;case 1:r.x+=(r.data.x-r.x)*a,r.y+=(r.data.y-r.y)*a}return}let o=0,l=0,c=me.search(h,i,3),u=this.curves[c/3];switch(u){case 0:let m=h[c];o=h[c+1],l=h[c+2];let f=(i-m)/(h[c+3]-m);o+=(h[c+3+1]-o)*f,l+=(h[c+3+2]-l)*f;break;case 1:o=h[c+1],l=h[c+2];break;default:o=this.getBezierValue(i,c,1,u-2),l=this.getBezierValue(i,c,2,u+18-2)}switch(d){case 0:r.x=r.data.x+o*a,r.y=r.data.y+l*a;break;case 1:case 2:r.x+=(r.data.x+o-r.x)*a,r.y+=(r.data.y+l-r.y)*a;break;case 3:r.x+=o*a,r.y+=l*a}}},_t=class extends Re{constructor(e,t,i){super(e,t,oe.x+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.x=r.data.x;return;case 1:r.x+=(r.data.x-r.x)*a}return}let o=this.getCurveValue(i);switch(d){case 0:r.x=r.data.x+o*a;break;case 1:case 2:r.x+=(r.data.x+o-r.x)*a;break;case 3:r.x+=o*a}}},qt=class extends Re{constructor(e,t,i){super(e,t,oe.y+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.y=r.data.y;return;case 1:r.y+=(r.data.y-r.y)*a}return}let o=this.getCurveValue(i);switch(d){case 0:r.y=r.data.y+o*a;break;case 1:case 2:r.y+=(r.data.y+o-r.y)*a;break;case 3:r.y+=o*a}}},jt=class extends At{constructor(e,t,i){super(e,t,oe.scaleX+"|"+i,oe.scaleY+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.scaleX=r.data.scaleX,r.scaleY=r.data.scaleY;return;case 1:r.scaleX+=(r.data.scaleX-r.scaleX)*a,r.scaleY+=(r.data.scaleY-r.scaleY)*a}return}let o,l,c=me.search(h,i,3),u=this.curves[c/3];switch(u){case 0:let m=h[c];o=h[c+1],l=h[c+2];let f=(i-m)/(h[c+3]-m);o+=(h[c+3+1]-o)*f,l+=(h[c+3+2]-l)*f;break;case 1:o=h[c+1],l=h[c+2];break;default:o=this.getBezierValue(i,c,1,u-2),l=this.getBezierValue(i,c,2,u+18-2)}if(o*=r.data.scaleX,l*=r.data.scaleY,a==1)d==3?(r.scaleX+=o-r.data.scaleX,r.scaleY+=l-r.data.scaleY):(r.scaleX=o,r.scaleY=l);else{let m=0,f=0;if(n==1)switch(d){case 0:m=r.data.scaleX,f=r.data.scaleY,r.scaleX=m+(Math.abs(o)*F.signum(m)-m)*a,r.scaleY=f+(Math.abs(l)*F.signum(f)-f)*a;break;case 1:case 2:m=r.scaleX,f=r.scaleY,r.scaleX=m+(Math.abs(o)*F.signum(m)-m)*a,r.scaleY=f+(Math.abs(l)*F.signum(f)-f)*a;break;case 3:r.scaleX=(o-r.data.scaleX)*a,r.scaleY=(l-r.data.scaleY)*a}else switch(d){case 0:m=Math.abs(r.data.scaleX)*F.signum(o),f=Math.abs(r.data.scaleY)*F.signum(l),r.scaleX=m+(o-m)*a,r.scaleY=f+(l-f)*a;break;case 1:case 2:m=Math.abs(r.scaleX)*F.signum(o),f=Math.abs(r.scaleY)*F.signum(l),r.scaleX=m+(o-m)*a,r.scaleY=f+(l-f)*a;break;case 3:r.scaleX+=(o-r.data.scaleX)*a,r.scaleY+=(l-r.data.scaleY)*a}}}},Ht=class extends Re{constructor(e,t,i){super(e,t,oe.scaleX+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.scaleX=r.data.scaleX;return;case 1:r.scaleX+=(r.data.scaleX-r.scaleX)*a}return}let o=this.getCurveValue(i)*r.data.scaleX;if(a==1)d==3?r.scaleX+=o-r.data.scaleX:r.scaleX=o;else{let l=0;if(n==1)switch(d){case 0:l=r.data.scaleX,r.scaleX=l+(Math.abs(o)*F.signum(l)-l)*a;break;case 1:case 2:l=r.scaleX,r.scaleX=l+(Math.abs(o)*F.signum(l)-l)*a;break;case 3:r.scaleX=(o-r.data.scaleX)*a}else switch(d){case 0:l=Math.abs(r.data.scaleX)*F.signum(o),r.scaleX=l+(o-l)*a;break;case 1:case 2:l=Math.abs(r.scaleX)*F.signum(o),r.scaleX=l+(o-l)*a;break;case 3:r.scaleX+=(o-r.data.scaleX)*a}}}},Gt=class extends Re{constructor(e,t,i){super(e,t,oe.scaleY+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.scaleY=r.data.scaleY;return;case 1:r.scaleY+=(r.data.scaleY-r.scaleY)*a}return}let o=this.getCurveValue(i)*r.data.scaleY;if(a==1)d==3?r.scaleY+=o-r.data.scaleY:r.scaleY=o;else{let l=0;if(n==1)switch(d){case 0:l=r.data.scaleY,r.scaleY=l+(Math.abs(o)*F.signum(l)-l)*a;break;case 1:case 2:l=r.scaleY,r.scaleY=l+(Math.abs(o)*F.signum(l)-l)*a;break;case 3:r.scaleY=(o-r.data.scaleY)*a}else switch(d){case 0:l=Math.abs(r.data.scaleY)*F.signum(o),r.scaleY=l+(o-l)*a;break;case 1:case 2:l=Math.abs(r.scaleY)*F.signum(o),r.scaleY=l+(o-l)*a;break;case 3:r.scaleY+=(o-r.data.scaleY)*a}}}},Zt=class extends At{constructor(e,t,i){super(e,t,oe.shearX+"|"+i,oe.shearY+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.shearX=r.data.shearX,r.shearY=r.data.shearY;return;case 1:r.shearX+=(r.data.shearX-r.shearX)*a,r.shearY+=(r.data.shearY-r.shearY)*a}return}let o=0,l=0,c=me.search(h,i,3),u=this.curves[c/3];switch(u){case 0:let m=h[c];o=h[c+1],l=h[c+2];let f=(i-m)/(h[c+3]-m);o+=(h[c+3+1]-o)*f,l+=(h[c+3+2]-l)*f;break;case 1:o=h[c+1],l=h[c+2];break;default:o=this.getBezierValue(i,c,1,u-2),l=this.getBezierValue(i,c,2,u+18-2)}switch(d){case 0:r.shearX=r.data.shearX+o*a,r.shearY=r.data.shearY+l*a;break;case 1:case 2:r.shearX+=(r.data.shearX+o-r.shearX)*a,r.shearY+=(r.data.shearY+l-r.shearY)*a;break;case 3:r.shearX+=o*a,r.shearY+=l*a}}},Jt=class extends Re{constructor(e,t,i){super(e,t,oe.shearX+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.shearX=r.data.shearX;return;case 1:r.shearX+=(r.data.shearX-r.shearX)*a}return}let o=this.getCurveValue(i);switch(d){case 0:r.shearX=r.data.shearX+o*a;break;case 1:case 2:r.shearX+=(r.data.shearX+o-r.shearX)*a;break;case 3:r.shearX+=o*a}}},Kt=class extends Re{constructor(e,t,i){super(e,t,oe.shearY+"|"+i);this.boneIndex=0,this.boneIndex=i}apply(e,t,i,s,a,d,n){let r=e.bones[this.boneIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.shearY=r.data.shearY;return;case 1:r.shearY+=(r.data.shearY-r.shearY)*a}return}let o=this.getCurveValue(i);switch(d){case 0:r.shearY=r.data.shearY+o*a;break;case 1:case 2:r.shearY+=(r.data.shearY+o-r.shearY)*a;break;case 3:r.shearY+=o*a}}},Qt=class extends Ye{constructor(e,t,i){super(e,t,[oe.rgb+"|"+i,oe.alpha+"|"+i]);this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 5}setFrame(e,t,i,s,a,d){e*=5,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=a,this.frames[e+4]=d}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!r.bone.active)return;let h=this.frames,o=r.color;if(i<h[0]){let x=r.data.color;switch(d){case 0:o.setFromColor(x);return;case 1:o.add((x.r-o.r)*a,(x.g-o.g)*a,(x.b-o.b)*a,(x.a-o.a)*a)}return}let l=0,c=0,u=0,m=0,f=me.search(h,i,5),g=this.curves[f/5];switch(g){case 0:let x=h[f];l=h[f+1],c=h[f+2],u=h[f+3],m=h[f+4];let v=(i-x)/(h[f+5]-x);l+=(h[f+5+1]-l)*v,c+=(h[f+5+2]-c)*v,u+=(h[f+5+3]-u)*v,m+=(h[f+5+4]-m)*v;break;case 1:l=h[f+1],c=h[f+2],u=h[f+3],m=h[f+4];break;default:l=this.getBezierValue(i,f,1,g-2),c=this.getBezierValue(i,f,2,g+18-2),u=this.getBezierValue(i,f,3,g+18*2-2),m=this.getBezierValue(i,f,4,g+18*3-2)}a==1?o.set(l,c,u,m):(d==0&&o.setFromColor(r.data.color),o.add((l-o.r)*a,(c-o.g)*a,(u-o.b)*a,(m-o.a)*a))}},$t=class extends Ye{constructor(e,t,i){super(e,t,[oe.rgb+"|"+i]);this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 4}setFrame(e,t,i,s,a){e<<=2,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=a}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!r.bone.active)return;let h=this.frames,o=r.color;if(i<h[0]){let g=r.data.color;switch(d){case 0:o.r=g.r,o.g=g.g,o.b=g.b;return;case 1:o.r+=(g.r-o.r)*a,o.g+=(g.g-o.g)*a,o.b+=(g.b-o.b)*a}return}let l=0,c=0,u=0,m=me.search(h,i,4),f=this.curves[m>>2];switch(f){case 0:let g=h[m];l=h[m+1],c=h[m+2],u=h[m+3];let x=(i-g)/(h[m+4]-g);l+=(h[m+4+1]-l)*x,c+=(h[m+4+2]-c)*x,u+=(h[m+4+3]-u)*x;break;case 1:l=h[m+1],c=h[m+2],u=h[m+3];break;default:l=this.getBezierValue(i,m,1,f-2),c=this.getBezierValue(i,m,2,f+18-2),u=this.getBezierValue(i,m,3,f+18*2-2)}if(a==1)o.r=l,o.g=c,o.b=u;else{if(d==0){let g=r.data.color;o.r=g.r,o.g=g.g,o.b=g.b}o.r+=(l-o.r)*a,o.g+=(c-o.g)*a,o.b+=(u-o.b)*a}}},ei=class extends Re{constructor(e,t,i){super(e,t,oe.alpha+"|"+i);this.slotIndex=0,this.slotIndex=i}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!r.bone.active)return;let h=r.color;if(i<this.frames[0]){let l=r.data.color;switch(d){case 0:h.a=l.a;return;case 1:h.a+=(l.a-h.a)*a}return}let o=this.getCurveValue(i);a==1?h.a=o:(d==0&&(h.a=r.data.color.a),h.a+=(o-h.a)*a)}},ti=class extends Ye{constructor(e,t,i){super(e,t,[oe.rgb+"|"+i,oe.alpha+"|"+i,oe.rgb2+"|"+i]);this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 8}setFrame(e,t,i,s,a,d,n,r,h){e<<=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=a,this.frames[e+4]=d,this.frames[e+5]=n,this.frames[e+6]=r,this.frames[e+7]=h}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!r.bone.active)return;let h=this.frames,o=r.color,l=r.darkColor;if(i<h[0]){let w=r.data.color,y=r.data.darkColor;switch(d){case 0:o.setFromColor(w),l.r=y.r,l.g=y.g,l.b=y.b;return;case 1:o.add((w.r-o.r)*a,(w.g-o.g)*a,(w.b-o.b)*a,(w.a-o.a)*a),l.r+=(y.r-l.r)*a,l.g+=(y.g-l.g)*a,l.b+=(y.b-l.b)*a}return}let c=0,u=0,m=0,f=0,g=0,x=0,v=0,p=me.search(h,i,8),b=this.curves[p>>3];switch(b){case 0:let w=h[p];c=h[p+1],u=h[p+2],m=h[p+3],f=h[p+4],g=h[p+5],x=h[p+6],v=h[p+7];let y=(i-w)/(h[p+8]-w);c+=(h[p+8+1]-c)*y,u+=(h[p+8+2]-u)*y,m+=(h[p+8+3]-m)*y,f+=(h[p+8+4]-f)*y,g+=(h[p+8+5]-g)*y,x+=(h[p+8+6]-x)*y,v+=(h[p+8+7]-v)*y;break;case 1:c=h[p+1],u=h[p+2],m=h[p+3],f=h[p+4],g=h[p+5],x=h[p+6],v=h[p+7];break;default:c=this.getBezierValue(i,p,1,b-2),u=this.getBezierValue(i,p,2,b+18-2),m=this.getBezierValue(i,p,3,b+18*2-2),f=this.getBezierValue(i,p,4,b+18*3-2),g=this.getBezierValue(i,p,5,b+18*4-2),x=this.getBezierValue(i,p,6,b+18*5-2),v=this.getBezierValue(i,p,7,b+18*6-2)}if(a==1)o.set(c,u,m,f),l.r=g,l.g=x,l.b=v;else{if(d==0){o.setFromColor(r.data.color);let w=r.data.darkColor;l.r=w.r,l.g=w.g,l.b=w.b}o.add((c-o.r)*a,(u-o.g)*a,(m-o.b)*a,(f-o.a)*a),l.r+=(g-l.r)*a,l.g+=(x-l.g)*a,l.b+=(v-l.b)*a}}},ii=class extends Ye{constructor(e,t,i){super(e,t,[oe.rgb+"|"+i,oe.rgb2+"|"+i]);this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 7}setFrame(e,t,i,s,a,d,n,r){e*=7,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=a,this.frames[e+4]=d,this.frames[e+5]=n,this.frames[e+6]=r}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!r.bone.active)return;let h=this.frames,o=r.color,l=r.darkColor;if(i<h[0]){let w=r.data.color,y=r.data.darkColor;switch(d){case 0:o.r=w.r,o.g=w.g,o.b=w.b,l.r=y.r,l.g=y.g,l.b=y.b;return;case 1:o.r+=(w.r-o.r)*a,o.g+=(w.g-o.g)*a,o.b+=(w.b-o.b)*a,l.r+=(y.r-l.r)*a,l.g+=(y.g-l.g)*a,l.b+=(y.b-l.b)*a}return}let c=0,u=0,m=0,f=0,g=0,x=0,v=0,p=me.search(h,i,7),b=this.curves[p/7];switch(b){case 0:let w=h[p];c=h[p+1],u=h[p+2],m=h[p+3],g=h[p+4],x=h[p+5],v=h[p+6];let y=(i-w)/(h[p+7]-w);c+=(h[p+7+1]-c)*y,u+=(h[p+7+2]-u)*y,m+=(h[p+7+3]-m)*y,g+=(h[p+7+4]-g)*y,x+=(h[p+7+5]-x)*y,v+=(h[p+7+6]-v)*y;break;case 1:c=h[p+1],u=h[p+2],m=h[p+3],g=h[p+4],x=h[p+5],v=h[p+6];break;default:c=this.getBezierValue(i,p,1,b-2),u=this.getBezierValue(i,p,2,b+18-2),m=this.getBezierValue(i,p,3,b+18*2-2),g=this.getBezierValue(i,p,4,b+18*3-2),x=this.getBezierValue(i,p,5,b+18*4-2),v=this.getBezierValue(i,p,6,b+18*5-2)}if(a==1)o.r=c,o.g=u,o.b=m,l.r=g,l.g=x,l.b=v;else{if(d==0){let w=r.data.color,y=r.data.darkColor;o.r=w.r,o.g=w.g,o.b=w.b,l.r=y.r,l.g=y.g,l.b=y.b}o.r+=(c-o.r)*a,o.g+=(u-o.g)*a,o.b+=(m-o.b)*a,l.r+=(g-l.r)*a,l.g+=(x-l.g)*a,l.b+=(v-l.b)*a}}},Ke=class extends me{constructor(e,t){super(e,[oe.attachment+"|"+t]);this.slotIndex=0,this.slotIndex=t,this.attachmentNames=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,t,i){this.frames[e]=t,this.attachmentNames[e]=i}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!!r.bone.active){if(n==1){d==0&&this.setAttachment(e,r,r.data.attachmentName);return}if(i<this.frames[0]){(d==0||d==1)&&this.setAttachment(e,r,r.data.attachmentName);return}this.setAttachment(e,r,this.attachmentNames[me.search1(this.frames,i)])}}setAttachment(e,t,i){t.setAttachment(i?e.getAttachment(this.slotIndex,i):null)}},si=class extends Ye{constructor(e,t,i,s){super(e,t,[oe.deform+"|"+i+"|"+s.id]);this.slotIndex=0,this.slotIndex=i,this.attachment=s,this.vertices=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,t,i){this.frames[e]=t,this.vertices[e]=i}setBezier(e,t,i,s,a,d,n,r,h,o,l){let c=this.curves,u=this.getFrameCount()+e*18;i==0&&(c[t]=2+u);let m=(s-d*2+r)*.03,f=h*.03-n*.06,g=((d-r)*3-s+o)*.006,x=(n-h+.33333333)*.018,v=m*2+g,p=f*2+x,b=(d-s)*.3+m+g*.16666667,w=n*.3+f+x*.16666667,y=s+b,T=w;for(let A=u+18;u<A;u+=2)c[u]=y,c[u+1]=T,b+=v,w+=p,v+=g,p+=x,y+=b,T+=w}getCurvePercent(e,t){let i=this.curves,s=i[t];switch(s){case 0:let r=this.frames[t];return(e-r)/(this.frames[t+this.getFrameEntries()]-r);case 1:return 0}if(s-=2,i[s]>e){let r=this.frames[t];return i[s+1]*(e-r)/(i[s]-r)}let a=s+18;for(s+=2;s<a;s+=2)if(i[s]>=e){let r=i[s-2],h=i[s-1];return h+(e-r)/(i[s]-r)*(i[s+1]-h)}let d=i[a-2],n=i[a-1];return n+(1-n)*(e-d)/(this.frames[t+this.getFrameEntries()]-d)}apply(e,t,i,s,a,d,n){let r=e.slots[this.slotIndex];if(!r.bone.active)return;let h=r.getAttachment();if(!(h instanceof Be)||h.deformAttachment!=this.attachment)return;let o=r.deform;o.length==0&&(d=0);let l=this.vertices,c=l[0].length,u=this.frames;if(i<u[0]){let p=h;switch(d){case 0:o.length=0;return;case 1:if(a==1){o.length=0;return}if(o.length=c,p.bones){a=1-a;for(var m=0;m<c;m++)o[m]*=a}else{let b=p.vertices;for(var m=0;m<c;m++)o[m]+=(b[m]-o[m])*a}}return}if(o.length=c,i>=u[u.length-1]){let p=l[u.length-1];if(a==1)if(d==3){let b=h;if(b.bones)for(let w=0;w<c;w++)o[w]+=p[w];else{let w=b.vertices;for(let y=0;y<c;y++)o[y]+=p[y]-w[y]}}else V.arrayCopy(p,0,o,0,c);else switch(d){case 0:{let w=h;if(w.bones)for(let y=0;y<c;y++)o[y]=p[y]*a;else{let y=w.vertices;for(let T=0;T<c;T++){let A=y[T];o[T]=A+(p[T]-A)*a}}break}case 1:case 2:for(let w=0;w<c;w++)o[w]+=(p[w]-o[w])*a;break;case 3:let b=h;if(b.bones)for(let w=0;w<c;w++)o[w]+=p[w]*a;else{let w=b.vertices;for(let y=0;y<c;y++)o[y]+=(p[y]-w[y])*a}}return}let f=me.search1(u,i),g=this.getCurvePercent(i,f),x=l[f],v=l[f+1];if(a==1)if(d==3){let p=h;if(p.bones)for(let b=0;b<c;b++){let w=x[b];o[b]+=w+(v[b]-w)*g}else{let b=p.vertices;for(let w=0;w<c;w++){let y=x[w];o[w]+=y+(v[w]-y)*g-b[w]}}}else for(let p=0;p<c;p++){let b=x[p];o[p]=b+(v[p]-b)*g}else switch(d){case 0:{let b=h;if(b.bones)for(let w=0;w<c;w++){let y=x[w];o[w]=(y+(v[w]-y)*g)*a}else{let w=b.vertices;for(let y=0;y<c;y++){let T=x[y],A=w[y];o[y]=A+(T+(v[y]-T)*g-A)*a}}break}case 1:case 2:for(let b=0;b<c;b++){let w=x[b];o[b]+=(w+(v[b]-w)*g-o[b])*a}break;case 3:let p=h;if(p.bones)for(let b=0;b<c;b++){let w=x[b];o[b]+=(w+(v[b]-w)*g)*a}else{let b=p.vertices;for(let w=0;w<c;w++){let y=x[w];o[w]+=(y+(v[w]-y)*g-b[w])*a}}}}},Hi=class extends me{constructor(e){super(e,Hi.propertyIds);this.events=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,t){this.frames[e]=t.time,this.events[e]=t}apply(e,t,i,s,a,d,n){if(!s)return;let r=this.frames,h=this.frames.length;if(t>i)this.apply(e,t,Number.MAX_VALUE,s,a,d,n),t=-1;else if(t>=r[h-1])return;if(i<r[0])return;let o=0;if(t<r[0])o=0;else{o=me.search1(r,t)+1;let l=r[o];for(;o>0&&r[o-1]==l;)o--}for(;o<h&&i>=r[o];o++)s.push(this.events[o])}},mt=Hi;mt.propertyIds=[""+oe.event];var Gi=class extends me{constructor(e){super(e,Gi.propertyIds);this.drawOrders=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,t,i){this.frames[e]=t,this.drawOrders[e]=i}apply(e,t,i,s,a,d,n){if(n==1){d==0&&V.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(i<this.frames[0]){(d==0||d==1)&&V.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}let r=this.drawOrders[me.search1(this.frames,i)];if(!r)V.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else{let h=e.drawOrder,o=e.slots;for(let l=0,c=r.length;l<c;l++)h[l]=o[r[l]]}}},Qe=Gi;Qe.propertyIds=[""+oe.drawOrder];var ri=class extends Ye{constructor(e,t,i){super(e,t,[oe.ikConstraint+"|"+i]);this.ikConstraintIndex=i}getFrameEntries(){return 6}setFrame(e,t,i,s,a,d,n){e*=6,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=a,this.frames[e+4]=d?1:0,this.frames[e+5]=n?1:0}apply(e,t,i,s,a,d,n){let r=e.ikConstraints[this.ikConstraintIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.mix=r.data.mix,r.softness=r.data.softness,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch;return;case 1:r.mix+=(r.data.mix-r.mix)*a,r.softness+=(r.data.softness-r.softness)*a,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch}return}let o=0,l=0,c=me.search(h,i,6),u=this.curves[c/6];switch(u){case 0:let m=h[c];o=h[c+1],l=h[c+2];let f=(i-m)/(h[c+6]-m);o+=(h[c+6+1]-o)*f,l+=(h[c+6+2]-l)*f;break;case 1:o=h[c+1],l=h[c+2];break;default:o=this.getBezierValue(i,c,1,u-2),l=this.getBezierValue(i,c,2,u+18-2)}d==0?(r.mix=r.data.mix+(o-r.data.mix)*a,r.softness=r.data.softness+(l-r.data.softness)*a,n==1?(r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch):(r.bendDirection=h[c+3],r.compress=h[c+4]!=0,r.stretch=h[c+5]!=0)):(r.mix+=(o-r.mix)*a,r.softness+=(l-r.softness)*a,n==0&&(r.bendDirection=h[c+3],r.compress=h[c+4]!=0,r.stretch=h[c+5]!=0))}},ai=class extends Ye{constructor(e,t,i){super(e,t,[oe.transformConstraint+"|"+i]);this.transformConstraintIndex=i}getFrameEntries(){return 7}setFrame(e,t,i,s,a,d,n,r){let h=this.frames;e*=7,h[e]=t,h[e+1]=i,h[e+2]=s,h[e+3]=a,h[e+4]=d,h[e+5]=n,h[e+6]=r}apply(e,t,i,s,a,d,n){let r=e.transformConstraints[this.transformConstraintIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){let v=r.data;switch(d){case 0:r.mixRotate=v.mixRotate,r.mixX=v.mixX,r.mixY=v.mixY,r.mixScaleX=v.mixScaleX,r.mixScaleY=v.mixScaleY,r.mixShearY=v.mixShearY;return;case 1:r.mixRotate+=(v.mixRotate-r.mixRotate)*a,r.mixX+=(v.mixX-r.mixX)*a,r.mixY+=(v.mixY-r.mixY)*a,r.mixScaleX+=(v.mixScaleX-r.mixScaleX)*a,r.mixScaleY+=(v.mixScaleY-r.mixScaleY)*a,r.mixShearY+=(v.mixShearY-r.mixShearY)*a}return}let o,l,c,u,m,f,g=me.search(h,i,7),x=this.curves[g/7];switch(x){case 0:let v=h[g];o=h[g+1],l=h[g+2],c=h[g+3],u=h[g+4],m=h[g+5],f=h[g+6];let p=(i-v)/(h[g+7]-v);o+=(h[g+7+1]-o)*p,l+=(h[g+7+2]-l)*p,c+=(h[g+7+3]-c)*p,u+=(h[g+7+4]-u)*p,m+=(h[g+7+5]-m)*p,f+=(h[g+7+6]-f)*p;break;case 1:o=h[g+1],l=h[g+2],c=h[g+3],u=h[g+4],m=h[g+5],f=h[g+6];break;default:o=this.getBezierValue(i,g,1,x-2),l=this.getBezierValue(i,g,2,x+18-2),c=this.getBezierValue(i,g,3,x+18*2-2),u=this.getBezierValue(i,g,4,x+18*3-2),m=this.getBezierValue(i,g,5,x+18*4-2),f=this.getBezierValue(i,g,6,x+18*5-2)}if(d==0){let v=r.data;r.mixRotate=v.mixRotate+(o-v.mixRotate)*a,r.mixX=v.mixX+(l-v.mixX)*a,r.mixY=v.mixY+(c-v.mixY)*a,r.mixScaleX=v.mixScaleX+(u-v.mixScaleX)*a,r.mixScaleY=v.mixScaleY+(m-v.mixScaleY)*a,r.mixShearY=v.mixShearY+(f-v.mixShearY)*a}else r.mixRotate+=(o-r.mixRotate)*a,r.mixX+=(l-r.mixX)*a,r.mixY+=(c-r.mixY)*a,r.mixScaleX+=(u-r.mixScaleX)*a,r.mixScaleY+=(m-r.mixScaleY)*a,r.mixShearY+=(f-r.mixShearY)*a}},ni=class extends Re{constructor(e,t,i){super(e,t,oe.pathConstraintPosition+"|"+i);this.pathConstraintIndex=i}apply(e,t,i,s,a,d,n){let r=e.pathConstraints[this.pathConstraintIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.position=r.data.position;return;case 1:r.position+=(r.data.position-r.position)*a}return}let o=this.getCurveValue(i);d==0?r.position=r.data.position+(o-r.data.position)*a:r.position+=(o-r.position)*a}},li=class extends Re{constructor(e,t,i){super(e,t,oe.pathConstraintSpacing+"|"+i);this.pathConstraintIndex=0,this.pathConstraintIndex=i}apply(e,t,i,s,a,d,n){let r=e.pathConstraints[this.pathConstraintIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.spacing=r.data.spacing;return;case 1:r.spacing+=(r.data.spacing-r.spacing)*a}return}let o=this.getCurveValue(i);d==0?r.spacing=r.data.spacing+(o-r.data.spacing)*a:r.spacing+=(o-r.spacing)*a}},oi=class extends Ye{constructor(e,t,i){super(e,t,[oe.pathConstraintMix+"|"+i]);this.pathConstraintIndex=0,this.pathConstraintIndex=i}getFrameEntries(){return 4}setFrame(e,t,i,s,a){let d=this.frames;e<<=2,d[e]=t,d[e+1]=i,d[e+2]=s,d[e+3]=a}apply(e,t,i,s,a,d,n){let r=e.pathConstraints[this.pathConstraintIndex];if(!r.active)return;let h=this.frames;if(i<h[0]){switch(d){case 0:r.mixRotate=r.data.mixRotate,r.mixX=r.data.mixX,r.mixY=r.data.mixY;return;case 1:r.mixRotate+=(r.data.mixRotate-r.mixRotate)*a,r.mixX+=(r.data.mixX-r.mixX)*a,r.mixY+=(r.data.mixY-r.mixY)*a}return}let o,l,c,u=me.search(h,i,4),m=this.curves[u>>2];switch(m){case 0:let f=h[u];o=h[u+1],l=h[u+2],c=h[u+3];let g=(i-f)/(h[u+4]-f);o+=(h[u+4+1]-o)*g,l+=(h[u+4+2]-l)*g,c+=(h[u+4+3]-c)*g;break;case 1:o=h[u+1],l=h[u+2],c=h[u+3];break;default:o=this.getBezierValue(i,u,1,m-2),l=this.getBezierValue(i,u,2,m+18-2),c=this.getBezierValue(i,u,3,m+18*2-2)}if(d==0){let f=r.data;r.mixRotate=f.mixRotate+(o-f.mixRotate)*a,r.mixX=f.mixX+(l-f.mixX)*a,r.mixY=f.mixY+(c-f.mixY)*a}else r.mixRotate+=(o-r.mixRotate)*a,r.mixX+=(l-r.mixX)*a,r.mixY+=(c-r.mixY)*a}},St=class{constructor(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Ji(this),this.propertyIDs=new Ut,this.animationsChanged=!1,this.trackEntryPool=new ut(()=>new Zi),this.data=e}static emptyAnimation(){return ui||(ui=new yt("<empty>",[],0)),ui}update(e){e*=this.timeScale;let t=this.tracks;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(!a)continue;a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;let d=e*a.timeScale;if(a.delay>0){if(a.delay-=d,a.delay>0)continue;d=-a.delay,a.delay=0}let n=a.next;if(n){let r=a.trackLast-n.delay;if(r>=0){for(n.delay=0,n.trackTime+=a.timeScale==0?0:(r/a.timeScale+e)*n.timeScale,a.trackTime+=d,this.setCurrent(i,n,!0);n.mixingFrom;)n.mixTime+=e,n=n.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){t[i]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,e)){let r=a.mixingFrom;for(a.mixingFrom=null,r&&(r.mixingTo=null);r;)this.queue.end(r),r=r.mixingFrom}a.trackTime+=d}this.queue.drain()}updateMixingFrom(e,t){let i=e.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,t);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((i.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=e),e.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.trackTime+=t*i.timeScale,e.mixTime+=t,!1)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,i=this.tracks,s=!1;for(let c=0,u=i.length;c<u;c++){let m=i[c];if(!m||m.delay>0)continue;s=!0;let f=c==0?fe.first:m.mixBlend,g=m.alpha;m.mixingFrom?g*=this.applyMixingFrom(m,e,f):m.trackTime>=m.trackEnd&&!m.next&&(g=0);let x=m.animationLast,v=m.getAnimationTime(),p=v,b=t;m.reverse&&(p=m.animation.duration-p,b=null);let w=m.animation.timelines,y=w.length;if(c==0&&g==1||f==fe.add)for(let T=0;T<y;T++){V.webkit602BugfixHelper(g,f);var a=w[T];a instanceof Ke?this.applyAttachmentTimeline(a,e,p,f,!0):a.apply(e,x,p,b,g,f,Pe.mixIn)}else{let T=m.timelineMode,A=m.timelinesRotation.length!=y<<1;A&&(m.timelinesRotation.length=y<<1);for(let E=0;E<y;E++){let I=w[E],Y=T[E]==Ct?f:fe.setup;I instanceof ft?this.applyRotateTimeline(I,e,p,g,Y,m.timelinesRotation,E<<1,A):I instanceof Ke?this.applyAttachmentTimeline(I,e,p,f,!0):(V.webkit602BugfixHelper(g,f),I.apply(e,x,p,b,g,Y,Pe.mixIn))}}this.queueEvents(m,v),t.length=0,m.nextAnimationLast=v,m.nextTrackLast=m.trackTime}for(var d=this.unkeyedState+ci,n=e.slots,r=0,h=e.slots.length;r<h;r++){var o=n[r];if(o.attachmentState==d){var l=o.data.attachmentName;o.setAttachment(l?e.getAttachment(o.data.index,l):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(e,t,i){let s=e.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,t,i);let a=0;e.mixDuration==0?(a=1,i==fe.first&&(i=fe.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),i!=fe.first&&(i=s.mixBlend));let d=a<s.attachmentThreshold,n=a<s.drawOrderThreshold,r=s.animation.timelines,h=r.length,o=s.alpha*e.interruptAlpha,l=o*(1-a),c=s.animationLast,u=s.getAnimationTime(),m=u,f=null;if(s.reverse?m=s.animation.duration-m:a<s.eventThreshold&&(f=this.events),i==fe.add)for(let g=0;g<h;g++)r[g].apply(t,c,m,f,l,i,Pe.mixOut);else{let g=s.timelineMode,x=s.timelineHoldMix,v=s.timelinesRotation.length!=h<<1;v&&(s.timelinesRotation.length=h<<1),s.totalAlpha=0;for(let p=0;p<h;p++){let b=r[p],w=Pe.mixOut,y,T=0;switch(g[p]){case Ct:if(!n&&b instanceof Qe)continue;y=i,T=l;break;case hi:y=fe.setup,T=l;break;case di:y=i,T=o;break;case Tt:y=fe.setup,T=o;break;default:y=fe.setup;let A=x[p];T=o*Math.max(0,1-A.mixTime/A.mixDuration);break}s.totalAlpha+=T,b instanceof ft?this.applyRotateTimeline(b,t,m,T,y,s.timelinesRotation,p<<1,v):b instanceof Ke?this.applyAttachmentTimeline(b,t,m,y,d):(V.webkit602BugfixHelper(T,i),n&&b instanceof Qe&&y==fe.setup&&(w=Pe.mixIn),b.apply(t,c,m,f,T,y,w))}}return e.mixDuration>0&&this.queueEvents(s,u),this.events.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime,a}applyAttachmentTimeline(e,t,i,s,a){var d=t.slots[e.slotIndex];!d.bone.active||(i<e.frames[0]?(s==fe.setup||s==fe.first)&&this.setAttachment(t,d,d.data.attachmentName,a):this.setAttachment(t,d,e.attachmentNames[me.search1(e.frames,i)],a),d.attachmentState<=this.unkeyedState&&(d.attachmentState=this.unkeyedState+ci))}setAttachment(e,t,i,s){t.setAttachment(i?e.getAttachment(t.data.index,i):null),s&&(t.attachmentState=this.unkeyedState+Qi)}applyRotateTimeline(e,t,i,s,a,d,n,r){if(r&&(d[n]=0),s==1){e.apply(t,0,i,null,1,a,Pe.mixIn);return}let h=t.bones[e.boneIndex];if(!h.active)return;let o=e.frames,l=0,c=0;if(i<o[0])switch(a){case fe.setup:h.rotation=h.data.rotation;default:return;case fe.first:l=h.rotation,c=h.data.rotation}else l=a==fe.setup?h.data.rotation:h.rotation,c=h.data.rotation+e.getCurveValue(i);let u=0,m=c-l;if(m-=(16384-(16384.499999999996-m/360|0))*360,m==0)u=d[n];else{let f=0,g=0;r?(f=0,g=m):(f=d[n],g=d[n+1]);let x=m>0,v=f>=0;F.signum(g)!=F.signum(m)&&Math.abs(g)<=90&&(Math.abs(f)>180&&(f+=360*F.signum(f)),v=x),u=m+f-f%360,v!=x&&(u+=360*F.signum(f)),d[n]=u}d[n+1]=m,h.rotation=l+u*s}queueEvents(e,t){let i=e.animationStart,s=e.animationEnd,a=s-i,d=e.trackLast%a,n=this.events,r=0,h=n.length;for(;r<h;r++){let l=n[r];if(l.time<d)break;l.time>s||this.queue.event(e,l)}let o=!1;for(e.loop?o=a==0||d>e.trackTime%a:o=t>=s&&e.animationLast<s,o&&this.queue.complete(e);r<h;r++){let l=n[r];l.time<i||this.queue.event(e,l)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,i=this.tracks.length;t<i;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let i=t;for(;;){let s=i.mixingFrom;if(!s)break;this.queue.end(s),i.mixingFrom=null,i.mixingTo=null,i=s}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,i){let s=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,s&&(i&&this.queue.interrupt(s),t.mixingFrom=s,s.mixingTo=t,t.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(t.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,i=!1){let s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,s,i)}setAnimationWith(e,t,i=!1){if(!t)throw new Error("animation cannot be null.");let s=!0,a=this.expandToIndex(e);a&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,s=!1):this.clearNext(a));let d=this.trackEntry(e,t,i,a);return this.setCurrent(e,d,s),this.queue.drain(),d}addAnimation(e,t,i=!1,s=0){let a=this.data.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,a,i,s)}addAnimationWith(e,t,i=!1,s=0){if(!t)throw new Error("animation cannot be null.");let a=this.expandToIndex(e);if(a)for(;a.next;)a=a.next;let d=this.trackEntry(e,t,i,a);return a?(a.next=d,d.previous=a,s<=0&&(s+=a.getTrackComplete()-d.mixDuration)):(this.setCurrent(e,d,!0),this.queue.drain()),d.delay=s,d}setEmptyAnimation(e,t=0){let i=this.setAnimationWith(e,St.emptyAnimation(),!1);return i.mixDuration=t,i.trackEnd=t,i}addEmptyAnimation(e,t=0,i=0){let s=this.addAnimationWith(e,St.emptyAnimation(),!1,i);return i<=0&&(s.delay+=s.mixDuration-t),s.mixDuration=t,s.trackEnd=t,s}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let i=0,s=this.tracks.length;i<s;i++){let a=this.tracks[i];a&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(V.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,i,s){let a=this.trackEntryPool.obtain();return a.trackIndex=e,a.animation=t,a.loop=i,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=t.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=s?this.data.getMix(s.animation,t):0,a.mixBlend=fe.replace,a}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,i=e.length;t<i;t++){let s=e[t];if(!!s){for(;s.mixingFrom;)s=s.mixingFrom;do(!s.mixingTo||s.mixBlend!=fe.add)&&this.computeHold(s),s=s.mixingTo;while(s)}}}computeHold(e){let t=e.mixingTo,i=e.animation.timelines,s=e.animation.timelines.length,a=e.timelineMode;a.length=s;let d=e.timelineHoldMix;d.length=0;let n=this.propertyIDs;if(t&&t.holdPrevious){for(let r=0;r<s;r++)a[r]=n.addAll(i[r].getPropertyIds())?Tt:di;return}e:for(let r=0;r<s;r++){let h=i[r],o=h.getPropertyIds();if(!n.addAll(o))a[r]=Ct;else if(!t||h instanceof Ke||h instanceof Qe||h instanceof mt||!t.animation.hasTimeline(o))a[r]=hi;else{for(let l=t.mixingTo;l;l=l.mixingTo)if(!l.animation.hasTimeline(o)){if(e.mixDuration>0){a[r]=Ki,d[r]=l;continue e}break}a[r]=Tt}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},Zi=class{constructor(){this.mixBlend=fe.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}},Ji=class{constructor(e){this.objects=[],this.drainDisabled=!1,this.animState=e}start(e){this.objects.push(Ce.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(Ce.interrupt),this.objects.push(e)}end(e){this.objects.push(Ce.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(Ce.dispose),this.objects.push(e)}complete(e){this.objects.push(Ce.complete),this.objects.push(e)}event(e,t){this.objects.push(Ce.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let i=0;i<e.length;i+=2){let s=e[i],a=e[i+1];switch(s){case Ce.start:a.listener&&a.listener.start&&a.listener.start(a);for(let n=0;n<t.length;n++)t[n].start&&t[n].start(a);break;case Ce.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(let n=0;n<t.length;n++)t[n].interrupt&&t[n].interrupt(a);break;case Ce.end:a.listener&&a.listener.end&&a.listener.end(a);for(let n=0;n<t.length;n++)t[n].end&&t[n].end(a);case Ce.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(let n=0;n<t.length;n++)t[n].dispose&&t[n].dispose(a);this.animState.trackEntryPool.free(a);break;case Ce.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(let n=0;n<t.length;n++)t[n].complete&&t[n].complete(a);break;case Ce.event:let d=e[i+++2];a.listener&&a.listener.event&&a.listener.event(a,d);for(let n=0;n<t.length;n++)t[n].event&&t[n].event(a,d);break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}},Ce;(function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"})(Ce||(Ce={}));var Os=class{start(e){}interrupt(e){}end(e){}dispose(e){}complete(e){}event(e,t){}},Ct=0,hi=1,di=2,Tt=3,Ki=4,ci=1,Qi=2,ui=null,$i=class{constructor(e){if(this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}setMix(e,t,i){let s=this.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);let a=this.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);this.setMixWith(s,a,i)}setMixWith(e,t,i){if(!e)throw new Error("from cannot be null.");if(!t)throw new Error("to cannot be null.");let s=e.name+"."+t.name;this.animationToMixTime[s]=i}getMix(e,t){let i=e.name+"."+t.name,s=this.animationToMixTime[i];return s===void 0?this.defaultMix:s}},kt=class extends Be{constructor(e){super(e);this.color=new O(1,1,1,1)}copy(){let e=new kt(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}},gt=class extends Be{constructor(e){super(e);this.color=new O(.2275,.2275,.8078,1)}copy(){let e=new gt(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}},fi=class{constructor(e){this._image=e}getImage(){return this._image}},pe;(function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.MipMap=9987]="MipMap",e[e.MipMapNearestNearest=9984]="MipMapNearestNearest",e[e.MipMapLinearNearest=9985]="MipMapLinearNearest",e[e.MipMapNearestLinear=9986]="MipMapNearestLinear",e[e.MipMapLinearLinear=9987]="MipMapLinearLinear"})(pe||(pe={}));var $e;(function(e){e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.ClampToEdge=33071]="ClampToEdge",e[e.Repeat=10497]="Repeat"})($e||($e={}));var es=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},Ns=class extends fi{setFilters(e,t){}setWraps(e,t){}dispose(){}},ts=class{constructor(e){this.pages=new Array,this.regions=new Array;let t=new Us(e),i=new Array(4),s=null,a=null,d={};d.size=()=>{s.width=parseInt(i[1]),s.height=parseInt(i[2])},d.format=()=>{},d.filter=()=>{s.minFilter=V.enumValue(pe,i[1]),s.magFilter=V.enumValue(pe,i[2])},d.repeat=()=>{i[1].indexOf("x")!=-1&&(s.uWrap=$e.Repeat),i[1].indexOf("y")!=-1&&(s.vWrap=$e.Repeat)},d.pma=()=>{s.pma=i[1]=="true"};var n={};n.xy=()=>{a.x=parseInt(i[1]),a.y=parseInt(i[2])},n.size=()=>{a.width=parseInt(i[1]),a.height=parseInt(i[2])},n.bounds=()=>{a.x=parseInt(i[1]),a.y=parseInt(i[2]),a.width=parseInt(i[3]),a.height=parseInt(i[4])},n.offset=()=>{a.offsetX=parseInt(i[1]),a.offsetY=parseInt(i[2])},n.orig=()=>{a.originalWidth=parseInt(i[1]),a.originalHeight=parseInt(i[2])},n.offsets=()=>{a.offsetX=parseInt(i[1]),a.offsetY=parseInt(i[2]),a.originalWidth=parseInt(i[3]),a.originalHeight=parseInt(i[4])},n.rotate=()=>{let l=i[1];l=="true"?a.degrees=90:l!="false"&&(a.degrees=parseInt(l))},n.index=()=>{a.index=parseInt(i[1])};let r=t.readLine();for(;r&&r.trim().length==0;)r=t.readLine();for(;!(!r||r.trim().length==0||t.readEntry(i,r)==0);)r=t.readLine();let h=null,o=null;for(;r!==null;)if(r.trim().length==0)s=null,r=t.readLine();else if(s){for(a=new mi,a.page=s,a.name=r;;){let l=t.readEntry(i,r=t.readLine());if(l==0)break;let c=n[i[0]];if(c)c();else{h||(h=[],o=[]),h.push(i[0]);let u=[];for(let m=0;m<l;m++)u.push(parseInt(i[m+1]));o.push(u)}}a.originalWidth==0&&a.originalHeight==0&&(a.originalWidth=a.width,a.originalHeight=a.height),h&&h.length>0&&(a.names=h,a.values=o,h=null,o=null),a.u=a.x/s.width,a.v=a.y/s.height,a.degrees==90?(a.u2=(a.x+a.height)/s.width,a.v2=(a.y+a.width)/s.height):(a.u2=(a.x+a.width)/s.width,a.v2=(a.y+a.height)/s.height),this.regions.push(a)}else{for(s=new is,s.name=r.trim();t.readEntry(i,r=t.readLine())!=0;){let l=d[i[0]];l&&l()}this.pages.push(s)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let i of this.pages)i.setTexture(e.get(t+i.name))}dispose(){for(let e=0;e<this.pages.length;e++)this.pages[e].texture.dispose()}},Us=class{constructor(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t||(t=t.trim(),t.length==0))return 0;let i=t.indexOf(":");if(i==-1)return 0;e[0]=t.substr(0,i).trim();for(let s=1,a=i+1;;s++){let d=t.indexOf(",",a);if(d==-1)return e[s]=t.substr(a).trim(),s;if(e[s]=t.substr(a,d-a).trim(),a=d+1,s==4)return 4}}},is=class{constructor(){this.minFilter=pe.Nearest,this.magFilter=pe.Nearest,this.uWrap=$e.ClampToEdge,this.vWrap=$e.ClampToEdge}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap)}},mi=class extends es{},je=class extends Be{constructor(e){super(e);this.color=new O(1,1,1,1),this.tempColor=new O(0,0,0,0)}updateUVs(){let e=this.regionUVs;(!this.uvs||this.uvs.length!=e.length)&&(this.uvs=V.newFloatArray(e.length));let t=this.uvs,i=this.uvs.length,s=this.region.u,a=this.region.v,d=0,n=0;if(this.region instanceof mi){let r=this.region,h=r.page.texture.getImage(),o=h.width,l=h.height;switch(r.degrees){case 90:s-=(r.originalHeight-r.offsetY-r.height)/o,a-=(r.originalWidth-r.offsetX-r.width)/l,d=r.originalHeight/o,n=r.originalWidth/l;for(let c=0;c<i;c+=2)t[c]=s+e[c+1]*d,t[c+1]=a+(1-e[c])*n;return;case 180:s-=(r.originalWidth-r.offsetX-r.width)/o,a-=r.offsetY/l,d=r.originalWidth/o,n=r.originalHeight/l;for(let c=0;c<i;c+=2)t[c]=s+(1-e[c])*d,t[c+1]=a+(1-e[c+1])*n;return;case 270:s-=r.offsetY/o,a-=r.offsetX/l,d=r.originalHeight/o,n=r.originalWidth/l;for(let c=0;c<i;c+=2)t[c]=s+(1-e[c+1])*d,t[c+1]=a+e[c]*n;return}s-=r.offsetX/o,a-=(r.originalHeight-r.offsetY-r.height)/l,d=r.originalWidth/o,n=r.originalHeight/l}else this.region?(d=this.region.u2-s,n=this.region.v2-a):(s=a=0,d=n=1);for(let r=0;r<i;r+=2)t[r]=s+e[r]*d,t[r+1]=a+e[r+1]*n}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let e=new je(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),V.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),V.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),V.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,this.edges&&(e.edges=new Array(this.edges.length),V.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}newLinkedMesh(){let e=new je(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),e.deformAttachment=this.deformAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e.updateUVs(),e}},et=class extends Be{constructor(e){super(e);this.closed=!1,this.constantSpeed=!1,this.color=new O(1,1,1,1)}copy(){let e=new et(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),V.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}},gi=class extends Be{constructor(e){super(e);this.color=new O(.38,.94,0,1)}computeWorldPosition(e,t){return t.x=this.x*e.a+this.y*e.b+e.worldX,t.y=this.x*e.c+this.y*e.d+e.worldY,t}computeWorldRotation(e){let t=F.cosDeg(this.rotation),i=F.sinDeg(this.rotation),s=t*e.a+i*e.b,a=t*e.c+i*e.d;return Math.atan2(a,s)*F.radDeg}copy(){let e=new gi(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}},ss=class extends zt{constructor(e){super(e);this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new O(1,1,1,1),this.offset=V.newFloatArray(8),this.uvs=V.newFloatArray(8),this.tempColor=new O(1,1,1,1)}updateOffset(){let e=this.region,t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*i,d=s+this.region.width*t,n=a+this.region.height*i,r=this.rotation*Math.PI/180,h=Math.cos(r),o=Math.sin(r),l=this.x,c=this.y,u=s*h+l,m=s*o,f=a*h+c,g=a*o,x=d*h+l,v=d*o,p=n*h+c,b=n*o,w=this.offset;w[0]=u-g,w[1]=f+m,w[2]=u-b,w[3]=p+m,w[4]=x-b,w[5]=p+v,w[6]=x-g,w[7]=f+v}setRegion(e){this.region=e;let t=this.uvs;e.degrees==90?(t[2]=e.u,t[3]=e.v2,t[4]=e.u,t[5]=e.v,t[6]=e.u2,t[7]=e.v,t[0]=e.u2,t[1]=e.v2):(t[0]=e.u,t[1]=e.v2,t[2]=e.u,t[3]=e.v,t[4]=e.u2,t[5]=e.v,t[6]=e.u2,t[7]=e.v2)}computeWorldVertices(e,t,i,s){let a=this.offset,d=e.worldX,n=e.worldY,r=e.a,h=e.b,o=e.c,l=e.d,c=0,u=0;c=a[0],u=a[1],t[i]=c*r+u*h+d,t[i+1]=c*o+u*l+n,i+=s,c=a[2],u=a[3],t[i]=c*r+u*h+d,t[i+1]=c*o+u*l+n,i+=s,c=a[4],u=a[5],t[i]=c*r+u*h+d,t[i+1]=c*o+u*l+n,i+=s,c=a[6],u=a[7],t[i]=c*r+u*h+d,t[i+1]=c*o+u*l+n}copy(){let e=new ss(this.name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,V.arrayCopy(this.uvs,0,e.uvs,0,8),V.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e}},ae=ss;ae.X1=0,ae.Y1=1,ae.C1R=2,ae.C1G=3,ae.C1B=4,ae.C1A=5,ae.U1=6,ae.V1=7,ae.X2=8,ae.Y2=9,ae.C2R=10,ae.C2G=11,ae.C2B=12,ae.C2A=13,ae.U2=14,ae.V2=15,ae.X3=16,ae.Y3=17,ae.C3R=18,ae.C3G=19,ae.C3B=20,ae.C3A=21,ae.U3=22,ae.V3=23,ae.X4=24,ae.Y4=25,ae.C4R=26,ae.C4G=27,ae.C4B=28,ae.C4A=29,ae.U4=30,ae.V4=31;var pi=class{constructor(e){this.atlas=e}newRegionAttachment(e,t,i){let s=this.atlas.findRegion(i);if(!s)throw new Error("Region not found in atlas: "+i+" (region attachment: "+t+")");s.renderObject=s;let a=new ae(t);return a.setRegion(s),a}newMeshAttachment(e,t,i){let s=this.atlas.findRegion(i);if(!s)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+t+")");s.renderObject=s;let a=new je(t);return a.region=s,a}newBoundingBoxAttachment(e,t){return new kt(t)}newPathAttachment(e,t){return new et(t)}newPointAttachment(e,t){return new gi(t)}newClippingAttachment(e,t){return new gt(t)}},xi=class{constructor(e,t,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Te.Normal,this.skinRequired=!1,this.color=new O,e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=i}},Te;(function(e){e[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"})(Te||(Te={}));var wi=class{constructor(e,t,i){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,t,i,s,a,d,n){this.ax=e,this.ay=t,this.arotation=i,this.ascaleX=s,this.ascaleY=a,this.ashearX=d,this.ashearY=n;let r=this.parent;if(!r){let u=this.skeleton,m=i+90+n,f=u.scaleX,g=u.scaleY;this.a=F.cosDeg(i+d)*s*f,this.b=F.cosDeg(m)*a*f,this.c=F.sinDeg(i+d)*s*g,this.d=F.sinDeg(m)*a*g,this.worldX=e*f+u.x,this.worldY=t*g+u.y;return}let h=r.a,o=r.b,l=r.c,c=r.d;switch(this.worldX=h*e+o*t+r.worldX,this.worldY=l*e+c*t+r.worldY,this.data.transformMode){case Te.Normal:{let u=i+90+n,m=F.cosDeg(i+d)*s,f=F.cosDeg(u)*a,g=F.sinDeg(i+d)*s,x=F.sinDeg(u)*a;this.a=h*m+o*g,this.b=h*f+o*x,this.c=l*m+c*g,this.d=l*f+c*x;return}case Te.OnlyTranslation:{let u=i+90+n;this.a=F.cosDeg(i+d)*s,this.b=F.cosDeg(u)*a,this.c=F.sinDeg(i+d)*s,this.d=F.sinDeg(u)*a;break}case Te.NoRotationOrReflection:{let u=h*h+l*l,m=0;u>1e-4?(u=Math.abs(h*c-o*l)/u,h/=this.skeleton.scaleX,l/=this.skeleton.scaleY,o=l*u,c=h*u,m=Math.atan2(l,h)*F.radDeg):(h=0,l=0,m=90-Math.atan2(c,o)*F.radDeg);let f=i+d-m,g=i+n-m+90,x=F.cosDeg(f)*s,v=F.cosDeg(g)*a,p=F.sinDeg(f)*s,b=F.sinDeg(g)*a;this.a=h*x-o*p,this.b=h*v-o*b,this.c=l*x+c*p,this.d=l*v+c*b;break}case Te.NoScale:case Te.NoScaleOrReflection:{let u=F.cosDeg(i),m=F.sinDeg(i),f=(h*u+o*m)/this.skeleton.scaleX,g=(l*u+c*m)/this.skeleton.scaleY,x=Math.sqrt(f*f+g*g);x>1e-5&&(x=1/x),f*=x,g*=x,x=Math.sqrt(f*f+g*g),this.data.transformMode==Te.NoScale&&h*c-o*l<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(x=-x);let v=Math.PI/2+Math.atan2(g,f),p=Math.cos(v)*x,b=Math.sin(v)*x,w=F.cosDeg(d)*s,y=F.cosDeg(90+n)*a,T=F.sinDeg(d)*s,A=F.sinDeg(90+n)*a;this.a=f*w+p*T,this.b=f*y+p*A,this.c=g*w+b*T,this.d=g*y+b*A;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*F.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*F.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let e=this.parent;if(!e){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*F.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*F.radDeg;return}let t=e.a,i=e.b,s=e.c,a=e.d,d=1/(t*a-i*s),n=this.worldX-e.worldX,r=this.worldY-e.worldY;this.ax=n*a*d-r*i*d,this.ay=r*t*d-n*s*d;let h=d*a,o=d*t,l=d*i,c=d*s,u=h*this.a-l*this.c,m=h*this.b-l*this.d,f=o*this.c-c*this.a,g=o*this.d-c*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+f*f),this.ascaleX>1e-4){let x=u*g-m*f;this.ascaleY=x/this.ascaleX,this.ashearY=Math.atan2(u*m+f*g,x)*F.radDeg,this.arotation=Math.atan2(f,u)*F.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,m)*F.radDeg}worldToLocal(e){let t=1/(this.a*this.d-this.b*this.c),i=e.x-this.worldX,s=e.y-this.worldY;return e.x=i*this.d*t-s*this.b*t,e.y=s*this.a*t-i*this.c*t,e}localToWorld(e){let t=e.x,i=e.y;return e.x=t*this.a+i*this.b+this.worldX,e.y=t*this.c+i*this.d+this.worldY,e}worldToLocalRotation(e){let t=F.sinDeg(e),i=F.cosDeg(e);return Math.atan2(this.a*t-this.c*i,this.d*i-this.b*t)*F.radDeg+this.rotation-this.shearX}localToWorldRotation(e){e-=this.rotation-this.shearX;let t=F.sinDeg(e),i=F.cosDeg(e);return Math.atan2(i*this.c+t*this.d,i*this.a+t*this.b)*F.radDeg}rotateWorld(e){let t=this.a,i=this.b,s=this.c,a=this.d,d=F.cosDeg(e),n=F.sinDeg(e);this.a=d*t-n*s,this.b=d*i-n*a,this.c=n*t+d*s,this.d=n*i+d*a}},Mt=class{constructor(e,t,i){this.name=e,this.order=t,this.skinRequired=i}},rs=class{constructor(e,t="",i=null){this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=e,this.pathPrefix=t,this.downloader=i||new as}start(e){return this.toLoad++,this.pathPrefix+e}success(e,t,i){this.toLoad--,this.loaded++,this.assets[t]=i,e&&e(t,i)}error(e,t,i){this.toLoad--,this.loaded++,this.errors[t]=i,e&&e(t,i)}setRawDataURI(e,t){this.downloader.rawDataUris[this.pathPrefix+e]=t}loadBinary(e,t=null,i=null){e=this.start(e),this.downloader.downloadBinary(e,s=>{this.success(t,e,s)},(s,a)=>{this.error(i,e,`Couldn't load binary ${e}: status ${s}, ${a}`)})}loadText(e,t=null,i=null){e=this.start(e),this.downloader.downloadText(e,s=>{this.success(t,e,s)},(s,a)=>{this.error(i,e,`Couldn't load text ${e}: status ${s}, ${a}`)})}loadJson(e,t=null,i=null){e=this.start(e),this.downloader.downloadJson(e,s=>{this.success(t,e,s)},(s,a)=>{this.error(i,e,`Couldn't load JSON ${e}: status ${s}, ${a}`)})}loadTexture(e,t=null,i=null){if(e=this.start(e),!!!(typeof window!="undefined"&&typeof navigator!="undefined"&&window.document))fetch(e,{mode:"cors"}).then(d=>d.ok?d.blob():(this.error(i,e,`Couldn't load image: ${e}`),null)).then(d=>d?createImageBitmap(d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(d=>{d&&this.success(t,e,this.textureLoader(d))});else{let d=new Image;d.crossOrigin="anonymous",d.onload=()=>{this.success(t,e,this.textureLoader(d))},d.onerror=()=>{this.error(i,e,`Couldn't load image: ${e}`)},this.downloader.rawDataUris[e]&&(e=this.downloader.rawDataUris[e]),d.src=e}}loadTextureAtlas(e,t=null,i=null){let s=e.lastIndexOf("/"),a=s>=0?e.substring(0,s+1):"";e=this.start(e),this.downloader.downloadText(e,d=>{try{let n=new ts(d),r=n.pages.length,h=!1;for(let o of n.pages)this.loadTexture(a+o.name,(l,c)=>{h||(o.setTexture(c),--r==0&&this.success(t,e,n))},(l,c)=>{h||this.error(i,e,`Couldn't load texture atlas ${e} page image: ${l}`),h=!0})}catch(n){this.error(i,e,`Couldn't parse texture atlas ${e}: ${n.message}`)}},(d,n)=>{this.error(i,e,`Couldn't load texture atlas ${e}: status ${d}, ${n}`)})}get(e){return this.assets[this.pathPrefix+e]}require(e){e=this.pathPrefix+e;let t=this.assets[e];if(t)return t;let i=this.errors[e];throw Error("Asset not found: "+e+(i?`
`+i:""))}remove(e){e=this.pathPrefix+e;let t=this.assets[e];return t.dispose&&t.dispose(),delete this.assets[e],t}removeAll(){for(let e in this.assets){let t=this.assets[e];t.dispose&&t.dispose()}this.assets={}}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},as=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(e){if(!e.startsWith("data:"))throw new Error("Not a data URI.");let t=e.indexOf("base64,");return t!=-1?(t+="base64,".length,atob(e.substr(t))):e.substr(e.indexOf(",")+1)}base64ToUint8Array(e){for(var t=window.atob(e),i=t.length,s=new Uint8Array(i),a=0;a<i;a++)s[a]=t.charCodeAt(a);return s}dataUriToUint8Array(e){if(!e.startsWith("data:"))throw new Error("Not a data URI.");let t=e.indexOf("base64,");if(t==-1)throw new Error("Not a binary data URI.");return t+="base64,".length,this.base64ToUint8Array(e.substr(t))}downloadText(e,t,i){if(this.start(e,t,i))return;if(this.rawDataUris[e]){try{let d=this.rawDataUris[e];this.finish(e,200,this.dataUriToString(d))}catch(d){this.finish(e,400,JSON.stringify(d))}return}let s=new XMLHttpRequest;s.overrideMimeType("text/html"),s.open("GET",e,!0);let a=()=>{this.finish(e,s.status,s.responseText)};s.onload=a,s.onerror=a,s.send()}downloadJson(e,t,i){this.downloadText(e,s=>{t(JSON.parse(s))},i)}downloadBinary(e,t,i){if(this.start(e,t,i))return;if(this.rawDataUris[e]){try{let d=this.rawDataUris[e];this.finish(e,200,this.dataUriToUint8Array(d))}catch(d){this.finish(e,400,JSON.stringify(d))}return}let s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer";let a=()=>{this.finish(e,s.status,s.response)};s.onload=()=>{s.status==200||s.status==0?this.finish(e,200,new Uint8Array(s.response)):a()},s.onerror=a,s.send()}start(e,t,i){let s=this.callbacks[e];try{if(s)return!0;this.callbacks[e]=s=[]}finally{s.push(t,i)}}finish(e,t,i){let s=this.callbacks[e];delete this.callbacks[e];let a=t==200||t==0?[i]:[t,i];for(let d=a.length-1,n=s.length;d<n;d+=2)s[d].apply(null,a)}},bi=class{constructor(e,t){if(!t)throw new Error("data cannot be null.");this.time=e,this.data=t}},vi=class{constructor(e){this.name=e}},ns=class{constructor(e,t){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(let i=0;i<e.bones.length;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)}isActive(){return this.active}update(){if(this.mix==0)return;let e=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(e,t,i,s,a,d,n){let r=e.parent,h=r.a,o=r.b,l=r.c,c=r.d,u=-e.ashearX-e.arotation,m=0,f=0;switch(e.data.transformMode){case Te.OnlyTranslation:m=t-e.worldX,f=i-e.worldY;break;case Te.NoRotationOrReflection:let v=Math.abs(h*c-o*l)/(h*h+l*l),p=h/e.skeleton.scaleX,b=l/e.skeleton.scaleY;o=-b*v*e.skeleton.scaleX,c=p*v*e.skeleton.scaleY,u+=Math.atan2(b,p)*F.radDeg;default:let w=t-r.worldX,y=i-r.worldY,T=h*c-o*l;m=(w*c-y*o)/T-e.ax,f=(y*h-w*l)/T-e.ay}u+=Math.atan2(f,m)*F.radDeg,e.ascaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360);let g=e.ascaleX,x=e.ascaleY;if(s||a){switch(e.data.transformMode){case Te.NoScale:case Te.NoScaleOrReflection:m=t-e.worldX,f=i-e.worldY}let v=e.data.length*g,p=Math.sqrt(m*m+f*f);if(s&&p<v||a&&p>v&&v>1e-4){let b=(p/v-1)*n+1;g*=b,d&&(x*=b)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+u*n,g,x,e.ashearX,e.ashearY)}apply2(e,t,i,s,a,d,n,r,h){let o=e.ax,l=e.ay,c=e.ascaleX,u=e.ascaleY,m=c,f=u,g=t.ascaleX,x=0,v=0,p=0;c<0?(c=-c,x=180,p=-1):(x=0,p=1),u<0&&(u=-u,p=-p),g<0?(g=-g,v=180):v=0;let b=t.ax,w=0,y=0,T=0,A=e.a,E=e.b,I=e.c,Y=e.d,P=Math.abs(c-u)<=1e-4;!P||d?(w=0,y=A*b+e.worldX,T=I*b+e.worldY):(w=t.ay,y=A*b+E*w+e.worldX,T=I*b+Y*w+e.worldY);let X=e.parent;A=X.a,E=X.b,I=X.c,Y=X.d;let B=1/(A*Y-E*I),C=y-X.worldX,k=T-X.worldY,D=(C*Y-k*E)*B-o,R=(k*A-C*I)*B-l,L=Math.sqrt(D*D+R*R),se=t.data.length*g,ce,he;if(L<1e-4){this.apply1(e,i,s,!1,d,!1,h),t.updateWorldTransformWith(b,w,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);return}C=i-X.worldX,k=s-X.worldY;let re=(C*Y-k*E)*B-o,ie=(k*A-C*I)*B-l,de=re*re+ie*ie;if(r!=0){r*=c*(g+1)*.5;let ve=Math.sqrt(de),Ee=ve-L-se*c+r;if(Ee>0){let Ie=Math.min(1,Ee/(r*2))-1;Ie=(Ee-r*(1-Ie*Ie))/ve,re-=Ie*re,ie-=Ie*ie,de=re*re+ie*ie}}e:if(P){se*=c;let ve=(de-L*L-se*se)/(2*L*se);ve<-1?(ve=-1,he=Math.PI*a):ve>1?(ve=1,he=0,d&&(A=(Math.sqrt(de)/(L+se)-1)*h+1,m*=A,n&&(f*=A))):he=Math.acos(ve)*a,A=L+se*ve,E=se*Math.sin(he),ce=Math.atan2(ie*A-re*E,re*A+ie*E)}else{A=c*se,E=u*se;let ve=A*A,Ee=E*E,Ie=Math.atan2(ie,re);I=Ee*L*L+ve*de-ve*Ee;let Ze=-2*Ee*L,ht=Ee-ve;if(Y=Ze*Ze-4*ht*I,Y>=0){let dt=Math.sqrt(Y);Ze<0&&(dt=-dt),dt=-(Ze+dt)*.5;let Fs=dt/ht,Ls=I/dt,ct=Math.abs(Fs)<Math.abs(Ls)?Fs:Ls;if(ct*ct<=de){k=Math.sqrt(de-ct*ct)*a,ce=Ie-Math.atan2(k,ct),he=Math.atan2(k/u,(ct-L)/c);break e}}let bt=F.PI,Ot=L-A,Oi=Ot*Ot,Is=0,Ys=0,Nt=L+A,Ni=Nt*Nt,Rs=0;I=-A*L/(ve-Ee),I>=-1&&I<=1&&(I=Math.acos(I),C=A*Math.cos(I)+L,k=E*Math.sin(I),Y=C*C+k*k,Y<Oi&&(bt=I,Oi=Y,Ot=C,Is=k),Y>Ni&&(Ys=I,Ni=Y,Nt=C,Rs=k)),de<=(Oi+Ni)*.5?(ce=Ie-Math.atan2(Is*a,Ot),he=bt*a):(ce=Ie-Math.atan2(Rs*a,Nt),he=Ys*a)}let Se=Math.atan2(w,b)*p,Xe=e.arotation;ce=(ce-Se)*F.radDeg+x-Xe,ce>180?ce-=360:ce<-180&&(ce+=360),e.updateWorldTransformWith(o,l,Xe+ce*h,m,f,0,0),Xe=t.arotation,he=((he+Se)*F.radDeg-t.ashearX)*p+v-Xe,he>180?he-=360:he<-180&&(he+=360),t.updateWorldTransformWith(b,w,Xe+he*h,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}},yi=class extends Mt{constructor(e){super(e,0,!1);this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},Ai=class extends Mt{constructor(e){super(e,0,!1);this.bones=new Array,this.mixRotate=0,this.mixX=0,this.mixY=0}},Ve;(function(e){e[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent"})(Ve||(Ve={}));var ge;(function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent",e[e.Proportional=3]="Proportional"})(ge||(ge={}));var tt;(function(e){e[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"})(tt||(tt={}));var Ue=class{constructor(e,t){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0,s=e.bones.length;i<s;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}isActive(){return this.active}update(){let e=this.target.getAttachment();if(!(e instanceof et))return;let t=this.mixRotate,i=this.mixX,s=this.mixY;if(t==0&&i==0&&s==0)return;let a=this.data,d=a.rotateMode==tt.Tangent,n=a.rotateMode==tt.ChainScale,r=this.bones,h=r.length,o=d?h:h+1,l=V.setArraySize(this.spaces,o),c=n?this.lengths=V.setArraySize(this.lengths,h):null,u=this.spacing;switch(a.spacingMode){case ge.Percent:if(n)for(let w=0,y=o-1;w<y;w++){let T=r[w],A=T.data.length;if(A<Ue.epsilon)c[w]=0;else{let E=A*T.a,I=A*T.c;c[w]=Math.sqrt(E*E+I*I)}}V.arrayFill(l,1,o,u);break;case ge.Proportional:let p=0;for(let w=0,y=o-1;w<y;){let T=r[w],A=T.data.length;if(A<Ue.epsilon)n&&(c[w]=0),l[++w]=u;else{let E=A*T.a,I=A*T.c,Y=Math.sqrt(E*E+I*I);n&&(c[w]=Y),l[++w]=Y,p+=Y}}if(p>0){p=o/p*u;for(let w=1;w<o;w++)l[w]*=p}break;default:let b=a.spacingMode==ge.Length;for(let w=0,y=o-1;w<y;){let T=r[w],A=T.data.length;if(A<Ue.epsilon)n&&(c[w]=0),l[++w]=u;else{let E=A*T.a,I=A*T.c,Y=Math.sqrt(E*E+I*I);n&&(c[w]=Y),l[++w]=(b?A+u:u)*Y/A}}}let m=this.computeWorldPositions(e,o,d),f=m[0],g=m[1],x=a.offsetRotation,v=!1;if(x==0)v=a.rotateMode==tt.Chain;else{v=!1;let p=this.target.bone;x*=p.a*p.d-p.b*p.c>0?F.degRad:-F.degRad}for(let p=0,b=3;p<h;p++,b+=3){let w=r[p];w.worldX+=(f-w.worldX)*i,w.worldY+=(g-w.worldY)*s;let y=m[b],T=m[b+1],A=y-f,E=T-g;if(n){let I=c[p];if(I!=0){let Y=(Math.sqrt(A*A+E*E)/I-1)*t+1;w.a*=Y,w.c*=Y}}if(f=y,g=T,t>0){let I=w.a,Y=w.b,P=w.c,X=w.d,B=0,C=0,k=0;if(d?B=m[b-1]:l[p+1]==0?B=m[b+2]:B=Math.atan2(E,A),B-=Math.atan2(P,I),v){C=Math.cos(B),k=Math.sin(B);let D=w.data.length;f+=(D*(C*I-k*P)-A)*t,g+=(D*(k*I+C*P)-E)*t}else B+=x;B>F.PI?B-=F.PI2:B<-F.PI&&(B+=F.PI2),B*=t,C=Math.cos(B),k=Math.sin(B),w.a=C*I-k*P,w.b=C*Y-k*X,w.c=k*I+C*P,w.d=k*Y+C*X}w.updateAppliedTransform()}}computeWorldPositions(e,t,i){let s=this.target,a=this.position,d=this.spaces,n=V.setArraySize(this.positions,t*3+2),r=null,h=e.closed,o=e.worldVerticesLength,l=o/6,c=Ue.NONE;if(!e.constantSpeed){let R=e.lengths;l-=h?1:2;let L=R[l];this.data.positionMode==Ve.Percent&&(a*=L);let se;switch(this.data.spacingMode){case ge.Percent:se=L;break;case ge.Proportional:se=L/t;break;default:se=1}r=V.setArraySize(this.world,8);for(let ce=0,he=0,re=0;ce<t;ce++,he+=3){let ie=d[ce]*se;a+=ie;let de=a;if(h)de%=L,de<0&&(de+=L),re=0;else if(de<0){c!=Ue.BEFORE&&(c=Ue.BEFORE,e.computeWorldVertices(s,2,4,r,0,2)),this.addBeforePosition(de,r,0,n,he);continue}else if(de>L){c!=Ue.AFTER&&(c=Ue.AFTER,e.computeWorldVertices(s,o-6,4,r,0,2)),this.addAfterPosition(de-L,r,0,n,he);continue}for(;;re++){let Se=R[re];if(!(de>Se)){if(re==0)de/=Se;else{let Xe=R[re-1];de=(de-Xe)/(Se-Xe)}break}}re!=c&&(c=re,h&&re==l?(e.computeWorldVertices(s,o-4,4,r,0,2),e.computeWorldVertices(s,0,4,r,4,2)):e.computeWorldVertices(s,re*6+2,8,r,0,2)),this.addCurvePosition(de,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],n,he,i||ce>0&&ie==0)}return n}h?(o+=2,r=V.setArraySize(this.world,o),e.computeWorldVertices(s,2,o-4,r,0,2),e.computeWorldVertices(s,0,2,r,o-4,2),r[o-2]=r[0],r[o-1]=r[1]):(l--,o-=4,r=V.setArraySize(this.world,o),e.computeWorldVertices(s,2,o,r,0,2));let u=V.setArraySize(this.curves,l),m=0,f=r[0],g=r[1],x=0,v=0,p=0,b=0,w=0,y=0,T=0,A=0,E=0,I=0,Y=0,P=0,X=0,B=0;for(let R=0,L=2;R<l;R++,L+=6)x=r[L],v=r[L+1],p=r[L+2],b=r[L+3],w=r[L+4],y=r[L+5],T=(f-x*2+p)*.1875,A=(g-v*2+b)*.1875,E=((x-p)*3-f+w)*.09375,I=((v-b)*3-g+y)*.09375,Y=T*2+E,P=A*2+I,X=(x-f)*.75+T+E*.16666667,B=(v-g)*.75+A+I*.16666667,m+=Math.sqrt(X*X+B*B),X+=Y,B+=P,Y+=E,P+=I,m+=Math.sqrt(X*X+B*B),X+=Y,B+=P,m+=Math.sqrt(X*X+B*B),X+=Y+E,B+=P+I,m+=Math.sqrt(X*X+B*B),u[R]=m,f=w,g=y;this.data.positionMode==Ve.Percent&&(a*=m);let C;switch(this.data.spacingMode){case ge.Percent:C=m;break;case ge.Proportional:C=m/t;break;default:C=1}let k=this.segments,D=0;for(let R=0,L=0,se=0,ce=0;R<t;R++,L+=3){let he=d[R]*C;a+=he;let re=a;if(h)re%=m,re<0&&(re+=m),se=0;else if(re<0){this.addBeforePosition(re,r,0,n,L);continue}else if(re>m){this.addAfterPosition(re-m,r,o-4,n,L);continue}for(;;se++){let ie=u[se];if(!(re>ie)){if(se==0)re/=ie;else{let de=u[se-1];re=(re-de)/(ie-de)}break}}if(se!=c){c=se;let ie=se*6;for(f=r[ie],g=r[ie+1],x=r[ie+2],v=r[ie+3],p=r[ie+4],b=r[ie+5],w=r[ie+6],y=r[ie+7],T=(f-x*2+p)*.03,A=(g-v*2+b)*.03,E=((x-p)*3-f+w)*.006,I=((v-b)*3-g+y)*.006,Y=T*2+E,P=A*2+I,X=(x-f)*.3+T+E*.16666667,B=(v-g)*.3+A+I*.16666667,D=Math.sqrt(X*X+B*B),k[0]=D,ie=1;ie<8;ie++)X+=Y,B+=P,Y+=E,P+=I,D+=Math.sqrt(X*X+B*B),k[ie]=D;X+=Y,B+=P,D+=Math.sqrt(X*X+B*B),k[8]=D,X+=Y+E,B+=P+I,D+=Math.sqrt(X*X+B*B),k[9]=D,ce=0}for(re*=D;;ce++){let ie=k[ce];if(!(re>ie)){if(ce==0)re/=ie;else{let de=k[ce-1];re=ce+(re-de)/(ie-de)}break}}this.addCurvePosition(re*.1,f,g,x,v,p,b,w,y,n,L,i||R>0&&he==0)}return n}addBeforePosition(e,t,i,s,a){let d=t[i],n=t[i+1],r=t[i+2]-d,h=t[i+3]-n,o=Math.atan2(h,r);s[a]=d+e*Math.cos(o),s[a+1]=n+e*Math.sin(o),s[a+2]=o}addAfterPosition(e,t,i,s,a){let d=t[i+2],n=t[i+3],r=d-t[i],h=n-t[i+1],o=Math.atan2(h,r);s[a]=d+e*Math.cos(o),s[a+1]=n+e*Math.sin(o),s[a+2]=o}addCurvePosition(e,t,i,s,a,d,n,r,h,o,l,c){if(e==0||isNaN(e)){o[l]=t,o[l+1]=i,o[l+2]=Math.atan2(a-i,s-t);return}let u=e*e,m=u*e,f=1-e,g=f*f,x=g*f,v=f*e,p=v*3,b=f*p,w=p*e,y=t*x+s*b+d*w+r*m,T=i*x+a*b+n*w+h*m;o[l]=y,o[l+1]=T,c&&(e<.001?o[l+2]=Math.atan2(a-i,s-t):o[l+2]=Math.atan2(T-(i*g+a*v*2+n*u),y-(t*g+s*v*2+d*u)))}},at=Ue;at.NONE=-1,at.BEFORE=-2,at.AFTER=-3,at.epsilon=1e-5;var ls=class{constructor(e,t){if(this.deform=new Array,!e)throw new Error("data cannot be null.");if(!t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new O,this.darkColor=e.darkColor?new O:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&((!(e instanceof Be)||!(this.attachment instanceof Be)||e.deformAttachment!=this.attachment.deformAttachment)&&(this.deform.length=0),this.attachment=e,this.attachmentTime=this.bone.skeleton.time)}setAttachmentTime(e){this.attachmentTime=this.bone.skeleton.time-e}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},os=class{constructor(e,t){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new Ne,this.active=!1,!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(let i=0;i<e.bones.length;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)}isActive(){return this.active}update(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,a=this.mixScaleY,d=this.mixShearY,n=t!=0||i!=0,r=this.target,h=r.a,o=r.b,l=r.c,c=r.d,u=h*c-o*l>0?F.degRad:-F.degRad,m=this.data.offsetRotation*u,f=this.data.offsetShearY*u,g=this.bones;for(let x=0,v=g.length;x<v;x++){let p=g[x];if(e!=0){let b=p.a,w=p.b,y=p.c,T=p.d,A=Math.atan2(l,h)-Math.atan2(y,b)+m;A>F.PI?A-=F.PI2:A<-F.PI&&(A+=F.PI2),A*=e;let E=Math.cos(A),I=Math.sin(A);p.a=E*b-I*y,p.b=E*w-I*T,p.c=I*b+E*y,p.d=I*w+E*T}if(n){let b=this.temp;r.localToWorld(b.set(this.data.offsetX,this.data.offsetY)),p.worldX+=(b.x-p.worldX)*t,p.worldY+=(b.y-p.worldY)*i}if(s!=0){let b=Math.sqrt(p.a*p.a+p.c*p.c);b!=0&&(b=(b+(Math.sqrt(h*h+l*l)-b+this.data.offsetScaleX)*s)/b),p.a*=b,p.c*=b}if(a!=0){let b=Math.sqrt(p.b*p.b+p.d*p.d);b!=0&&(b=(b+(Math.sqrt(o*o+c*c)-b+this.data.offsetScaleY)*a)/b),p.b*=b,p.d*=b}if(d>0){let b=p.b,w=p.d,y=Math.atan2(w,b),T=Math.atan2(c,o)-Math.atan2(l,h)-(y-Math.atan2(p.c,p.a));T>F.PI?T-=F.PI2:T<-F.PI&&(T+=F.PI2),T=y+(T+f)*d;let A=Math.sqrt(b*b+w*w);p.b=Math.cos(T)*A,p.d=Math.sin(T)*A}p.updateAppliedTransform()}}applyRelativeWorld(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,a=this.mixScaleY,d=this.mixShearY,n=t!=0||i!=0,r=this.target,h=r.a,o=r.b,l=r.c,c=r.d,u=h*c-o*l>0?F.degRad:-F.degRad,m=this.data.offsetRotation*u,f=this.data.offsetShearY*u,g=this.bones;for(let x=0,v=g.length;x<v;x++){let p=g[x];if(e!=0){let b=p.a,w=p.b,y=p.c,T=p.d,A=Math.atan2(l,h)+m;A>F.PI?A-=F.PI2:A<-F.PI&&(A+=F.PI2),A*=e;let E=Math.cos(A),I=Math.sin(A);p.a=E*b-I*y,p.b=E*w-I*T,p.c=I*b+E*y,p.d=I*w+E*T}if(n){let b=this.temp;r.localToWorld(b.set(this.data.offsetX,this.data.offsetY)),p.worldX+=b.x*t,p.worldY+=b.y*i}if(s!=0){let b=(Math.sqrt(h*h+l*l)-1+this.data.offsetScaleX)*s+1;p.a*=b,p.c*=b}if(a!=0){let b=(Math.sqrt(o*o+c*c)-1+this.data.offsetScaleY)*a+1;p.b*=b,p.d*=b}if(d>0){let b=Math.atan2(c,o)-Math.atan2(l,h);b>F.PI?b-=F.PI2:b<-F.PI&&(b+=F.PI2);let w=p.b,y=p.d;b=Math.atan2(y,w)+(b-F.PI/2+f)*d;let T=Math.sqrt(w*w+y*y);p.b=Math.cos(b)*T,p.d=Math.sin(b)*T}p.updateAppliedTransform()}}applyAbsoluteLocal(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,a=this.mixScaleY,d=this.mixShearY,n=this.target,r=this.bones;for(let h=0,o=r.length;h<o;h++){let l=r[h],c=l.arotation;if(e!=0){let v=n.arotation-c+this.data.offsetRotation;v-=(16384-(16384.499999999996-v/360|0))*360,c+=v*e}let u=l.ax,m=l.ay;u+=(n.ax-u+this.data.offsetX)*t,m+=(n.ay-m+this.data.offsetY)*i;let f=l.ascaleX,g=l.ascaleY;s!=0&&f!=0&&(f=(f+(n.ascaleX-f+this.data.offsetScaleX)*s)/f),a!=0&&g!=0&&(g=(g+(n.ascaleY-g+this.data.offsetScaleY)*a)/g);let x=l.ashearY;if(d!=0){let v=n.ashearY-x+this.data.offsetShearY;v-=(16384-(16384.499999999996-v/360|0))*360,x+=v*d}l.updateWorldTransformWith(u,m,c,f,g,l.ashearX,x)}}applyRelativeLocal(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,a=this.mixScaleY,d=this.mixShearY,n=this.target,r=this.bones;for(let h=0,o=r.length;h<o;h++){let l=r[h],c=l.arotation+(n.arotation+this.data.offsetRotation)*e,u=l.ax+(n.ax+this.data.offsetX)*t,m=l.ay+(n.ay+this.data.offsetY)*i,f=l.ascaleX*((n.ascaleX-1+this.data.offsetScaleX)*s+1),g=l.ascaleY*((n.ascaleY-1+this.data.offsetScaleY)*a+1),x=l.ashearY+(n.ashearY+this.data.offsetShearY)*d;l.updateWorldTransformWith(u,m,c,f,g,l.ashearX,x)}}},hs=class{constructor(e){if(this._updateCache=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let t=0;t<e.bones.length;t++){let i=e.bones[t],s;if(!i.parent)s=new wi(i,this,null);else{let a=this.bones[i.parent.index];s=new wi(i,this,a),a.children.push(s)}this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<e.slots.length;t++){let i=e.slots[t],s=this.bones[i.boneData.index],a=new ls(i,s);this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(let t=0;t<e.ikConstraints.length;t++){let i=e.ikConstraints[t];this.ikConstraints.push(new ns(i,this))}this.transformConstraints=new Array;for(let t=0;t<e.transformConstraints.length;t++){let i=e.transformConstraints[t];this.transformConstraints.push(new os(i,this))}this.pathConstraints=new Array;for(let t=0;t<e.pathConstraints.length;t++){let i=e.pathConstraints[t];this.pathConstraints.push(new at(i,this))}this.color=new O(1,1,1,1),this.updateCache()}updateCache(){let e=this._updateCache;e.length=0;let t=this.bones;for(let o=0,l=t.length;o<l;o++){let c=t[o];c.sorted=c.data.skinRequired,c.active=!c.sorted}if(this.skin){let o=this.skin.bones;for(let l=0,c=this.skin.bones.length;l<c;l++){let u=this.bones[o[l].index];do u.sorted=!1,u.active=!0,u=u.parent;while(u)}}let i=this.ikConstraints,s=this.transformConstraints,a=this.pathConstraints,d=i.length,n=s.length,r=a.length,h=d+n+r;e:for(let o=0;o<h;o++){for(let l=0;l<d;l++){let c=i[l];if(c.data.order==o){this.sortIkConstraint(c);continue e}}for(let l=0;l<n;l++){let c=s[l];if(c.data.order==o){this.sortTransformConstraint(c);continue e}}for(let l=0;l<r;l++){let c=a[l];if(c.data.order==o){this.sortPathConstraint(c);continue e}}}for(let o=0,l=t.length;o<l;o++)this.sortBone(t[o])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&V.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target;this.sortBone(t);let i=e.bones,s=i[0];if(this.sortBone(s),i.length==1)this._updateCache.push(e),this.sortReset(s.children);else{let a=i[i.length-1];this.sortBone(a),this._updateCache.push(e),this.sortReset(s.children),a.sorted=!0}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&V.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target,i=t.data.index,s=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let r=0,h=this.data.skins.length;r<h;r++)this.sortPathConstraintAttachment(this.data.skins[r],i,s);let a=t.getAttachment();a instanceof et&&this.sortPathConstraintAttachmentWith(a,s);let d=e.bones,n=d.length;for(let r=0;r<n;r++)this.sortBone(d[r]);this._updateCache.push(e);for(let r=0;r<n;r++)this.sortReset(d[r].children);for(let r=0;r<n;r++)d[r].sorted=!0}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&V.contains(this.skin.constraints,e.data,!0)),!e.active)return;this.sortBone(e.target);let t=e.bones,i=t.length;if(e.data.local)for(let s=0;s<i;s++){let a=t[s];this.sortBone(a.parent),this.sortBone(a)}else for(let s=0;s<i;s++)this.sortBone(t[s]);this._updateCache.push(e);for(let s=0;s<i;s++)this.sortReset(t[s].children);for(let s=0;s<i;s++)t[s].sorted=!0}sortPathConstraintAttachment(e,t,i){let s=e.attachments[t];if(!!s)for(let a in s)this.sortPathConstraintAttachmentWith(s[a],i)}sortPathConstraintAttachmentWith(e,t){if(!(e instanceof et))return;let i=e.bones;if(!i)this.sortBone(t);else{let s=this.bones;for(let a=0,d=i.length;a<d;){let n=i[a++];for(n+=a;a<n;)this.sortBone(s[i[a++]])}}}sortBone(e){if(e.sorted)return;let t=e.parent;t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}sortReset(e){for(let t=0,i=e.length;t<i;t++){let s=e[t];!s.active||(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){let e=this.bones;for(let i=0,s=e.length;i<s;i++){let a=e[i];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY}let t=this._updateCache;for(let i=0,s=t.length;i<s;i++)t[i].update()}updateWorldTransformWith(e){let t=this.getRootBone(),i=e.a,s=e.b,a=e.c,d=e.d;t.worldX=i*this.x+s*this.y+e.worldX,t.worldY=a*this.x+d*this.y+e.worldY;let n=t.rotation+90+t.shearY,r=F.cosDeg(t.rotation+t.shearX)*t.scaleX,h=F.cosDeg(n)*t.scaleY,o=F.sinDeg(t.rotation+t.shearX)*t.scaleX,l=F.sinDeg(n)*t.scaleY;t.a=(i*r+s*o)*this.scaleX,t.b=(i*h+s*l)*this.scaleX,t.c=(a*r+d*o)*this.scaleY,t.d=(a*h+d*l)*this.scaleY;let c=this._updateCache;for(let u=0,m=c.length;u<m;u++){let f=c[u];f!=t&&f.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let e=this.bones;for(let a=0,d=e.length;a<d;a++)e[a].setToSetupPose();let t=this.ikConstraints;for(let a=0,d=t.length;a<d;a++){let n=t[a];n.mix=n.data.mix,n.softness=n.data.softness,n.bendDirection=n.data.bendDirection,n.compress=n.data.compress,n.stretch=n.data.stretch}let i=this.transformConstraints;for(let a=0,d=i.length;a<d;a++){let n=i[a],r=n.data;n.mixRotate=r.mixRotate,n.mixX=r.mixX,n.mixY=r.mixY,n.mixScaleX=r.mixScaleX,n.mixScaleY=r.mixScaleY,n.mixShearY=r.mixShearY}let s=this.pathConstraints;for(let a=0,d=s.length;a<d;a++){let n=s[a],r=n.data;n.position=r.position,n.spacing=r.spacing,n.mixRotate=r.mixRotate,n.mixX=r.mixX,n.mixY=r.mixY}}setSlotsToSetupPose(){let e=this.slots;V.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,i=e.length;t<i;t++)e[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.data.name==e)return a}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.data.name==e)return a}return null}setSkinByName(e){let t=this.data.findSkin(e);if(!t)throw new Error("Skin not found: "+e);this.setSkin(t)}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else{let t=this.slots;for(let i=0,s=t.length;i<s;i++){let a=t[i],d=a.data.attachmentName;if(d){let n=e.getAttachment(i,d);n&&a.setAttachment(n)}}}this.skin=e,this.updateCache()}}getAttachmentByName(e,t){return this.getAttachment(this.data.findSlot(e).index,t)}getAttachment(e,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(e,t);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null}setAttachment(e,t){if(!e)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,a=i.length;s<a;s++){let d=i[s];if(d.data.name==e){let n=null;if(t&&(n=this.getAttachment(s,t),!n))throw new Error("Attachment not found: "+t+", for slot: "+e);d.setAttachment(n);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");let t=this.ikConstraints;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.data.name==e)return a}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");let t=this.transformConstraints;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.data.name==e)return a}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");let t=this.pathConstraints;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.data.name==e)return a}return null}getBounds(e,t,i=new Array(2)){if(!e)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");let s=this.drawOrder,a=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let h=0,o=s.length;h<o;h++){let l=s[h];if(!l.bone.active)continue;let c=0,u=null,m=l.getAttachment();if(m instanceof ae)c=8,u=V.setArraySize(i,c,0),m.computeWorldVertices(l.bone,u,0,2);else if(m instanceof je){let f=m;c=f.worldVerticesLength,u=V.setArraySize(i,c,0),f.computeWorldVertices(l,0,c,u,0,2)}if(u)for(let f=0,g=u.length;f<g;f+=2){let x=u[f],v=u[f+1];a=Math.min(a,x),d=Math.min(d,v),n=Math.max(n,x),r=Math.max(r,v)}}e.set(a,d),t.set(n-a,r-d)}update(e){this.time+=e}},Si=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findSkin(e){if(!e)throw new Error("skinName cannot be null.");let t=this.skins;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findEvent(e){if(!e)throw new Error("eventDataName cannot be null.");let t=this.events;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findAnimation(e){if(!e)throw new Error("animationName cannot be null.");let t=this.animations;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");let t=this.ikConstraints;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");let t=this.transformConstraints;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");let t=this.pathConstraints;for(let i=0,s=t.length;i<s;i++){let a=t[i];if(a.name==e)return a}return null}},Ci=class{constructor(e,t,i){this.slotIndex=e,this.name=t,this.attachment=i}},Et=class{constructor(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}setAttachment(e,t,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;e>=s.length&&(s.length=e+1),s[e]||(s[e]={}),s[e][t]=i}addSkin(e){for(let s=0;s<e.bones.length;s++){let a=e.bones[s],d=!1;for(let n=0;n<this.bones.length;n++)if(this.bones[n]==a){d=!0;break}d||this.bones.push(a)}for(let s=0;s<e.constraints.length;s++){let a=e.constraints[s],d=!1;for(let n=0;n<this.constraints.length;n++)if(this.constraints[n]==a){d=!0;break}d||this.constraints.push(a)}let t=e.getAttachments();for(let s=0;s<t.length;s++){var i=t[s];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(e){for(let s=0;s<e.bones.length;s++){let a=e.bones[s],d=!1;for(let n=0;n<this.bones.length;n++)if(this.bones[n]==a){d=!0;break}d||this.bones.push(a)}for(let s=0;s<e.constraints.length;s++){let a=e.constraints[s],d=!1;for(let n=0;n<this.constraints.length;n++)if(this.constraints[n]==a){d=!0;break}d||this.constraints.push(a)}let t=e.getAttachments();for(let s=0;s<t.length;s++){var i=t[s];!i.attachment||(i.attachment instanceof je?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(e,t){let i=this.attachments[e];return i?i[t]:null}removeAttachment(e,t){let i=this.attachments[e];i&&(i[t]=null)}getAttachments(){let e=new Array;for(var t=0;t<this.attachments.length;t++){let i=this.attachments[t];if(i)for(let s in i){let a=i[s];a&&e.push(new Ci(t,s,a))}}return e}getAttachmentsForSlot(e,t){let i=this.attachments[e];if(i)for(let s in i){let a=i[s];a&&t.push(new Ci(e,s,a))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,t){let i=0;for(let s=0;s<e.slots.length;s++){let a=e.slots[s],d=a.getAttachment();if(d&&i<t.attachments.length){let n=t.attachments[i];for(let r in n){let h=n[r];if(d==h){let o=this.getAttachment(i,r);o&&a.setAttachment(o);break}}}i++}}},Ti=class{constructor(e,t,i){if(this.color=new O(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=i}},ye;(function(e){e[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"})(ye||(ye={}));var ki=class extends Mt{constructor(e){super(e,0,!1);this.bones=new Array,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},ds=class{constructor(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,i=new Si;i.name="";let s=new cs(e),a=s.readInt32(),d=s.readInt32();i.hash=d==0&&a==0?null:d.toString(16)+a.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat();let n=s.readBoolean();n&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let r=0;r=s.readInt(!0);for(let o=0;o<r;o++)s.strings.push(s.readString());r=s.readInt(!0);for(let o=0;o<r;o++){let l=s.readString(),c=o==0?null:i.bones[s.readInt(!0)],u=new xi(o,l,c);u.rotation=s.readFloat(),u.x=s.readFloat()*t,u.y=s.readFloat()*t,u.scaleX=s.readFloat(),u.scaleY=s.readFloat(),u.shearX=s.readFloat(),u.shearY=s.readFloat(),u.length=s.readFloat()*t,u.transformMode=s.readInt(!0),u.skinRequired=s.readBoolean(),n&&O.rgba8888ToColor(u.color,s.readInt32()),i.bones.push(u)}r=s.readInt(!0);for(let o=0;o<r;o++){let l=s.readString(),c=i.bones[s.readInt(!0)],u=new Ti(o,l,c);O.rgba8888ToColor(u.color,s.readInt32());let m=s.readInt32();m!=-1&&O.rgb888ToColor(u.darkColor=new O,m),u.attachmentName=s.readStringRef(),u.blendMode=s.readInt(!0),i.slots.push(u)}r=s.readInt(!0);for(let o=0,l;o<r;o++){let c=new yi(s.readString());c.order=s.readInt(!0),c.skinRequired=s.readBoolean(),l=s.readInt(!0);for(let u=0;u<l;u++)c.bones.push(i.bones[s.readInt(!0)]);c.target=i.bones[s.readInt(!0)],c.mix=s.readFloat(),c.softness=s.readFloat()*t,c.bendDirection=s.readByte(),c.compress=s.readBoolean(),c.stretch=s.readBoolean(),c.uniform=s.readBoolean(),i.ikConstraints.push(c)}r=s.readInt(!0);for(let o=0,l;o<r;o++){let c=new ki(s.readString());c.order=s.readInt(!0),c.skinRequired=s.readBoolean(),l=s.readInt(!0);for(let u=0;u<l;u++)c.bones.push(i.bones[s.readInt(!0)]);c.target=i.bones[s.readInt(!0)],c.local=s.readBoolean(),c.relative=s.readBoolean(),c.offsetRotation=s.readFloat(),c.offsetX=s.readFloat()*t,c.offsetY=s.readFloat()*t,c.offsetScaleX=s.readFloat(),c.offsetScaleY=s.readFloat(),c.offsetShearY=s.readFloat(),c.mixRotate=s.readFloat(),c.mixX=s.readFloat(),c.mixY=s.readFloat(),c.mixScaleX=s.readFloat(),c.mixScaleY=s.readFloat(),c.mixShearY=s.readFloat(),i.transformConstraints.push(c)}r=s.readInt(!0);for(let o=0,l;o<r;o++){let c=new Ai(s.readString());c.order=s.readInt(!0),c.skinRequired=s.readBoolean(),l=s.readInt(!0);for(let u=0;u<l;u++)c.bones.push(i.bones[s.readInt(!0)]);c.target=i.slots[s.readInt(!0)],c.positionMode=s.readInt(!0),c.spacingMode=s.readInt(!0),c.rotateMode=s.readInt(!0),c.offsetRotation=s.readFloat(),c.position=s.readFloat(),c.positionMode==Ve.Fixed&&(c.position*=t),c.spacing=s.readFloat(),(c.spacingMode==ge.Length||c.spacingMode==ge.Fixed)&&(c.spacing*=t),c.mixRotate=s.readFloat(),c.mixX=s.readFloat(),c.mixY=s.readFloat(),i.pathConstraints.push(c)}let h=this.readSkin(s,i,!0,n);h&&(i.defaultSkin=h,i.skins.push(h));{let o=i.skins.length;for(V.setArraySize(i.skins,r=o+s.readInt(!0));o<r;o++)i.skins[o]=this.readSkin(s,i,!1,n)}r=this.linkedMeshes.length;for(let o=0;o<r;o++){let l=this.linkedMeshes[o],u=(l.skin?i.findSkin(l.skin):i.defaultSkin).getAttachment(l.slotIndex,l.parent);l.mesh.deformAttachment=l.inheritDeform?u:l.mesh,l.mesh.setParentMesh(u),l.mesh.updateUVs()}this.linkedMeshes.length=0,r=s.readInt(!0);for(let o=0;o<r;o++){let l=new vi(s.readStringRef());l.intValue=s.readInt(!1),l.floatValue=s.readFloat(),l.stringValue=s.readString(),l.audioPath=s.readString(),l.audioPath&&(l.volume=s.readFloat(),l.balance=s.readFloat()),i.events.push(l)}r=s.readInt(!0);for(let o=0;o<r;o++)i.animations.push(this.readAnimation(s,s.readString(),i));return i}readSkin(e,t,i,s){let a=null,d=0;if(i){if(d=e.readInt(!0),d==0)return null;a=new Et("default")}else{a=new Et(e.readStringRef()),a.bones.length=e.readInt(!0);for(let n=0,r=a.bones.length;n<r;n++)a.bones[n]=t.bones[e.readInt(!0)];for(let n=0,r=e.readInt(!0);n<r;n++)a.constraints.push(t.ikConstraints[e.readInt(!0)]);for(let n=0,r=e.readInt(!0);n<r;n++)a.constraints.push(t.transformConstraints[e.readInt(!0)]);for(let n=0,r=e.readInt(!0);n<r;n++)a.constraints.push(t.pathConstraints[e.readInt(!0)]);d=e.readInt(!0)}for(let n=0;n<d;n++){let r=e.readInt(!0);for(let h=0,o=e.readInt(!0);h<o;h++){let l=e.readStringRef(),c=this.readAttachment(e,t,a,r,l,s);c&&a.setAttachment(r,l,c)}}return a}readAttachment(e,t,i,s,a,d){let n=this.scale,r=e.readStringRef();switch(r||(r=a),e.readByte()){case ze.Region:{let h=e.readStringRef(),o=e.readFloat(),l=e.readFloat(),c=e.readFloat(),u=e.readFloat(),m=e.readFloat(),f=e.readFloat(),g=e.readFloat(),x=e.readInt32();h||(h=r);let v=this.attachmentLoader.newRegionAttachment(i,r,h);return v?(v.path=h,v.x=l*n,v.y=c*n,v.scaleX=u,v.scaleY=m,v.rotation=o,v.width=f*n,v.height=g*n,O.rgba8888ToColor(v.color,x),v.updateOffset(),v):null}case ze.BoundingBox:{let h=e.readInt(!0),o=this.readVertices(e,h),l=d?e.readInt32():0,c=this.attachmentLoader.newBoundingBoxAttachment(i,r);return c?(c.worldVerticesLength=h<<1,c.vertices=o.vertices,c.bones=o.bones,d&&O.rgba8888ToColor(c.color,l),c):null}case ze.Mesh:{let h=e.readStringRef(),o=e.readInt32(),l=e.readInt(!0),c=this.readFloatArray(e,l<<1,1),u=this.readShortArray(e),m=this.readVertices(e,l),f=e.readInt(!0),g=null,x=0,v=0;d&&(g=this.readShortArray(e),x=e.readFloat(),v=e.readFloat()),h||(h=r);let p=this.attachmentLoader.newMeshAttachment(i,r,h);return p?(p.path=h,O.rgba8888ToColor(p.color,o),p.bones=m.bones,p.vertices=m.vertices,p.worldVerticesLength=l<<1,p.triangles=u,p.regionUVs=c,p.updateUVs(),p.hullLength=f<<1,d&&(p.edges=g,p.width=x*n,p.height=v*n),p):null}case ze.LinkedMesh:{let h=e.readStringRef(),o=e.readInt32(),l=e.readStringRef(),c=e.readStringRef(),u=e.readBoolean(),m=0,f=0;d&&(m=e.readFloat(),f=e.readFloat()),h||(h=r);let g=this.attachmentLoader.newMeshAttachment(i,r,h);return g?(g.path=h,O.rgba8888ToColor(g.color,o),d&&(g.width=m*n,g.height=f*n),this.linkedMeshes.push(new zs(g,l,s,c,u)),g):null}case ze.Path:{let h=e.readBoolean(),o=e.readBoolean(),l=e.readInt(!0),c=this.readVertices(e,l),u=V.newArray(l/3,0);for(let g=0,x=u.length;g<x;g++)u[g]=e.readFloat()*n;let m=d?e.readInt32():0,f=this.attachmentLoader.newPathAttachment(i,r);return f?(f.closed=h,f.constantSpeed=o,f.worldVerticesLength=l<<1,f.vertices=c.vertices,f.bones=c.bones,f.lengths=u,d&&O.rgba8888ToColor(f.color,m),f):null}case ze.Point:{let h=e.readFloat(),o=e.readFloat(),l=e.readFloat(),c=d?e.readInt32():0,u=this.attachmentLoader.newPointAttachment(i,r);return u?(u.x=o*n,u.y=l*n,u.rotation=h,d&&O.rgba8888ToColor(u.color,c),u):null}case ze.Clipping:{let h=e.readInt(!0),o=e.readInt(!0),l=this.readVertices(e,o),c=d?e.readInt32():0,u=this.attachmentLoader.newClippingAttachment(i,r);return u?(u.endSlot=t.slots[h],u.worldVerticesLength=o<<1,u.vertices=l.vertices,u.bones=l.bones,d&&O.rgba8888ToColor(u.color,c),u):null}}return null}readVertices(e,t){let i=this.scale,s=t<<1,a=new Ws;if(!e.readBoolean())return a.vertices=this.readFloatArray(e,s,i),a;let d=new Array,n=new Array;for(let r=0;r<t;r++){let h=e.readInt(!0);n.push(h);for(let o=0;o<h;o++)n.push(e.readInt(!0)),d.push(e.readFloat()*i),d.push(e.readFloat()*i),d.push(e.readFloat())}return a.vertices=V.toFloatArray(d),a.bones=n,a}readFloatArray(e,t,i){let s=new Array(t);if(i==1)for(let a=0;a<t;a++)s[a]=e.readFloat();else for(let a=0;a<t;a++)s[a]=e.readFloat()*i;return s}readShortArray(e){let t=e.readInt(!0),i=new Array(t);for(let s=0;s<t;s++)i[s]=e.readShort();return i}readAnimation(e,t,i){e.readInt(!0);let s=new Array,a=this.scale,d=new O,n=new O;for(let l=0,c=e.readInt(!0);l<c;l++){let u=e.readInt(!0);for(let m=0,f=e.readInt(!0);m<f;m++){let g=e.readByte(),x=e.readInt(!0),v=x-1;switch(g){case er:{let p=new Ke(x,u);for(let b=0;b<x;b++)p.setFrame(b,e.readFloat(),e.readStringRef());s.push(p);break}case tr:{let p=e.readInt(!0),b=new Qt(x,p,u),w=e.readFloat(),y=e.readUnsignedByte()/255,T=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,E=e.readUnsignedByte()/255;for(let I=0,Y=0;b.setFrame(I,w,y,T,A,E),I!=v;I++){let P=e.readFloat(),X=e.readUnsignedByte()/255,B=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255;switch(e.readByte()){case Fe:b.setStepped(I);break;case Le:ne(e,b,Y++,I,0,w,P,y,X,1),ne(e,b,Y++,I,1,w,P,T,B,1),ne(e,b,Y++,I,2,w,P,A,C,1),ne(e,b,Y++,I,3,w,P,E,k,1)}w=P,y=X,T=B,A=C,E=k}s.push(b);break}case ir:{let p=e.readInt(!0),b=new $t(x,p,u),w=e.readFloat(),y=e.readUnsignedByte()/255,T=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255;for(let E=0,I=0;b.setFrame(E,w,y,T,A),E!=v;E++){let Y=e.readFloat(),P=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255,B=e.readUnsignedByte()/255;switch(e.readByte()){case Fe:b.setStepped(E);break;case Le:ne(e,b,I++,E,0,w,Y,y,P,1),ne(e,b,I++,E,1,w,Y,T,X,1),ne(e,b,I++,E,2,w,Y,A,B,1)}w=Y,y=P,T=X,A=B}s.push(b);break}case sr:{let p=e.readInt(!0),b=new ti(x,p,u),w=e.readFloat(),y=e.readUnsignedByte()/255,T=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,E=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,P=e.readUnsignedByte()/255;for(let X=0,B=0;b.setFrame(X,w,y,T,A,E,I,Y,P),X!=v;X++){let C=e.readFloat(),k=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,R=e.readUnsignedByte()/255,L=e.readUnsignedByte()/255,se=e.readUnsignedByte()/255,ce=e.readUnsignedByte()/255,he=e.readUnsignedByte()/255;switch(e.readByte()){case Fe:b.setStepped(X);break;case Le:ne(e,b,B++,X,0,w,C,y,k,1),ne(e,b,B++,X,1,w,C,T,D,1),ne(e,b,B++,X,2,w,C,A,R,1),ne(e,b,B++,X,3,w,C,E,L,1),ne(e,b,B++,X,4,w,C,I,se,1),ne(e,b,B++,X,5,w,C,Y,ce,1),ne(e,b,B++,X,6,w,C,P,he,1)}w=C,y=k,T=D,A=R,E=L,I=se,Y=ce,P=he}s.push(b);break}case rr:{let p=e.readInt(!0),b=new ii(x,p,u),w=e.readFloat(),y=e.readUnsignedByte()/255,T=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,E=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255;for(let P=0,X=0;b.setFrame(P,w,y,T,A,E,I,Y),P!=v;P++){let B=e.readFloat(),C=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,R=e.readUnsignedByte()/255,L=e.readUnsignedByte()/255,se=e.readUnsignedByte()/255;switch(e.readByte()){case Fe:b.setStepped(P);break;case Le:ne(e,b,X++,P,0,w,B,y,C,1),ne(e,b,X++,P,1,w,B,T,k,1),ne(e,b,X++,P,2,w,B,A,D,1),ne(e,b,X++,P,3,w,B,E,R,1),ne(e,b,X++,P,4,w,B,I,L,1),ne(e,b,X++,P,5,w,B,Y,se,1)}w=B,y=C,T=k,A=D,E=R,I=L,Y=se}s.push(b);break}case ar:{let p=new ei(x,e.readInt(!0),u),b=e.readFloat(),w=e.readUnsignedByte()/255;for(let y=0,T=0;p.setFrame(y,b,w),y!=v;y++){let A=e.readFloat(),E=e.readUnsignedByte()/255;switch(e.readByte()){case Fe:p.setStepped(y);break;case Le:ne(e,p,T++,y,0,b,A,w,E,1)}b=A,w=E}s.push(p);break}}}}for(let l=0,c=e.readInt(!0);l<c;l++){let u=e.readInt(!0);for(let m=0,f=e.readInt(!0);m<f;m++){let g=e.readByte(),x=e.readInt(!0),v=e.readInt(!0);switch(g){case _s:s.push(We(e,new ft(x,v,u),1));break;case qs:s.push(Mi(e,new Wt(x,v,u),a));break;case js:s.push(We(e,new _t(x,v,u),a));break;case Hs:s.push(We(e,new qt(x,v,u),a));break;case Gs:s.push(Mi(e,new jt(x,v,u),1));break;case Zs:s.push(We(e,new Ht(x,v,u),1));break;case Js:s.push(We(e,new Gt(x,v,u),1));break;case Ks:s.push(Mi(e,new Zt(x,v,u),1));break;case Qs:s.push(We(e,new Jt(x,v,u),1));break;case $s:s.push(We(e,new Kt(x,v,u),1))}}}for(let l=0,c=e.readInt(!0);l<c;l++){let u=e.readInt(!0),m=e.readInt(!0),f=m-1,g=new ri(m,e.readInt(!0),u),x=e.readFloat(),v=e.readFloat(),p=e.readFloat()*a;for(let b=0,w=0;g.setFrame(b,x,v,p,e.readByte(),e.readBoolean(),e.readBoolean()),b!=f;b++){let y=e.readFloat(),T=e.readFloat(),A=e.readFloat()*a;switch(e.readByte()){case Fe:g.setStepped(b);break;case Le:ne(e,g,w++,b,0,x,y,v,T,1),ne(e,g,w++,b,1,x,y,p,A,a)}x=y,v=T,p=A}s.push(g)}for(let l=0,c=e.readInt(!0);l<c;l++){let u=e.readInt(!0),m=e.readInt(!0),f=m-1,g=new ai(m,e.readInt(!0),u),x=e.readFloat(),v=e.readFloat(),p=e.readFloat(),b=e.readFloat(),w=e.readFloat(),y=e.readFloat(),T=e.readFloat();for(let A=0,E=0;g.setFrame(A,x,v,p,b,w,y,T),A!=f;A++){let I=e.readFloat(),Y=e.readFloat(),P=e.readFloat(),X=e.readFloat(),B=e.readFloat(),C=e.readFloat(),k=e.readFloat();switch(e.readByte()){case Fe:g.setStepped(A);break;case Le:ne(e,g,E++,A,0,x,I,v,Y,1),ne(e,g,E++,A,1,x,I,p,P,1),ne(e,g,E++,A,2,x,I,b,X,1),ne(e,g,E++,A,3,x,I,w,B,1),ne(e,g,E++,A,4,x,I,y,C,1),ne(e,g,E++,A,5,x,I,T,k,1)}x=I,v=Y,p=P,b=X,w=B,y=C,T=k}s.push(g)}for(let l=0,c=e.readInt(!0);l<c;l++){let u=e.readInt(!0),m=i.pathConstraints[u];for(let f=0,g=e.readInt(!0);f<g;f++)switch(e.readByte()){case nr:s.push(We(e,new ni(e.readInt(!0),e.readInt(!0),u),m.positionMode==Ve.Fixed?a:1));break;case lr:s.push(We(e,new li(e.readInt(!0),e.readInt(!0),u),m.spacingMode==ge.Length||m.spacingMode==ge.Fixed?a:1));break;case or:let x=new oi(e.readInt(!0),e.readInt(!0),u),v=e.readFloat(),p=e.readFloat(),b=e.readFloat(),w=e.readFloat();for(let y=0,T=0,A=x.getFrameCount()-1;x.setFrame(y,v,p,b,w),y!=A;y++){let E=e.readFloat(),I=e.readFloat(),Y=e.readFloat(),P=e.readFloat();switch(e.readByte()){case Fe:x.setStepped(y);break;case Le:ne(e,x,T++,y,0,v,E,p,I,1),ne(e,x,T++,y,1,v,E,b,Y,1),ne(e,x,T++,y,2,v,E,w,P,1)}v=E,p=I,b=Y,w=P}s.push(x)}}for(let l=0,c=e.readInt(!0);l<c;l++){let u=i.skins[e.readInt(!0)];for(let m=0,f=e.readInt(!0);m<f;m++){let g=e.readInt(!0);for(let x=0,v=e.readInt(!0);x<v;x++){let p=e.readStringRef(),b=u.getAttachment(g,p),w=b.bones,y=b.vertices,T=w?y.length/3*2:y.length,A=e.readInt(!0),E=A-1,I=e.readInt(!0),Y=new si(A,I,g,b),P=e.readFloat();for(let X=0,B=0;;X++){let C,k=e.readInt(!0);if(k==0)C=w?V.newFloatArray(T):y;else{C=V.newFloatArray(T);let R=e.readInt(!0);if(k+=R,a==1)for(let L=R;L<k;L++)C[L]=e.readFloat();else for(let L=R;L<k;L++)C[L]=e.readFloat()*a;if(!w)for(let L=0,se=C.length;L<se;L++)C[L]+=y[L]}if(Y.setFrame(X,P,C),X==E)break;let D=e.readFloat();switch(e.readByte()){case Fe:Y.setStepped(X);break;case Le:ne(e,Y,B++,X,0,P,D,0,1,1)}P=D}s.push(Y)}}}let r=e.readInt(!0);if(r>0){let l=new Qe(r),c=i.slots.length;for(let u=0;u<r;u++){let m=e.readFloat(),f=e.readInt(!0),g=V.newArray(c,0);for(let b=c-1;b>=0;b--)g[b]=-1;let x=V.newArray(c-f,0),v=0,p=0;for(let b=0;b<f;b++){let w=e.readInt(!0);for(;v!=w;)x[p++]=v++;g[v+e.readInt(!0)]=v++}for(;v<c;)x[p++]=v++;for(let b=c-1;b>=0;b--)g[b]==-1&&(g[b]=x[--p]);l.setFrame(u,m,g)}s.push(l)}let h=e.readInt(!0);if(h>0){let l=new mt(h);for(let c=0;c<h;c++){let u=e.readFloat(),m=i.events[e.readInt(!0)],f=new bi(u,m);f.intValue=e.readInt(!1),f.floatValue=e.readFloat(),f.stringValue=e.readBoolean()?e.readString():m.stringValue,f.data.audioPath&&(f.volume=e.readFloat(),f.balance=e.readFloat()),l.setFrame(c,f)}s.push(l)}let o=0;for(let l=0,c=s.length;l<c;l++)o=Math.max(o,s[l].getDuration());return new yt(t,s,o)}},cs=class{constructor(e,t=new Array,i=0,s=new DataView(e.buffer)){this.strings=t,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){let e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),i=t&127;return(t&128)!=0&&(t=this.readByte(),i|=(t&127)<<7,(t&128)!=0&&(t=this.readByte(),i|=(t&127)<<14,(t&128)!=0&&(t=this.readByte(),i|=(t&127)<<21,(t&128)!=0&&(t=this.readByte(),i|=(t&127)<<28)))),e?i:i>>>1^-(i&1)}readStringRef(){let e=this.readInt(!0);return e==0?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="",i=0;for(let s=0;s<e;){let a=this.readByte();switch(a>>4){case 12:case 13:t+=String.fromCharCode((a&31)<<6|this.readByte()&63),s+=2;break;case 14:t+=String.fromCharCode((a&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),s+=3;break;default:t+=String.fromCharCode(a),s++}}return t}readFloat(){let e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return this.readByte()!=0}},zs=class{constructor(e,t,i,s,a){this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=s,this.inheritDeform=a}},Ws=class{constructor(e=null,t=null){this.bones=e,this.vertices=t}},ze;(function(e){e[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"})(ze||(ze={}));function We(e,t,i){let s=e.readFloat(),a=e.readFloat()*i;for(let d=0,n=0,r=t.getFrameCount()-1;t.setFrame(d,s,a),d!=r;d++){let h=e.readFloat(),o=e.readFloat()*i;switch(e.readByte()){case Fe:t.setStepped(d);break;case Le:ne(e,t,n++,d,0,s,h,a,o,i)}s=h,a=o}return t}function Mi(e,t,i){let s=e.readFloat(),a=e.readFloat()*i,d=e.readFloat()*i;for(let n=0,r=0,h=t.getFrameCount()-1;t.setFrame(n,s,a,d),n!=h;n++){let o=e.readFloat(),l=e.readFloat()*i,c=e.readFloat()*i;switch(e.readByte()){case Fe:t.setStepped(n);break;case Le:ne(e,t,r++,n,0,s,o,a,l,i),ne(e,t,r++,n,1,s,o,d,c,i)}s=o,a=l,d=c}return t}function ne(e,t,i,s,a,d,n,r,h,o){t.setBezier(i,s,a,d,r,e.readFloat(),e.readFloat()*o,e.readFloat(),e.readFloat()*o,n,h)}var _s=0,qs=1,js=2,Hs=3,Gs=4,Zs=5,Js=6,Ks=7,Qs=8,$s=9,er=0,tr=1,ir=2,sr=3,rr=4,ar=5,nr=0,lr=1,or=2,Fe=1,Le=2,us=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new ut(()=>V.newFloatArray(16))}update(e,t){if(!e)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,a=this.polygonPool,d=e.slots,n=d.length;i.length=0,a.freeAll(s),s.length=0;for(let r=0;r<n;r++){let h=d[r];if(!h.bone.active)continue;let o=h.getAttachment();if(o instanceof kt){let l=o;i.push(l);let c=a.obtain();c.length!=l.worldVerticesLength&&(c=V.newFloatArray(l.worldVerticesLength)),s.push(c),l.computeWorldVertices(h,0,l.worldVerticesLength,c,0,2)}}t?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=this.polygons;for(let d=0,n=a.length;d<n;d++){let r=a[d],h=r;for(let o=0,l=r.length;o<l;o+=2){let c=h[o],u=h[o+1];e=Math.min(e,c),t=Math.min(t,u),i=Math.max(i,c),s=Math.max(s,u)}}this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}aabbContainsPoint(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY}aabbIntersectsSegment(e,t,i,s){let a=this.minX,d=this.minY,n=this.maxX,r=this.maxY;if(e<=a&&i<=a||t<=d&&s<=d||e>=n&&i>=n||t>=r&&s>=r)return!1;let h=(s-t)/(i-e),o=h*(a-e)+t;if(o>d&&o<r||(o=h*(n-e)+t,o>d&&o<r))return!0;let l=(d-t)/h+e;return!!(l>a&&l<n||(l=(r-t)/h+e,l>a&&l<n))}aabbIntersectsSkeleton(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY}containsPoint(e,t){let i=this.polygons;for(let s=0,a=i.length;s<a;s++)if(this.containsPointPolygon(i[s],e,t))return this.boundingBoxes[s];return null}containsPointPolygon(e,t,i){let s=e,a=e.length,d=a-2,n=!1;for(let r=0;r<a;r+=2){let h=s[r+1],o=s[d+1];if(h<i&&o>=i||o<i&&h>=i){let l=s[r];l+(i-h)/(o-h)*(s[d]-l)<t&&(n=!n)}d=r}return n}intersectsSegment(e,t,i,s){let a=this.polygons;for(let d=0,n=a.length;d<n;d++)if(this.intersectsSegmentPolygon(a[d],e,t,i,s))return this.boundingBoxes[d];return null}intersectsSegmentPolygon(e,t,i,s,a){let d=e,n=e.length,r=t-s,h=i-a,o=t*a-i*s,l=d[n-2],c=d[n-1];for(let u=0;u<n;u+=2){let m=d[u],f=d[u+1],g=l*f-c*m,x=l-m,v=c-f,p=r*v-h*x,b=(o*x-r*g)/p;if((b>=l&&b<=m||b>=m&&b<=l)&&(b>=t&&b<=s||b>=s&&b<=t)){let w=(o*v-h*g)/p;if((w>=c&&w<=f||w>=f&&w<=c)&&(w>=i&&w<=a||w>=a&&w<=i))return!0}l=m,c=f}return!1}getPolygon(e){if(!e)throw new Error("boundingBox cannot be null.");let t=this.boundingBoxes.indexOf(e);return t==-1?null:this.polygons[t]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},ke=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new ut(()=>new Array),this.polygonIndicesPool=new ut(()=>new Array)}triangulate(e){let t=e,i=e.length>>1,s=this.indicesArray;s.length=0;for(let n=0;n<i;n++)s[n]=n;let a=this.isConcaveArray;a.length=0;for(let n=0,r=i;n<r;++n)a[n]=ke.isConcave(n,i,t,s);let d=this.triangles;for(d.length=0;i>3;){let n=i-1,r=0,h=1;for(;;){e:if(!a[r]){let c=s[n]<<1,u=s[r]<<1,m=s[h]<<1,f=t[c],g=t[c+1],x=t[u],v=t[u+1],p=t[m],b=t[m+1];for(let w=(h+1)%i;w!=n;w=(w+1)%i){if(!a[w])continue;let y=s[w]<<1,T=t[y],A=t[y+1];if(ke.positiveArea(p,b,f,g,T,A)&&ke.positiveArea(f,g,x,v,T,A)&&ke.positiveArea(x,v,p,b,T,A))break e}break}if(h==0){do{if(!a[r])break;r--}while(r>0);break}n=r,r=h,h=(h+1)%i}d.push(s[(i+r-1)%i]),d.push(s[r]),d.push(s[(r+1)%i]),s.splice(r,1),a.splice(r,1),i--;let o=(i+r-1)%i,l=r==i?0:r;a[o]=ke.isConcave(o,i,t,s),a[l]=ke.isConcave(l,i,t,s)}return i==3&&(d.push(s[2]),d.push(s[0]),d.push(s[1])),d}decompose(e,t){let i=e,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;let d=this.polygonIndicesPool.obtain();d.length=0;let n=this.polygonPool.obtain();n.length=0;let r=-1,h=0;for(let o=0,l=t.length;o<l;o+=3){let c=t[o]<<1,u=t[o+1]<<1,m=t[o+2]<<1,f=i[c],g=i[c+1],x=i[u],v=i[u+1],p=i[m],b=i[m+1],w=!1;if(r==c){let y=n.length-4,T=ke.winding(n[y],n[y+1],n[y+2],n[y+3],p,b),A=ke.winding(p,b,n[0],n[1],n[2],n[3]);T==h&&A==h&&(n.push(p),n.push(b),d.push(m),w=!0)}w||(n.length>0?(s.push(n),a.push(d)):(this.polygonPool.free(n),this.polygonIndicesPool.free(d)),n=this.polygonPool.obtain(),n.length=0,n.push(f),n.push(g),n.push(x),n.push(v),n.push(p),n.push(b),d=this.polygonIndicesPool.obtain(),d.length=0,d.push(c),d.push(u),d.push(m),h=ke.winding(f,g,x,v,p,b),r=c)}n.length>0&&(s.push(n),a.push(d));for(let o=0,l=s.length;o<l;o++){if(d=a[o],d.length==0)continue;let c=d[0],u=d[d.length-1];n=s[o];let m=n.length-4,f=n[m],g=n[m+1],x=n[m+2],v=n[m+3],p=n[0],b=n[1],w=n[2],y=n[3],T=ke.winding(f,g,x,v,p,b);for(let A=0;A<l;A++){if(A==o)continue;let E=a[A];if(E.length!=3)continue;let I=E[0],Y=E[1],P=E[2],X=s[A],B=X[X.length-2],C=X[X.length-1];if(I!=c||Y!=u)continue;let k=ke.winding(f,g,x,v,B,C),D=ke.winding(B,C,p,b,w,y);k==T&&D==T&&(X.length=0,E.length=0,n.push(B),n.push(C),d.push(P),f=x,g=v,x=B,v=C,A=0)}}for(let o=s.length-1;o>=0;o--)n=s[o],n.length==0&&(s.splice(o,1),this.polygonPool.free(n),d=a[o],a.splice(o,1),this.polygonIndicesPool.free(d));return s}static isConcave(e,t,i,s){let a=s[(t+e-1)%t]<<1,d=s[e]<<1,n=s[(e+1)%t]<<1;return!this.positiveArea(i[a],i[a+1],i[d],i[d+1],i[n],i[n+1])}static positiveArea(e,t,i,s,a,d){return e*(d-s)+i*(t-d)+a*(s-t)>=0}static winding(e,t,i,s,a,d){let n=i-e,r=s-t;return a*r-d*n+n*t-e*r>=0?1:-1}},It=class{constructor(){this.triangulator=new ke,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}clipStart(e,t){if(this.clipAttachment)return 0;this.clipAttachment=t;let i=t.worldVerticesLength,s=V.setArraySize(this.clippingPolygon,i);t.computeWorldVertices(e,0,i,s,0,2);let a=this.clippingPolygon;It.makeClockwise(a);let d=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a));for(let n=0,r=d.length;n<r;n++){let h=d[n];It.makeClockwise(h),h.push(h[0]),h.push(h[1])}return d.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()}clipEnd(){!this.clipAttachment||(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(e,t,i,s,a,d,n,r){let h=this.clipOutput,o=this.clippedVertices,l=this.clippedTriangles,c=this.clippingPolygons,u=this.clippingPolygons.length,m=r?12:8,f=0;o.length=0,l.length=0;e:for(let g=0;g<s;g+=3){let x=i[g]<<1,v=e[x],p=e[x+1],b=a[x],w=a[x+1];x=i[g+1]<<1;let y=e[x],T=e[x+1],A=a[x],E=a[x+1];x=i[g+2]<<1;let I=e[x],Y=e[x+1],P=a[x],X=a[x+1];for(let B=0;B<u;B++){let C=o.length;if(this.clip(v,p,y,T,I,Y,c[B],h)){let k=h.length;if(k==0)continue;let D=T-Y,R=I-y,L=v-I,se=Y-p,ce=1/(D*L+R*(p-Y)),he=k>>1,re=this.clipOutput,ie=V.setArraySize(o,C+he*m);for(let Se=0;Se<k;Se+=2){let Xe=re[Se],ve=re[Se+1];ie[C]=Xe,ie[C+1]=ve,ie[C+2]=d.r,ie[C+3]=d.g,ie[C+4]=d.b,ie[C+5]=d.a;let Ee=Xe-I,Ie=ve-Y,Ze=(D*Ee+R*Ie)*ce,ht=(se*Ee+L*Ie)*ce,bt=1-Ze-ht;ie[C+6]=b*Ze+A*ht+P*bt,ie[C+7]=w*Ze+E*ht+X*bt,r&&(ie[C+8]=n.r,ie[C+9]=n.g,ie[C+10]=n.b,ie[C+11]=n.a),C+=m}C=l.length;let de=V.setArraySize(l,C+3*(he-2));he--;for(let Se=1;Se<he;Se++)de[C]=f,de[C+1]=f+Se,de[C+2]=f+Se+1,C+=3;f+=he+1}else{let k=V.setArraySize(o,C+3*m);k[C]=v,k[C+1]=p,k[C+2]=d.r,k[C+3]=d.g,k[C+4]=d.b,k[C+5]=d.a,r?(k[C+6]=b,k[C+7]=w,k[C+8]=n.r,k[C+9]=n.g,k[C+10]=n.b,k[C+11]=n.a,k[C+12]=y,k[C+13]=T,k[C+14]=d.r,k[C+15]=d.g,k[C+16]=d.b,k[C+17]=d.a,k[C+18]=A,k[C+19]=E,k[C+20]=n.r,k[C+21]=n.g,k[C+22]=n.b,k[C+23]=n.a,k[C+24]=I,k[C+25]=Y,k[C+26]=d.r,k[C+27]=d.g,k[C+28]=d.b,k[C+29]=d.a,k[C+30]=P,k[C+31]=X,k[C+32]=n.r,k[C+33]=n.g,k[C+34]=n.b,k[C+35]=n.a):(k[C+6]=b,k[C+7]=w,k[C+8]=y,k[C+9]=T,k[C+10]=d.r,k[C+11]=d.g,k[C+12]=d.b,k[C+13]=d.a,k[C+14]=A,k[C+15]=E,k[C+16]=I,k[C+17]=Y,k[C+18]=d.r,k[C+19]=d.g,k[C+20]=d.b,k[C+21]=d.a,k[C+22]=P,k[C+23]=X),C=l.length;let D=V.setArraySize(l,C+3);D[C]=f,D[C+1]=f+1,D[C+2]=f+2,f+=3;continue e}}}}clip(e,t,i,s,a,d,n,r){let h=r,o=!1,l=null;n.length%4>=2?(l=r,r=this.scratch):l=this.scratch,l.length=0,l.push(e),l.push(t),l.push(i),l.push(s),l.push(a),l.push(d),l.push(e),l.push(t),r.length=0;let c=n,u=n.length-4;for(let m=0;;m+=2){let f=c[m],g=c[m+1],x=c[m+2],v=c[m+3],p=f-x,b=g-v,w=l,y=l.length-2,T=r.length;for(let E=0;E<y;E+=2){let I=w[E],Y=w[E+1],P=w[E+2],X=w[E+3],B=p*(X-v)-b*(P-x)>0;if(p*(Y-v)-b*(I-x)>0){if(B){r.push(P),r.push(X);continue}let C=X-Y,k=P-I,D=C*(x-f)-k*(v-g);if(Math.abs(D)>1e-6){let R=(k*(g-Y)-C*(f-I))/D;r.push(f+(x-f)*R),r.push(g+(v-g)*R)}else r.push(f),r.push(g)}else if(B){let C=X-Y,k=P-I,D=C*(x-f)-k*(v-g);if(Math.abs(D)>1e-6){let R=(k*(g-Y)-C*(f-I))/D;r.push(f+(x-f)*R),r.push(g+(v-g)*R)}else r.push(f),r.push(g);r.push(P),r.push(X)}o=!0}if(T==r.length)return h.length=0,!0;if(r.push(r[0]),r.push(r[1]),m==u)break;let A=r;r=l,r.length=0,l=A}if(h!=r){h.length=0;for(let m=0,f=r.length-2;m<f;m++)h[m]=r[m]}else h.length=h.length-2;return o}static makeClockwise(e){let t=e,i=e.length,s=t[i-2]*t[1]-t[0]*t[i-1],a=0,d=0,n=0,r=0;for(let h=0,o=i-3;h<o;h+=2)a=t[h],d=t[h+1],n=t[h+2],r=t[h+3],s+=a*r-n*d;if(!(s<0))for(let h=0,o=i-2,l=i>>1;h<l;h+=2){let c=t[h],u=t[h+1],m=o-h;t[h]=t[m],t[h+1]=t[m+1],t[m]=c,t[m+1]=u}}},fs=class{constructor(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,i=new Si,s=typeof e=="string"?JSON.parse(e):e,a=s.skeleton;if(a&&(i.hash=a.hash,i.version=a.spine,i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height,i.fps=a.fps,i.imagesPath=a.images),s.bones)for(let d=0;d<s.bones.length;d++){let n=s.bones[d],r=null,h=M(n,"parent",null);h&&(r=i.findBone(h));let o=new xi(i.bones.length,n.name,r);o.length=M(n,"length",0)*t,o.x=M(n,"x",0)*t,o.y=M(n,"y",0)*t,o.rotation=M(n,"rotation",0),o.scaleX=M(n,"scaleX",1),o.scaleY=M(n,"scaleY",1),o.shearX=M(n,"shearX",0),o.shearY=M(n,"shearY",0),o.transformMode=V.enumValue(Te,M(n,"transform","Normal")),o.skinRequired=M(n,"skin",!1);let l=M(n,"color",null);l&&o.color.setFromString(l),i.bones.push(o)}if(s.slots)for(let d=0;d<s.slots.length;d++){let n=s.slots[d],r=i.findBone(n.bone),h=new Ti(i.slots.length,n.name,r),o=M(n,"color",null);o&&h.color.setFromString(o);let l=M(n,"dark",null);l&&(h.darkColor=O.fromString(l)),h.attachmentName=M(n,"attachment",null),h.blendMode=V.enumValue(ye,M(n,"blend","normal")),i.slots.push(h)}if(s.ik)for(let d=0;d<s.ik.length;d++){let n=s.ik[d],r=new yi(n.name);r.order=M(n,"order",0),r.skinRequired=M(n,"skin",!1);for(let h=0;h<n.bones.length;h++)r.bones.push(i.findBone(n.bones[h]));r.target=i.findBone(n.target),r.mix=M(n,"mix",1),r.softness=M(n,"softness",0)*t,r.bendDirection=M(n,"bendPositive",!0)?1:-1,r.compress=M(n,"compress",!1),r.stretch=M(n,"stretch",!1),r.uniform=M(n,"uniform",!1),i.ikConstraints.push(r)}if(s.transform)for(let d=0;d<s.transform.length;d++){let n=s.transform[d],r=new ki(n.name);r.order=M(n,"order",0),r.skinRequired=M(n,"skin",!1);for(let o=0;o<n.bones.length;o++)r.bones.push(i.findBone(n.bones[o]));let h=n.target;r.target=i.findBone(h),r.local=M(n,"local",!1),r.relative=M(n,"relative",!1),r.offsetRotation=M(n,"rotation",0),r.offsetX=M(n,"x",0)*t,r.offsetY=M(n,"y",0)*t,r.offsetScaleX=M(n,"scaleX",0),r.offsetScaleY=M(n,"scaleY",0),r.offsetShearY=M(n,"shearY",0),r.mixRotate=M(n,"mixRotate",1),r.mixX=M(n,"mixX",1),r.mixY=M(n,"mixY",r.mixX),r.mixScaleX=M(n,"mixScaleX",1),r.mixScaleY=M(n,"mixScaleY",r.mixScaleX),r.mixShearY=M(n,"mixShearY",1),i.transformConstraints.push(r)}if(s.path)for(let d=0;d<s.path.length;d++){let n=s.path[d],r=new Ai(n.name);r.order=M(n,"order",0),r.skinRequired=M(n,"skin",!1);for(let o=0;o<n.bones.length;o++)r.bones.push(i.findBone(n.bones[o]));let h=n.target;r.target=i.findSlot(h),r.positionMode=V.enumValue(Ve,M(n,"positionMode","Percent")),r.spacingMode=V.enumValue(ge,M(n,"spacingMode","Length")),r.rotateMode=V.enumValue(tt,M(n,"rotateMode","Tangent")),r.offsetRotation=M(n,"rotation",0),r.position=M(n,"position",0),r.positionMode==Ve.Fixed&&(r.position*=t),r.spacing=M(n,"spacing",0),(r.spacingMode==ge.Length||r.spacingMode==ge.Fixed)&&(r.spacing*=t),r.mixRotate=M(n,"mixRotate",1),r.mixX=M(n,"mixX",1),r.mixY=M(n,"mixY",r.mixX),i.pathConstraints.push(r)}if(s.skins)for(let d=0;d<s.skins.length;d++){let n=s.skins[d],r=new Et(n.name);if(n.bones)for(let h=0;h<n.bones.length;h++)r.bones.push(i.findBone(n.bones[h]));if(n.ik)for(let h=0;h<n.ik.length;h++)r.constraints.push(i.findIkConstraint(n.ik[h]));if(n.transform)for(let h=0;h<n.transform.length;h++)r.constraints.push(i.findTransformConstraint(n.transform[h]));if(n.path)for(let h=0;h<n.path.length;h++)r.constraints.push(i.findPathConstraint(n.path[h]));for(let h in n.attachments){let o=i.findSlot(h),l=n.attachments[h];for(let c in l){let u=this.readAttachment(l[c],r,o.index,c,i);u&&r.setAttachment(o.index,c,u)}}i.skins.push(r),r.name=="default"&&(i.defaultSkin=r)}for(let d=0,n=this.linkedMeshes.length;d<n;d++){let r=this.linkedMeshes[d],o=(r.skin?i.findSkin(r.skin):i.defaultSkin).getAttachment(r.slotIndex,r.parent);r.mesh.deformAttachment=r.inheritDeform?o:r.mesh,r.mesh.setParentMesh(o),r.mesh.updateUVs()}if(this.linkedMeshes.length=0,s.events)for(let d in s.events){let n=s.events[d],r=new vi(d);r.intValue=M(n,"int",0),r.floatValue=M(n,"float",0),r.stringValue=M(n,"string",""),r.audioPath=M(n,"audio",null),r.audioPath&&(r.volume=M(n,"volume",1),r.balance=M(n,"balance",0)),i.events.push(r)}if(s.animations)for(let d in s.animations){let n=s.animations[d];this.readAnimation(n,d,i)}return i}readAttachment(e,t,i,s,a){let d=this.scale;switch(s=M(e,"name",s),M(e,"type","region")){case"region":{let n=M(e,"path",s),r=this.attachmentLoader.newRegionAttachment(t,s,n);if(!r)return null;r.path=n,r.x=M(e,"x",0)*d,r.y=M(e,"y",0)*d,r.scaleX=M(e,"scaleX",1),r.scaleY=M(e,"scaleY",1),r.rotation=M(e,"rotation",0),r.width=e.width*d,r.height=e.height*d;let h=M(e,"color",null);return h&&r.color.setFromString(h),r.updateOffset(),r}case"boundingbox":{let n=this.attachmentLoader.newBoundingBoxAttachment(t,s);if(!n)return null;this.readVertices(e,n,e.vertexCount<<1);let r=M(e,"color",null);return r&&n.color.setFromString(r),n}case"mesh":case"linkedmesh":{let n=M(e,"path",s),r=this.attachmentLoader.newMeshAttachment(t,s,n);if(!r)return null;r.path=n;let h=M(e,"color",null);h&&r.color.setFromString(h),r.width=M(e,"width",0)*d,r.height=M(e,"height",0)*d;let o=M(e,"parent",null);if(o)return this.linkedMeshes.push(new hr(r,M(e,"skin",null),i,o,M(e,"deform",!0))),r;let l=e.uvs;return this.readVertices(e,r,l.length),r.triangles=e.triangles,r.regionUVs=l,r.updateUVs(),r.edges=M(e,"edges",null),r.hullLength=M(e,"hull",0)*2,r}case"path":{let n=this.attachmentLoader.newPathAttachment(t,s);if(!n)return null;n.closed=M(e,"closed",!1),n.constantSpeed=M(e,"constantSpeed",!0);let r=e.vertexCount;this.readVertices(e,n,r<<1);let h=V.newArray(r/3,0);for(let l=0;l<e.lengths.length;l++)h[l]=e.lengths[l]*d;n.lengths=h;let o=M(e,"color",null);return o&&n.color.setFromString(o),n}case"point":{let n=this.attachmentLoader.newPointAttachment(t,s);if(!n)return null;n.x=M(e,"x",0)*d,n.y=M(e,"y",0)*d,n.rotation=M(e,"rotation",0);let r=M(e,"color",null);return r&&n.color.setFromString(r),n}case"clipping":{let n=this.attachmentLoader.newClippingAttachment(t,s);if(!n)return null;let r=M(e,"end",null);r&&(n.endSlot=a.findSlot(r));let h=e.vertexCount;this.readVertices(e,n,h<<1);let o=M(e,"color",null);return o&&n.color.setFromString(o),n}}return null}readVertices(e,t,i){let s=this.scale;t.worldVerticesLength=i;let a=e.vertices;if(i==a.length){let r=V.toFloatArray(a);if(s!=1)for(let h=0,o=a.length;h<o;h++)r[h]*=s;t.vertices=r;return}let d=new Array,n=new Array;for(let r=0,h=a.length;r<h;){let o=a[r++];n.push(o);for(let l=r+o*4;r<l;r+=4)n.push(a[r]),d.push(a[r+1]*s),d.push(a[r+2]*s),d.push(a[r+3])}t.bones=n,t.vertices=V.toFloatArray(d)}readAnimation(e,t,i){let s=this.scale,a=new Array;if(e.slots)for(let n in e.slots){let r=e.slots[n],h=i.findSlot(n).index;for(let o in r){let l=r[o];if(!l)continue;let c=l.length;if(o=="attachment"){let u=new Ke(c,h);for(let m=0;m<c;m++){let f=l[m];u.setFrame(m,M(f,"time",0),f.name)}a.push(u)}else if(o=="rgba"){let u=new Qt(c,c<<2,h),m=l[0],f=M(m,"time",0),g=O.fromString(m.color);for(let x=0,v=0;;x++){u.setFrame(x,f,g.r,g.g,g.b,g.a);let p=l[x+1];if(!p){u.shrink(v);break}let b=M(p,"time",0),w=O.fromString(p.color),y=m.curve;y&&(v=le(y,u,v,x,0,f,b,g.r,w.r,1),v=le(y,u,v,x,1,f,b,g.g,w.g,1),v=le(y,u,v,x,2,f,b,g.b,w.b,1),v=le(y,u,v,x,3,f,b,g.a,w.a,1)),f=b,g=w,m=p}a.push(u)}else if(o=="rgb"){let u=new $t(c,c*3,h),m=l[0],f=M(m,"time",0),g=O.fromString(m.color);for(let x=0,v=0;;x++){u.setFrame(x,f,g.r,g.g,g.b);let p=l[x+1];if(!p){u.shrink(v);break}let b=M(p,"time",0),w=O.fromString(p.color),y=m.curve;y&&(v=le(y,u,v,x,0,f,b,g.r,w.r,1),v=le(y,u,v,x,1,f,b,g.g,w.g,1),v=le(y,u,v,x,2,f,b,g.b,w.b,1)),f=b,g=w,m=p}a.push(u)}else if(o=="alpha")a.push(De(l,new ei(c,c,h),0,1));else if(o=="rgba2"){let u=new ti(c,c*7,h),m=l[0],f=M(m,"time",0),g=O.fromString(m.light),x=O.fromString(m.dark);for(let v=0,p=0;;v++){u.setFrame(v,f,g.r,g.g,g.b,g.a,x.r,x.g,x.b);let b=l[v+1];if(!b){u.shrink(p);break}let w=M(b,"time",0),y=O.fromString(b.light),T=O.fromString(b.dark),A=m.curve;A&&(p=le(A,u,p,v,0,f,w,g.r,y.r,1),p=le(A,u,p,v,1,f,w,g.g,y.g,1),p=le(A,u,p,v,2,f,w,g.b,y.b,1),p=le(A,u,p,v,3,f,w,g.a,y.a,1),p=le(A,u,p,v,4,f,w,x.r,T.r,1),p=le(A,u,p,v,5,f,w,x.g,T.g,1),p=le(A,u,p,v,6,f,w,x.b,T.b,1)),f=w,g=y,x=T,m=b}a.push(u)}else if(o=="rgb2"){let u=new ii(c,c*6,h),m=l[0],f=M(m,"time",0),g=O.fromString(m.light),x=O.fromString(m.dark);for(let v=0,p=0;;v++){u.setFrame(v,f,g.r,g.g,g.b,x.r,x.g,x.b);let b=l[v+1];if(!b){u.shrink(p);break}let w=M(b,"time",0),y=O.fromString(b.light),T=O.fromString(b.dark),A=m.curve;A&&(p=le(A,u,p,v,0,f,w,g.r,y.r,1),p=le(A,u,p,v,1,f,w,g.g,y.g,1),p=le(A,u,p,v,2,f,w,g.b,y.b,1),p=le(A,u,p,v,3,f,w,x.r,T.r,1),p=le(A,u,p,v,4,f,w,x.g,T.g,1),p=le(A,u,p,v,5,f,w,x.b,T.b,1)),f=w,g=y,x=T,m=b}a.push(u)}}}if(e.bones)for(let n in e.bones){let r=e.bones[n],h=i.findBone(n).index;for(let o in r){let l=r[o],c=l.length;if(c!=0){if(o==="rotate")a.push(De(l,new ft(c,c,h),0,1));else if(o==="translate"){let u=new Wt(c,c<<1,h);a.push(Ei(l,u,"x","y",0,s))}else if(o==="translatex"){let u=new _t(c,c,h);a.push(De(l,u,0,s))}else if(o==="translatey"){let u=new qt(c,c,h);a.push(De(l,u,0,s))}else if(o==="scale"){let u=new jt(c,c<<1,h);a.push(Ei(l,u,"x","y",1,1))}else if(o==="scalex"){let u=new Ht(c,c,h);a.push(De(l,u,1,1))}else if(o==="scaley"){let u=new Gt(c,c,h);a.push(De(l,u,1,1))}else if(o==="shear"){let u=new Zt(c,c<<1,h);a.push(Ei(l,u,"x","y",0,1))}else if(o==="shearx"){let u=new Jt(c,c,h);a.push(De(l,u,0,1))}else if(o==="sheary"){let u=new Kt(c,c,h);a.push(De(l,u,0,1))}}}}if(e.ik)for(let n in e.ik){let r=e.ik[n],h=r[0];if(!h)continue;let o=i.findIkConstraint(n),l=i.ikConstraints.indexOf(o),c=new ri(r.length,r.length<<1,l),u=M(h,"time",0),m=M(h,"mix",1),f=M(h,"softness",0)*s;for(let g=0,x=0;;g++){c.setFrame(g,u,m,f,M(h,"bendPositive",!0)?1:-1,M(h,"compress",!1),M(h,"stretch",!1));let v=r[g+1];if(!v){c.shrink(x);break}let p=M(v,"time",0),b=M(v,"mix",1),w=M(v,"softness",0)*s,y=h.curve;y&&(x=le(y,c,x,g,0,u,p,m,b,1),x=le(y,c,x,g,1,u,p,f,w,s)),u=p,m=b,f=w,h=v}a.push(c)}if(e.transform)for(let n in e.transform){let r=e.transform[n],h=r[0];if(!h)continue;let o=i.findTransformConstraint(n),l=i.transformConstraints.indexOf(o),c=new ai(r.length,r.length*6,l),u=M(h,"time",0),m=M(h,"mixRotate",1),f=M(h,"mixX",1),g=M(h,"mixY",f),x=M(h,"mixScaleX",1),v=M(h,"mixScaleY",x),p=M(h,"mixShearY",1);for(let b=0,w=0;;b++){c.setFrame(b,u,m,f,g,x,v,p);let y=r[b+1];if(!y){c.shrink(w);break}let T=M(y,"time",0),A=M(y,"mixRotate",1),E=M(y,"mixX",1),I=M(y,"mixY",E),Y=M(y,"mixScaleX",1),P=M(y,"mixScaleY",Y),X=M(y,"mixShearY",1),B=h.curve;B&&(w=le(B,c,w,b,0,u,T,m,A,1),w=le(B,c,w,b,1,u,T,f,E,1),w=le(B,c,w,b,2,u,T,g,I,1),w=le(B,c,w,b,3,u,T,x,Y,1),w=le(B,c,w,b,4,u,T,v,P,1),w=le(B,c,w,b,5,u,T,p,X,1)),u=T,m=A,f=E,g=I,x=Y,v=P,x=Y,h=y}a.push(c)}if(e.path)for(let n in e.path){let r=e.path[n],h=i.findPathConstraint(n),o=i.pathConstraints.indexOf(h);for(let l in r){let c=r[l],u=c[0];if(!u)continue;let m=c.length;if(l==="position"){let f=new ni(m,m,o);a.push(De(c,f,0,h.positionMode==Ve.Fixed?s:1))}else if(l==="spacing"){let f=new li(m,m,o);a.push(De(c,f,0,h.spacingMode==ge.Length||h.spacingMode==ge.Fixed?s:1))}else if(l==="mix"){let f=new oi(m,m*3,o),g=M(u,"time",0),x=M(u,"mixRotate",1),v=M(u,"mixX",1),p=M(u,"mixY",v);for(let b=0,w=0;;b++){f.setFrame(b,g,x,v,p);let y=c[b+1];if(!y){f.shrink(w);break}let T=M(y,"time",0),A=M(y,"mixRotate",1),E=M(y,"mixX",1),I=M(y,"mixY",E),Y=u.curve;Y&&(w=le(Y,f,w,b,0,g,T,x,A,1),w=le(Y,f,w,b,1,g,T,v,E,1),w=le(Y,f,w,b,2,g,T,p,I,1)),g=T,x=A,v=E,p=I,u=y}a.push(f)}}}if(e.deform)for(let n in e.deform){let r=e.deform[n],h=i.findSkin(n);for(let o in r){let l=r[o],c=i.findSlot(o).index;for(let u in l){let m=l[u],f=m[0];if(!f)continue;let g=h.getAttachment(c,u),x=g.bones,v=g.vertices,p=x?v.length/3*2:v.length,b=new si(m.length,m.length,c,g),w=M(f,"time",0);for(let y=0,T=0;;y++){let A,E=M(f,"vertices",null);if(!E)A=x?V.newFloatArray(p):v;else{A=V.newFloatArray(p);let X=M(f,"offset",0);if(V.arrayCopy(E,0,A,X,E.length),s!=1)for(let B=X,C=B+E.length;B<C;B++)A[B]*=s;if(!x)for(let B=0;B<p;B++)A[B]+=v[B]}b.setFrame(y,w,A);let I=m[y+1];if(!I){b.shrink(T);break}let Y=M(I,"time",0),P=f.curve;P&&(T=le(P,b,T,y,0,w,Y,0,1,1)),w=Y,f=I}a.push(b)}}}if(e.drawOrder){let n=new Qe(e.drawOrder.length),r=i.slots.length,h=0;for(let o=0;o<e.drawOrder.length;o++,h++){let l=e.drawOrder[o],c=null,u=M(l,"offsets",null);if(u){c=V.newArray(r,-1);let m=V.newArray(r-u.length,0),f=0,g=0;for(let x=0;x<u.length;x++){let v=u[x],p=i.findSlot(v.slot).index;for(;f!=p;)m[g++]=f++;c[f+v.offset]=f++}for(;f<r;)m[g++]=f++;for(let x=r-1;x>=0;x--)c[x]==-1&&(c[x]=m[--g])}n.setFrame(h,M(l,"time",0),c)}a.push(n)}if(e.events){let n=new mt(e.events.length),r=0;for(let h=0;h<e.events.length;h++,r++){let o=e.events[h],l=i.findEvent(o.name),c=new bi(V.toSinglePrecision(M(o,"time",0)),l);c.intValue=M(o,"int",l.intValue),c.floatValue=M(o,"float",l.floatValue),c.stringValue=M(o,"string",l.stringValue),c.data.audioPath&&(c.volume=M(o,"volume",1),c.balance=M(o,"balance",0)),n.setFrame(r,c)}a.push(n)}let d=0;for(let n=0,r=a.length;n<r;n++)d=Math.max(d,a[n].getDuration());i.animations.push(new yt(t,a,d))}},hr=class{constructor(e,t,i,s,a){this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=s,this.inheritDeform=a}};function De(e,t,i,s){let a=e[0],d=M(a,"time",0),n=M(a,"value",i)*s,r=0;for(let h=0;;h++){t.setFrame(h,d,n);let o=e[h+1];if(!o)return t.shrink(r),t;let l=M(o,"time",0),c=M(o,"value",i)*s;a.curve&&(r=le(a.curve,t,r,h,0,d,l,n,c,s)),d=l,n=c,a=o}}function Ei(e,t,i,s,a,d){let n=e[0],r=M(n,"time",0),h=M(n,i,a)*d,o=M(n,s,a)*d,l=0;for(let c=0;;c++){t.setFrame(c,r,h,o);let u=e[c+1];if(!u)return t.shrink(l),t;let m=M(u,"time",0),f=M(u,i,a)*d,g=M(u,s,a)*d,x=n.curve;x&&(l=le(x,t,l,c,0,r,m,h,f,d),l=le(x,t,l,c,1,r,m,o,g,d)),r=m,h=f,o=g,n=u}}function le(e,t,i,s,a,d,n,r,h,o){if(e=="stepped")return t.setStepped(s),i;let l=a<<2,c=e[l],u=e[l+1]*o,m=e[l+2],f=e[l+3]*o;return t.setBezier(i,s,a,d,r,c,u,m,f,n,h),i+1}function M(e,t,i){return e[t]!==void 0?e[t]:i}(()=>{typeof Math.fround=="undefined"&&(Math.fround=function(e){return function(t){return e[0]=t,e[0]}}(new Float32Array(1)))})();var dr=class{constructor(e,t){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=t}begin(e){}transform(e,t,i,s){e.x+=F.randomTriangular(-this.jitterX,this.jitterY),e.y+=F.randomTriangular(-this.jitterX,this.jitterY)}end(){}},ms=class{constructor(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}begin(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY}transform(e,t,i,s){let a=this.angle*F.degreesToRadians,d=e.x-this.worldX,n=e.y-this.worldY,r=Math.sqrt(d*d+n*n);if(r<this.radius){let h=ms.interpolation.apply(0,a,(this.radius-r)/this.radius),o=Math.cos(h),l=Math.sin(h);e.x=o*d-l*n+this.worldX,e.y=l*d+o*n+this.worldY}}end(){}},gs=ms;gs.interpolation=new qi(2);var we=class{constructor(e,t={alpha:"true"}){this.restorables=new Array,e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?(this.gl=e,this.canvas=this.gl.canvas):this.setupCanvas(e,t)}setupCanvas(e,t){this.gl=e.getContext("webgl2",t)||e.getContext("webgl",t),this.canvas=e,e.addEventListener("webglcontextlost",i=>{let s=i;i&&i.preventDefault()}),e.addEventListener("webglcontextrestored",i=>{for(let s=0,a=this.restorables.length;s<a;s++)this.restorables[s].restore()})}addRestorable(e){this.restorables.push(e)}removeRestorable(e){let t=this.restorables.indexOf(e);t>-1&&this.restorables.splice(t,1)}},nt=1,cr=769,ps=770,Yt=771,ur=774,Rt=class{static getDestGLBlendMode(e){switch(e){case ye.Normal:return Yt;case ye.Additive:return nt;case ye.Multiply:return Yt;case ye.Screen:return Yt;default:throw new Error("Unknown blend mode: "+e)}}static getSourceColorGLBlendMode(e,t=!1){switch(e){case ye.Normal:return t?nt:ps;case ye.Additive:return t?nt:ps;case ye.Multiply:return ur;case ye.Screen:return nt;default:throw new Error("Unknown blend mode: "+e)}}static getSourceAlphaGLBlendMode(e){switch(e){case ye.Normal:return nt;case ye.Additive:return nt;case ye.Multiply:return Yt;case ye.Screen:return cr;default:throw new Error("Unknown blend mode: "+e)}}},Ii=class extends fi{constructor(e,t,i=!1){super(t);this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.context=e instanceof we?e:new we(e),this.useMipMaps=i,this.restore(),this.context.addRestorable(this)}setFilters(e,t){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,Ii.validateMagFilter(t))}static validateMagFilter(e){switch(e){case pe.MipMap:case pe.MipMapLinearLinear:case pe.MipMapLinearNearest:case pe.MipMapNearestLinear:case pe.MipMapNearestNearest:return pe.Linear;default:return e}}setWraps(e,t){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t)}update(e){let t=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),Ii.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e&&t.generateMipmap(t.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(e=0){let t=this.context.gl;this.boundUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)}unbind(){let e=this.context.gl;e.activeTexture(e.TEXTURE0+this.boundUnit),e.bindTexture(e.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}},pt=Ii;pt.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;var Yi=class extends rs{constructor(e,t="",i=null){super(s=>new pt(e,s),t,i)}},Me=class{constructor(e=0,t=0,i=0){this.x=0,this.y=0,this.z=0,this.x=e,this.y=t,this.z=i}setFrom(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}scale(e){return this.x*=e,this.y*=e,this.z*=e,this}normalize(){let e=this.length();return e==0?this:(e=1/e,this.x*=e,this.y*=e,this.z*=e,this)}cross(e){return this.set(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}multiply(e){let t=e.values;return this.set(this.x*t[N]+this.y*t[j]+this.z*t[H]+t[U],this.x*t[G]+this.y*t[z]+this.z*t[Z]+t[W],this.x*t[J]+this.y*t[K]+this.z*t[_]+t[q])}project(e){let t=e.values,i=1/(this.x*t[$]+this.y*t[ee]+this.z*t[te]+t[Q]);return this.set((this.x*t[N]+this.y*t[j]+this.z*t[H]+t[U])*i,(this.x*t[G]+this.y*t[z]+this.z*t[Z]+t[W])*i,(this.x*t[J]+this.y*t[K]+this.z*t[_]+t[q])*i)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(e){let t=e.x-this.x,i=e.y-this.y,s=e.z-this.z;return Math.sqrt(t*t+i*i+s*s)}},N=0,j=4,H=8,U=12,G=1,z=5,Z=9,W=13,J=2,K=6,_=10,q=14,$=3,ee=7,te=11,Q=15,xe=class{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let e=this.values;e[N]=1,e[z]=1,e[_]=1,e[Q]=1}set(e){return this.values.set(e),this}transpose(){let e=this.temp,t=this.values;return e[N]=t[N],e[j]=t[G],e[H]=t[J],e[U]=t[$],e[G]=t[j],e[z]=t[z],e[Z]=t[K],e[W]=t[ee],e[J]=t[H],e[K]=t[Z],e[_]=t[_],e[q]=t[te],e[$]=t[U],e[ee]=t[W],e[te]=t[q],e[Q]=t[Q],this.set(e)}identity(){let e=this.values;return e[N]=1,e[j]=0,e[H]=0,e[U]=0,e[G]=0,e[z]=1,e[Z]=0,e[W]=0,e[J]=0,e[K]=0,e[_]=1,e[q]=0,e[$]=0,e[ee]=0,e[te]=0,e[Q]=1,this}invert(){let e=this.values,t=this.temp,i=e[$]*e[K]*e[Z]*e[U]-e[J]*e[ee]*e[Z]*e[U]-e[$]*e[z]*e[_]*e[U]+e[G]*e[ee]*e[_]*e[U]+e[J]*e[z]*e[te]*e[U]-e[G]*e[K]*e[te]*e[U]-e[$]*e[K]*e[H]*e[W]+e[J]*e[ee]*e[H]*e[W]+e[$]*e[j]*e[_]*e[W]-e[N]*e[ee]*e[_]*e[W]-e[J]*e[j]*e[te]*e[W]+e[N]*e[K]*e[te]*e[W]+e[$]*e[z]*e[H]*e[q]-e[G]*e[ee]*e[H]*e[q]-e[$]*e[j]*e[Z]*e[q]+e[N]*e[ee]*e[Z]*e[q]+e[G]*e[j]*e[te]*e[q]-e[N]*e[z]*e[te]*e[q]-e[J]*e[z]*e[H]*e[Q]+e[G]*e[K]*e[H]*e[Q]+e[J]*e[j]*e[Z]*e[Q]-e[N]*e[K]*e[Z]*e[Q]-e[G]*e[j]*e[_]*e[Q]+e[N]*e[z]*e[_]*e[Q];if(i==0)throw new Error("non-invertible matrix");let s=1/i;return t[N]=e[Z]*e[q]*e[ee]-e[W]*e[_]*e[ee]+e[W]*e[K]*e[te]-e[z]*e[q]*e[te]-e[Z]*e[K]*e[Q]+e[z]*e[_]*e[Q],t[j]=e[U]*e[_]*e[ee]-e[H]*e[q]*e[ee]-e[U]*e[K]*e[te]+e[j]*e[q]*e[te]+e[H]*e[K]*e[Q]-e[j]*e[_]*e[Q],t[H]=e[H]*e[W]*e[ee]-e[U]*e[Z]*e[ee]+e[U]*e[z]*e[te]-e[j]*e[W]*e[te]-e[H]*e[z]*e[Q]+e[j]*e[Z]*e[Q],t[U]=e[U]*e[Z]*e[K]-e[H]*e[W]*e[K]-e[U]*e[z]*e[_]+e[j]*e[W]*e[_]+e[H]*e[z]*e[q]-e[j]*e[Z]*e[q],t[G]=e[W]*e[_]*e[$]-e[Z]*e[q]*e[$]-e[W]*e[J]*e[te]+e[G]*e[q]*e[te]+e[Z]*e[J]*e[Q]-e[G]*e[_]*e[Q],t[z]=e[H]*e[q]*e[$]-e[U]*e[_]*e[$]+e[U]*e[J]*e[te]-e[N]*e[q]*e[te]-e[H]*e[J]*e[Q]+e[N]*e[_]*e[Q],t[Z]=e[U]*e[Z]*e[$]-e[H]*e[W]*e[$]-e[U]*e[G]*e[te]+e[N]*e[W]*e[te]+e[H]*e[G]*e[Q]-e[N]*e[Z]*e[Q],t[W]=e[H]*e[W]*e[J]-e[U]*e[Z]*e[J]+e[U]*e[G]*e[_]-e[N]*e[W]*e[_]-e[H]*e[G]*e[q]+e[N]*e[Z]*e[q],t[J]=e[z]*e[q]*e[$]-e[W]*e[K]*e[$]+e[W]*e[J]*e[ee]-e[G]*e[q]*e[ee]-e[z]*e[J]*e[Q]+e[G]*e[K]*e[Q],t[K]=e[U]*e[K]*e[$]-e[j]*e[q]*e[$]-e[U]*e[J]*e[ee]+e[N]*e[q]*e[ee]+e[j]*e[J]*e[Q]-e[N]*e[K]*e[Q],t[_]=e[j]*e[W]*e[$]-e[U]*e[z]*e[$]+e[U]*e[G]*e[ee]-e[N]*e[W]*e[ee]-e[j]*e[G]*e[Q]+e[N]*e[z]*e[Q],t[q]=e[U]*e[z]*e[J]-e[j]*e[W]*e[J]-e[U]*e[G]*e[K]+e[N]*e[W]*e[K]+e[j]*e[G]*e[q]-e[N]*e[z]*e[q],t[$]=e[Z]*e[K]*e[$]-e[z]*e[_]*e[$]-e[Z]*e[J]*e[ee]+e[G]*e[_]*e[ee]+e[z]*e[J]*e[te]-e[G]*e[K]*e[te],t[ee]=e[j]*e[_]*e[$]-e[H]*e[K]*e[$]+e[H]*e[J]*e[ee]-e[N]*e[_]*e[ee]-e[j]*e[J]*e[te]+e[N]*e[K]*e[te],t[te]=e[H]*e[z]*e[$]-e[j]*e[Z]*e[$]-e[H]*e[G]*e[ee]+e[N]*e[Z]*e[ee]+e[j]*e[G]*e[te]-e[N]*e[z]*e[te],t[Q]=e[j]*e[Z]*e[J]-e[H]*e[z]*e[J]+e[H]*e[G]*e[K]-e[N]*e[Z]*e[K]-e[j]*e[G]*e[_]+e[N]*e[z]*e[_],e[N]=t[N]*s,e[j]=t[j]*s,e[H]=t[H]*s,e[U]=t[U]*s,e[G]=t[G]*s,e[z]=t[z]*s,e[Z]=t[Z]*s,e[W]=t[W]*s,e[J]=t[J]*s,e[K]=t[K]*s,e[_]=t[_]*s,e[q]=t[q]*s,e[$]=t[$]*s,e[ee]=t[ee]*s,e[te]=t[te]*s,e[Q]=t[Q]*s,this}determinant(){let e=this.values;return e[$]*e[K]*e[Z]*e[U]-e[J]*e[ee]*e[Z]*e[U]-e[$]*e[z]*e[_]*e[U]+e[G]*e[ee]*e[_]*e[U]+e[J]*e[z]*e[te]*e[U]-e[G]*e[K]*e[te]*e[U]-e[$]*e[K]*e[H]*e[W]+e[J]*e[ee]*e[H]*e[W]+e[$]*e[j]*e[_]*e[W]-e[N]*e[ee]*e[_]*e[W]-e[J]*e[j]*e[te]*e[W]+e[N]*e[K]*e[te]*e[W]+e[$]*e[z]*e[H]*e[q]-e[G]*e[ee]*e[H]*e[q]-e[$]*e[j]*e[Z]*e[q]+e[N]*e[ee]*e[Z]*e[q]+e[G]*e[j]*e[te]*e[q]-e[N]*e[z]*e[te]*e[q]-e[J]*e[z]*e[H]*e[Q]+e[G]*e[K]*e[H]*e[Q]+e[J]*e[j]*e[Z]*e[Q]-e[N]*e[K]*e[Z]*e[Q]-e[G]*e[j]*e[_]*e[Q]+e[N]*e[z]*e[_]*e[Q]}translate(e,t,i){let s=this.values;return s[U]+=e,s[W]+=t,s[q]+=i,this}copy(){return new xe().set(this.values)}projection(e,t,i,s){this.identity();let a=1/Math.tan(i*(Math.PI/180)/2),d=(t+e)/(e-t),n=2*t*e/(e-t),r=this.values;return r[N]=a/s,r[G]=0,r[J]=0,r[$]=0,r[j]=0,r[z]=a,r[K]=0,r[ee]=0,r[H]=0,r[Z]=0,r[_]=d,r[te]=-1,r[U]=0,r[W]=0,r[q]=n,r[Q]=0,this}ortho2d(e,t,i,s){return this.ortho(e,e+i,t,t+s,0,1)}ortho(e,t,i,s,a,d){this.identity();let n=2/(t-e),r=2/(s-i),h=-2/(d-a),o=-(t+e)/(t-e),l=-(s+i)/(s-i),c=-(d+a)/(d-a),u=this.values;return u[N]=n,u[G]=0,u[J]=0,u[$]=0,u[j]=0,u[z]=r,u[K]=0,u[ee]=0,u[H]=0,u[Z]=0,u[_]=h,u[te]=0,u[U]=o,u[W]=l,u[q]=c,u[Q]=1,this}multiply(e){let t=this.temp,i=this.values,s=e.values;return t[N]=i[N]*s[N]+i[j]*s[G]+i[H]*s[J]+i[U]*s[$],t[j]=i[N]*s[j]+i[j]*s[z]+i[H]*s[K]+i[U]*s[ee],t[H]=i[N]*s[H]+i[j]*s[Z]+i[H]*s[_]+i[U]*s[te],t[U]=i[N]*s[U]+i[j]*s[W]+i[H]*s[q]+i[U]*s[Q],t[G]=i[G]*s[N]+i[z]*s[G]+i[Z]*s[J]+i[W]*s[$],t[z]=i[G]*s[j]+i[z]*s[z]+i[Z]*s[K]+i[W]*s[ee],t[Z]=i[G]*s[H]+i[z]*s[Z]+i[Z]*s[_]+i[W]*s[te],t[W]=i[G]*s[U]+i[z]*s[W]+i[Z]*s[q]+i[W]*s[Q],t[J]=i[J]*s[N]+i[K]*s[G]+i[_]*s[J]+i[q]*s[$],t[K]=i[J]*s[j]+i[K]*s[z]+i[_]*s[K]+i[q]*s[ee],t[_]=i[J]*s[H]+i[K]*s[Z]+i[_]*s[_]+i[q]*s[te],t[q]=i[J]*s[U]+i[K]*s[W]+i[_]*s[q]+i[q]*s[Q],t[$]=i[$]*s[N]+i[ee]*s[G]+i[te]*s[J]+i[Q]*s[$],t[ee]=i[$]*s[j]+i[ee]*s[z]+i[te]*s[K]+i[Q]*s[ee],t[te]=i[$]*s[H]+i[ee]*s[Z]+i[te]*s[_]+i[Q]*s[te],t[Q]=i[$]*s[U]+i[ee]*s[W]+i[te]*s[q]+i[Q]*s[Q],this.set(this.temp)}multiplyLeft(e){let t=this.temp,i=this.values,s=e.values;return t[N]=s[N]*i[N]+s[j]*i[G]+s[H]*i[J]+s[U]*i[$],t[j]=s[N]*i[j]+s[j]*i[z]+s[H]*i[K]+s[U]*i[ee],t[H]=s[N]*i[H]+s[j]*i[Z]+s[H]*i[_]+s[U]*i[te],t[U]=s[N]*i[U]+s[j]*i[W]+s[H]*i[q]+s[U]*i[Q],t[G]=s[G]*i[N]+s[z]*i[G]+s[Z]*i[J]+s[W]*i[$],t[z]=s[G]*i[j]+s[z]*i[z]+s[Z]*i[K]+s[W]*i[ee],t[Z]=s[G]*i[H]+s[z]*i[Z]+s[Z]*i[_]+s[W]*i[te],t[W]=s[G]*i[U]+s[z]*i[W]+s[Z]*i[q]+s[W]*i[Q],t[J]=s[J]*i[N]+s[K]*i[G]+s[_]*i[J]+s[q]*i[$],t[K]=s[J]*i[j]+s[K]*i[z]+s[_]*i[K]+s[q]*i[ee],t[_]=s[J]*i[H]+s[K]*i[Z]+s[_]*i[_]+s[q]*i[te],t[q]=s[J]*i[U]+s[K]*i[W]+s[_]*i[q]+s[q]*i[Q],t[$]=s[$]*i[N]+s[ee]*i[G]+s[te]*i[J]+s[Q]*i[$],t[ee]=s[$]*i[j]+s[ee]*i[z]+s[te]*i[K]+s[Q]*i[ee],t[te]=s[$]*i[H]+s[ee]*i[Z]+s[te]*i[_]+s[Q]*i[te],t[Q]=s[$]*i[U]+s[ee]*i[W]+s[te]*i[q]+s[Q]*i[Q],this.set(this.temp)}lookAt(e,t,i){xe.initTemps();let s=xe.xAxis,a=xe.yAxis,d=xe.zAxis;d.setFrom(t).normalize(),s.setFrom(t).normalize(),s.cross(i).normalize(),a.setFrom(s).cross(d).normalize(),this.identity();let n=this.values;return n[N]=s.x,n[j]=s.y,n[H]=s.z,n[G]=a.x,n[z]=a.y,n[Z]=a.z,n[J]=-d.x,n[K]=-d.y,n[_]=-d.z,xe.tmpMatrix.identity(),xe.tmpMatrix.values[U]=-e.x,xe.tmpMatrix.values[W]=-e.y,xe.tmpMatrix.values[q]=-e.z,this.multiply(xe.tmpMatrix),this}static initTemps(){xe.xAxis===null&&(xe.xAxis=new Me),xe.yAxis===null&&(xe.yAxis=new Me),xe.zAxis===null&&(xe.zAxis=new Me)}},_e=xe;_e.xAxis=null,_e.yAxis=null,_e.zAxis=null,_e.tmpMatrix=new xe;var xs=class{constructor(e,t){this.position=new Me(0,0,0),this.direction=new Me(0,0,-1),this.up=new Me(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new _e,this.inverseProjectionView=new _e,this.projection=new _e,this.view=new _e,this.viewportWidth=e,this.viewportHeight=t,this.update()}update(){let e=this.projection,t=this.view,i=this.projectionView,s=this.inverseProjectionView,a=this.zoom,d=this.viewportWidth,n=this.viewportHeight;e.ortho(a*(-d/2),a*(d/2),a*(-n/2),a*(n/2),this.near,this.far),t.lookAt(this.position,this.direction,this.up),i.set(e.values),i.multiply(t),s.set(i.values).invert()}screenToWorld(e,t,i){let s=e.x,a=i-e.y-1;return e.x=2*s/t-1,e.y=2*a/i-1,e.z=2*e.z-1,e.project(this.inverseProjectionView),e}worldToScreen(e,t,i){return e.project(this.projectionView),e.x=t*(e.x+1)/2,e.y=i*(e.y+1)/2,e.z=(e.z+1)/2,e}setViewport(e,t){this.viewportWidth=e,this.viewportHeight=t}},xt=class{constructor(e){this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.element=e,this.setupCallbacks(e)}setupCallbacks(e){let t=n=>{if(n instanceof MouseEvent){let r=e.getBoundingClientRect();this.mouseX=n.clientX-r.left,this.mouseY=n.clientY-r.top,this.buttonDown=!0,this.listeners.map(h=>{h.down&&h.down(this.mouseX,this.mouseY)}),document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)}},i=n=>{if(n instanceof MouseEvent){let r=e.getBoundingClientRect();this.mouseX=n.clientX-r.left,this.mouseY=n.clientY-r.top,this.listeners.map(h=>{this.buttonDown?h.dragged&&h.dragged(this.mouseX,this.mouseY):h.moved&&h.moved(this.mouseX,this.mouseY)})}},s=n=>{if(n instanceof MouseEvent){let r=e.getBoundingClientRect();this.mouseX=n.clientX-r.left,this.mouseY=n.clientY-r.top,this.buttonDown=!1,this.listeners.map(h=>{h.up&&h.up(this.mouseX,this.mouseY)}),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)}},a=n=>{n.preventDefault();let r=n.deltaY;n.deltaMode==WheelEvent.DOM_DELTA_LINE&&(r*=8),n.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(r*=24),this.listeners.map(h=>{h.wheel&&h.wheel(n.deltaY)})};e.addEventListener("mousedown",t,!0),e.addEventListener("mousemove",i,!0),e.addEventListener("mouseup",s,!0),e.addEventListener("wheel",a,!0),e.addEventListener("touchstart",n=>{if(!this.touch0||!this.touch1){var r=n.changedTouches;let h=r.item(0),o=e.getBoundingClientRect(),l=h.clientX-o.left,c=h.clientY-o.top,u=new ws(h.identifier,l,c);if(this.mouseX=l,this.mouseY=c,this.buttonDown=!0,!this.touch0)this.touch0=u,this.listeners.map(m=>{m.down&&m.down(u.x,u.y)});else if(!this.touch1){this.touch1=u;let m=this.touch1.x-this.touch0.x,f=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(m*m+f*f),this.listeners.map(g=>{g.zoom&&g.zoom(this.initialPinchDistance,this.initialPinchDistance)})}}n.preventDefault()},!1),e.addEventListener("touchmove",n=>{if(this.touch0){var r=n.changedTouches;let l=e.getBoundingClientRect();for(var h=0;h<r.length;h++){var o=r[h];let c=o.clientX-l.left,u=o.clientY-l.top;this.touch0.identifier===o.identifier&&(this.touch0.x=this.mouseX=c,this.touch0.y=this.mouseY=u,this.listeners.map(m=>{m.dragged&&m.dragged(c,u)})),this.touch1&&this.touch1.identifier===o.identifier&&(this.touch1.x=this.mouseX=c,this.touch1.y=this.mouseY=u)}if(this.touch0&&this.touch1){let c=this.touch1.x-this.touch0.x,u=this.touch1.x-this.touch0.x,m=Math.sqrt(c*c+u*u);this.listeners.map(f=>{f.zoom&&f.zoom(this.initialPinchDistance,m)})}}n.preventDefault()},!1);let d=n=>{if(this.touch0){var r=n.changedTouches;let l=e.getBoundingClientRect();for(var h=0;h<r.length;h++){var o=r[h];let c=o.clientX-l.left,u=o.clientY-l.top;if(this.touch0.identifier===o.identifier)if(this.touch0=null,this.mouseX=c,this.mouseY=u,this.listeners.map(m=>{m.up&&m.up(c,u)}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map(m=>{m.down&&m.down(this.touch0.x,this.touch0.y)});else{this.buttonDown=!1;break}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}n.preventDefault()};e.addEventListener("touchend",d,!1),e.addEventListener("touchcancel",d)}addListener(e){this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}},ws=class{constructor(e,t,i){this.identifier=e,this.x=t,this.y=i}},fr=class{constructor(e,t){this.canvas=e,this.camera=t;let i=0,s=0,a=0,d=0,n=0,r=0,h=0,o=0;new xt(e).addListener({down:(l,c)=>{i=t.position.x,s=t.position.y,d=r=l,n=h=c,o=t.zoom},dragged:(l,c)=>{let u=l-d,m=c-n,f=t.screenToWorld(new Me(0,0),e.clientWidth,e.clientHeight),g=t.screenToWorld(new Me(u,m),e.clientWidth,e.clientHeight).sub(f);t.position.set(i-g.x,s-g.y,0),t.update(),r=l,h=c},wheel:l=>{let c=l/200*t.zoom,u=t.zoom+c;if(u>0){let m=0,f=0;if(l<0)m=r,f=h;else{let v=new Me(e.clientWidth/2+15,e.clientHeight/2),p=r-v.x,b=e.clientHeight-1-h-v.y;m=v.x-p,f=e.clientHeight-1-v.y+b}let g=t.screenToWorld(new Me(m,f),e.clientWidth,e.clientHeight);t.zoom=u,t.update();let x=t.screenToWorld(new Me(m,f),e.clientWidth,e.clientHeight);t.position.add(g.sub(x)),t.update()}},zoom:(l,c)=>{let u=l/c;t.zoom=o*u},up:(l,c)=>{r=l,h=c},moved:(l,c)=>{r=l,h=c}})}},ue=class{constructor(e,t,i){this.vertexShader=t,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(2*2),this.tmp3x3=new Float32Array(3*3),this.tmp4x4=new Float32Array(4*4),this.vsSource=t,this.fsSource=i,this.context=e instanceof we?e:new we(e),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let e=this.context.gl;try{this.vs=this.compileShader(e.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(e.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(e,t){let i=this.context.gl,s=i.createShader(e);if(i.shaderSource(s,t),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS)){let a="Couldn't compile shader: "+i.getShaderInfoLog(s);if(i.deleteShader(s),!i.isContextLost())throw new Error(a)}return s}compileProgram(e,t){let i=this.context.gl,s=i.createProgram();if(i.attachShader(s,e),i.attachShader(s,t),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS)){let a="Couldn't compile shader program: "+i.getProgramInfoLog(s);if(i.deleteProgram(s),!i.isContextLost())throw new Error(a)}return s}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(e,t){this.context.gl.uniform1i(this.getUniformLocation(e),t)}setUniformf(e,t){this.context.gl.uniform1f(this.getUniformLocation(e),t)}setUniform2f(e,t,i){this.context.gl.uniform2f(this.getUniformLocation(e),t,i)}setUniform3f(e,t,i,s){this.context.gl.uniform3f(this.getUniformLocation(e),t,i,s)}setUniform4f(e,t,i,s,a){this.context.gl.uniform4f(this.getUniformLocation(e),t,i,s,a)}setUniform2x2f(e,t){let i=this.context.gl;this.tmp2x2.set(t),i.uniformMatrix2fv(this.getUniformLocation(e),!1,this.tmp2x2)}setUniform3x3f(e,t){let i=this.context.gl;this.tmp3x3.set(t),i.uniformMatrix3fv(this.getUniformLocation(e),!1,this.tmp3x3)}setUniform4x4f(e,t){let i=this.context.gl;this.tmp4x4.set(t),i.uniformMatrix4fv(this.getUniformLocation(e),!1,this.tmp4x4)}getUniformLocation(e){let t=this.context.gl,i=t.getUniformLocation(this.program,e);if(!i&&!t.isContextLost())throw new Error(`Couldn't find location for uniform ${e}`);return i}getAttributeLocation(e){let t=this.context.gl,i=t.getAttribLocation(this.program,e);if(i==-1&&!t.isContextLost())throw new Error(`Couldn't find location for attribute ${e}`);return i}dispose(){this.context.removeRestorable(this);let e=this.context.gl;this.vs&&(e.deleteShader(this.vs),this.vs=null),this.fs&&(e.deleteShader(this.fs),this.fs=null),this.program&&(e.deleteProgram(this.program),this.program=null)}static newColoredTextured(e){let t=`
				attribute vec4 ${ue.POSITION};
				attribute vec4 ${ue.COLOR};
				attribute vec2 ${ue.TEXCOORDS};
				uniform mat4 ${ue.MVP_MATRIX};
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = ${ue.COLOR};
					v_texCoords = ${ue.TEXCOORDS};
					gl_Position = ${ue.MVP_MATRIX} * ${ue.POSITION};
				}
			`,i=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`;return new ue(e,t,i)}static newTwoColoredTextured(e){let t=`
				attribute vec4 ${ue.POSITION};
				attribute vec4 ${ue.COLOR};
				attribute vec4 ${ue.COLOR2};
				attribute vec2 ${ue.TEXCOORDS};
				uniform mat4 ${ue.MVP_MATRIX};
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = ${ue.COLOR};
					v_dark = ${ue.COLOR2};
					v_texCoords = ${ue.TEXCOORDS};
					gl_Position = ${ue.MVP_MATRIX} * ${ue.POSITION};
				}
			`,i=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`;return new ue(e,t,i)}static newColored(e){let t=`
				attribute vec4 ${ue.POSITION};
				attribute vec4 ${ue.COLOR};
				uniform mat4 ${ue.MVP_MATRIX};
				varying vec4 v_color;

				void main () {
					v_color = ${ue.COLOR};
					gl_Position = ${ue.MVP_MATRIX} * ${ue.POSITION};
				}
			`,i=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`;return new ue(e,t,i)}},be=ue;be.MVP_MATRIX="u_projTrans",be.POSITION="a_position",be.COLOR="a_color",be.COLOR2="a_color2",be.TEXCOORDS="a_texCoords",be.SAMPLER="u_texture";var Ri=class{constructor(e,t,i,s){this.attributes=t,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=e instanceof we?e:new we(e),this.elementsPerVertex=0;for(let a=0;a<t.length;a++)this.elementsPerVertex+=t[a].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(s),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(e){this.dirtyVertices=!0,this.verticesLength=e}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(e){this.dirtyIndices=!0,this.indicesLength=e}getIndices(){return this.indices}getVertexSizeInFloats(){let e=0;for(var t=0;t<this.attributes.length;t++)e+=this.attributes[t].numElements;return e}setVertices(e){if(this.dirtyVertices=!0,e.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(e,0),this.verticesLength=e.length}setIndices(e){if(this.dirtyIndices=!0,e.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(e,0),this.indicesLength=e.length}draw(e,t){this.drawWithOffset(e,t,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(e,t,i,s){let a=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(e),this.indicesLength>0?a.drawElements(t,s,a.UNSIGNED_SHORT,i*2):a.drawArrays(t,i,s),this.unbind(e)}bind(e){let t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let s=0;s<this.attributes.length;s++){let a=this.attributes[s],d=e.getAttributeLocation(a.name);t.enableVertexAttribArray(d),t.vertexAttribPointer(d,a.numElements,t.FLOAT,!1,this.elementsPerVertex*4,i*4),i+=a.numElements}this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(e){let t=this.context.gl;for(let i=0;i<this.attributes.length;i++){let s=this.attributes[i],a=e.getAttributeLocation(s.name);t.disableVertexAttribArray(a)}t.bindBuffer(t.ARRAY_BUFFER,null),this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}update(){let e=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),e.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=e.createBuffer()),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),e.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let e=this.context.gl;e.deleteBuffer(this.verticesBuffer),e.deleteBuffer(this.indicesBuffer)}},lt=class{constructor(e,t,i){this.name=e,this.type=t,this.numElements=i}},Ft=class extends lt{constructor(){super(be.POSITION,He.Float,2)}},mr=class extends lt{constructor(){super(be.POSITION,He.Float,3)}},Fi=class extends lt{constructor(e=0){super(be.TEXCOORDS+(e==0?"":e),He.Float,2)}},Lt=class extends lt{constructor(){super(be.COLOR,He.Float,4)}},bs=class extends lt{constructor(){super(be.COLOR2,He.Float,4)}},He;(function(e){e[e.Float=0]="Float"})(He||(He={}));var Li=class{constructor(e,t=!0,i=10920){if(this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e instanceof we?e:new we(e);let s=t?[new Ft,new Lt,new Fi,new bs]:[new Ft,new Lt,new Fi];this.mesh=new Ri(e,s,i,i*3);let a=this.context.gl;this.srcColorBlend=a.SRC_ALPHA,this.srcAlphaBlend=a.ONE,this.dstBlend=a.ONE_MINUS_SRC_ALPHA}begin(e){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=e,this.lastTexture=null,this.isDrawing=!0;let t=this.context.gl;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(e,t,i){this.srcColorBlend==e&&this.srcAlphaBlend==t&&this.dstBlend==i||(this.srcColorBlend=e,this.srcAlphaBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(e,i,t,i)))}draw(e,t,i){e!=this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+t.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let s=this.mesh.numVertices();this.mesh.getVertices().set(t,this.verticesLength),this.verticesLength+=t.length,this.mesh.setVerticesLength(this.verticesLength);let a=this.mesh.getIndices();for(let d=this.indicesLength,n=0;n<i.length;d++,n++)a[d]=i[n]+s;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let e=this.context.gl;e.disable(e.BLEND)}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose()}},Xi=class{constructor(e,t=10920){if(this.isDrawing=!1,this.shapeType=Ae.Filled,this.color=new O(1,1,1,1),this.vertexIndex=0,this.tmp=new Ne,t>10920)throw new Error("Can't have more than 10920 triangles per batch: "+t);this.context=e instanceof we?e:new we(e),this.mesh=new Ri(e,[new Ft,new Lt],t,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(e){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=e,this.vertexIndex=0,this.isDrawing=!0;let t=this.context.gl;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(e,t,i){this.srcColorBlend=e,this.srcAlphaBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(e,i,t,i))}setColor(e){this.color.setFromColor(e)}setColorWith(e,t,i,s){this.color.set(e,t,i,s)}point(e,t,i=null){this.check(Ae.Point,1),i===null&&(i=this.color),this.vertex(e,t,i)}line(e,t,i,s,a=null){this.check(Ae.Line,2);let d=this.mesh.getVertices(),n=this.vertexIndex;a===null&&(a=this.color),this.vertex(e,t,a),this.vertex(i,s,a)}triangle(e,t,i,s,a,d,n,r=null,h=null,o=null){this.check(e?Ae.Filled:Ae.Line,3);let l=this.mesh.getVertices(),c=this.vertexIndex;r===null&&(r=this.color),h===null&&(h=this.color),o===null&&(o=this.color),e?(this.vertex(t,i,r),this.vertex(s,a,h),this.vertex(d,n,o)):(this.vertex(t,i,r),this.vertex(s,a,h),this.vertex(s,a,r),this.vertex(d,n,h),this.vertex(d,n,r),this.vertex(t,i,h))}quad(e,t,i,s,a,d,n,r,h,o=null,l=null,c=null,u=null){this.check(e?Ae.Filled:Ae.Line,3);let m=this.mesh.getVertices(),f=this.vertexIndex;o===null&&(o=this.color),l===null&&(l=this.color),c===null&&(c=this.color),u===null&&(u=this.color),e?(this.vertex(t,i,o),this.vertex(s,a,l),this.vertex(d,n,c),this.vertex(d,n,c),this.vertex(r,h,u),this.vertex(t,i,o)):(this.vertex(t,i,o),this.vertex(s,a,l),this.vertex(s,a,l),this.vertex(d,n,c),this.vertex(d,n,c),this.vertex(r,h,u),this.vertex(r,h,u),this.vertex(t,i,o))}rect(e,t,i,s,a,d=null){this.quad(e,t,i,t+s,i,t+s,i+a,t,i+a,d,d,d,d)}rectLine(e,t,i,s,a,d,n=null){this.check(e?Ae.Filled:Ae.Line,8),n===null&&(n=this.color);let r=this.tmp.set(a-i,t-s);r.normalize(),d*=.5;let h=r.x*d,o=r.y*d;e?(this.vertex(t+h,i+o,n),this.vertex(t-h,i-o,n),this.vertex(s+h,a+o,n),this.vertex(s-h,a-o,n),this.vertex(s+h,a+o,n),this.vertex(t-h,i-o,n)):(this.vertex(t+h,i+o,n),this.vertex(t-h,i-o,n),this.vertex(s+h,a+o,n),this.vertex(s-h,a-o,n),this.vertex(s+h,a+o,n),this.vertex(t+h,i+o,n),this.vertex(s-h,a-o,n),this.vertex(t-h,i-o,n))}x(e,t,i){this.line(e-i,t-i,e+i,t+i),this.line(e-i,t+i,e+i,t-i)}polygon(e,t,i,s=null){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Ae.Line,i*2),s===null&&(s=this.color);let a=this.mesh.getVertices(),d=this.vertexIndex;t<<=1,i<<=1;let n=e[t],r=e[t+1],h=t+i;for(let o=t,l=t+i-2;o<l;o+=2){let c=e[o],u=e[o+1],m=0,f=0;o+2>=h?(m=n,f=r):(m=e[o+2],f=e[o+3]),this.vertex(c,u,s),this.vertex(m,f,s)}}circle(e,t,i,s,a=null,d=0){if(d===0&&(d=Math.max(1,6*F.cbrt(s)|0)),d<=0)throw new Error("segments must be > 0.");a===null&&(a=this.color);let n=2*F.PI/d,r=Math.cos(n),h=Math.sin(n),o=s,l=0;if(e){this.check(Ae.Filled,d*3+3),d--;for(let u=0;u<d;u++){this.vertex(t,i,a),this.vertex(t+o,i+l,a);let m=o;o=r*o-h*l,l=h*m+r*l,this.vertex(t+o,i+l,a)}this.vertex(t,i,a),this.vertex(t+o,i+l,a)}else{this.check(Ae.Line,d*2+2);for(let u=0;u<d;u++){this.vertex(t+o,i+l,a);let m=o;o=r*o-h*l,l=h*m+r*l,this.vertex(t+o,i+l,a)}this.vertex(t+o,i+l,a)}let c=o;o=s,l=0,this.vertex(t+o,i+l,a)}curve(e,t,i,s,a,d,n,r,h,o=null){this.check(Ae.Line,h*2+2),o===null&&(o=this.color);let l=1/h,c=l*l,u=l*l*l,m=3*l,f=3*c,g=6*c,x=6*u,v=e-i*2+a,p=t-s*2+d,b=(i-a)*3-e+n,w=(s-d)*3-t+r,y=e,T=t,A=(i-e)*m+v*f+b*u,E=(s-t)*m+p*f+w*u,I=v*g+b*x,Y=p*g+w*x,P=b*x,X=w*x;for(;h-- >0;)this.vertex(y,T,o),y+=A,T+=E,A+=I,E+=Y,I+=P,Y+=X,this.vertex(y,T,o);this.vertex(y,T,o),this.vertex(n,r,o)}vertex(e,t,i){let s=this.vertexIndex,a=this.mesh.getVertices();a[s++]=e,a[s++]=t,a[s++]=i.r,a[s++]=i.g,a[s++]=i.b,a[s++]=i.a,this.vertexIndex=s}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let e=this.context.gl;e.disable(e.BLEND),this.isDrawing=!1}flush(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)}check(e,t){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==e)if(this.mesh.maxVertices()-this.mesh.numVertices()<t)this.flush();else return;else this.flush(),this.shapeType=e}dispose(){this.mesh.dispose()}},Ae;(function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Filled=4]="Filled"})(Ae||(Ae={}));var Xt=class{constructor(e){this.boneLineColor=new O(1,0,0,1),this.boneOriginColor=new O(0,1,0,1),this.attachmentLineColor=new O(0,0,1,.5),this.triangleLineColor=new O(1,.64,0,.5),this.pathColor=new O().setFromString("FF7F00"),this.clipColor=new O(.8,0,0,2),this.aabbColor=new O(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new us,this.temp=new Array,this.vertices=V.newFloatArray(2*1024),this.context=e instanceof we?e:new we(e)}draw(e,t,i=null){let s=t.x,a=t.y,d=this.context.gl,n=this.premultipliedAlpha?d.ONE:d.SRC_ALPHA;e.setBlendMode(n,d.ONE,d.ONE_MINUS_SRC_ALPHA);let r=t.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(let h=0,o=r.length;h<o;h++){let l=r[h];if(i&&i.indexOf(l.data.name)>-1||!l.parent)continue;let c=s+l.data.length*l.a+l.worldX,u=a+l.data.length*l.c+l.worldY;e.rectLine(!0,s+l.worldX,a+l.worldY,c,u,this.boneWidth*this.scale)}this.drawSkeletonXY&&e.x(s,a,4*this.scale)}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);let h=t.slots;for(let o=0,l=h.length;o<l;o++){let c=h[o],u=c.getAttachment();if(u instanceof ae){let m=u,f=this.vertices;m.computeWorldVertices(c.bone,f,0,2),e.line(f[0],f[1],f[2],f[3]),e.line(f[2],f[3],f[4],f[5]),e.line(f[4],f[5],f[6],f[7]),e.line(f[6],f[7],f[0],f[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let h=t.slots;for(let o=0,l=h.length;o<l;o++){let c=h[o];if(!c.bone.active)continue;let u=c.getAttachment();if(!(u instanceof je))continue;let m=u,f=this.vertices;m.computeWorldVertices(c,0,m.worldVerticesLength,f,0,2);let g=m.triangles,x=m.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(let v=0,p=g.length;v<p;v+=3){let b=g[v]*2,w=g[v+1]*2,y=g[v+2]*2;e.triangle(!1,f[b],f[b+1],f[w],f[w+1],f[y],f[y+1])}}if(this.drawMeshHull&&x>0){e.setColor(this.attachmentLineColor),x=(x>>1)*2;let v=f[x-2],p=f[x-1];for(let b=0,w=x;b<w;b+=2){let y=f[b],T=f[b+1];e.line(y,T,v,p),v=y,p=T}}}}if(this.drawBoundingBoxes){let h=this.bounds;h.update(t,!0),e.setColor(this.aabbColor),e.rect(!1,h.minX,h.minY,h.getWidth(),h.getHeight());let o=h.polygons,l=h.boundingBoxes;for(let c=0,u=o.length;c<u;c++){let m=o[c];e.setColor(l[c].color),e.polygon(m,0,m.length)}}if(this.drawPaths){let h=t.slots;for(let o=0,l=h.length;o<l;o++){let c=h[o];if(!c.bone.active)continue;let u=c.getAttachment();if(!(u instanceof et))continue;let m=u,f=m.worldVerticesLength,g=this.temp=V.setArraySize(this.temp,f,0);m.computeWorldVertices(c,0,f,g,0,2);let x=this.pathColor,v=g[2],p=g[3],b=0,w=0;if(m.closed){e.setColor(x);let y=g[0],T=g[1],A=g[f-2],E=g[f-1];b=g[f-4],w=g[f-3],e.curve(v,p,y,T,A,E,b,w,32),e.setColor(Xt.LIGHT_GRAY),e.line(v,p,y,T),e.line(b,w,A,E)}f-=4;for(let y=4;y<f;y+=6){let T=g[y],A=g[y+1],E=g[y+2],I=g[y+3];b=g[y+4],w=g[y+5],e.setColor(x),e.curve(v,p,T,A,E,I,b,w,32),e.setColor(Xt.LIGHT_GRAY),e.line(v,p,T,A),e.line(b,w,E,I),v=b,p=w}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(let h=0,o=r.length;h<o;h++){let l=r[h];i&&i.indexOf(l.data.name)>-1||e.circle(!0,s+l.worldX,a+l.worldY,3*this.scale,Xt.GREEN,8)}}if(this.drawClipping){let h=t.slots;e.setColor(this.clipColor);for(let o=0,l=h.length;o<l;o++){let c=h[o];if(!c.bone.active)continue;let u=c.getAttachment();if(!(u instanceof gt))continue;let m=u,f=m.worldVerticesLength,g=this.temp=V.setArraySize(this.temp,f,0);m.computeWorldVertices(c,0,f,g,0,2);for(let x=0,v=g.length;x<v;x+=2){let p=g[x],b=g[x+1],w=g[(x+2)%g.length],y=g[(x+3)%g.length];e.line(p,b,w,y)}}}}dispose(){}},Bt=Xt;Bt.LIGHT_GRAY=new O(192/255,192/255,192/255,1),Bt.GREEN=new O(0,1,0,1);var gr=class{constructor(e,t,i){this.vertices=e,this.numVertices=t,this.numFloats=i}},vs=class{constructor(e,t=!0){this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new O,this.tempColor2=new O,this.vertexSize=2+2+4,this.twoColorTint=!1,this.renderable=new gr(null,0,0),this.clipper=new It,this.temp=new Ne,this.temp2=new Ne,this.temp3=new O,this.temp4=new O,this.twoColorTint=t,t&&(this.vertexSize+=4),this.vertices=V.newFloatArray(this.vertexSize*1024)}draw(e,t,i=-1,s=-1){let a=this.clipper,d=this.premultipliedAlpha,n=this.twoColorTint,r=null,h=this.temp,o=this.temp2,l=this.temp3,c=this.temp4,u=this.renderable,m=null,f=null,g=t.drawOrder,x=null,v=t.color,p=n?12:8,b=!1;i==-1&&(b=!0);for(let w=0,y=g.length;w<y;w++){let T=a.isClipping()?2:p,A=g[w];if(!A.bone.active){a.clipEndWithSlot(A);continue}if(i>=0&&i==A.data.index&&(b=!0),!b){a.clipEndWithSlot(A);continue}s>=0&&s==A.data.index&&(b=!1);let E=A.getAttachment(),I=null;if(E instanceof ae){let Y=E;u.vertices=this.vertices,u.numVertices=4,u.numFloats=T<<2,Y.computeWorldVertices(A.bone,u.vertices,0,T),f=vs.QUAD_TRIANGLES,m=Y.uvs,I=Y.region.renderObject.page.texture,x=Y.color}else if(E instanceof je){let Y=E;u.vertices=this.vertices,u.numVertices=Y.worldVerticesLength>>1,u.numFloats=u.numVertices*T,u.numFloats>u.vertices.length&&(u.vertices=this.vertices=V.newFloatArray(u.numFloats)),Y.computeWorldVertices(A,0,Y.worldVerticesLength,u.vertices,0,T),f=Y.triangles,I=Y.region.renderObject.page.texture,m=Y.uvs,x=Y.color}else if(E instanceof gt){let Y=E;a.clipStart(A,Y);continue}else{a.clipEndWithSlot(A);continue}if(I){let Y=A.color,P=this.tempColor;P.r=v.r*Y.r*x.r,P.g=v.g*Y.g*x.g,P.b=v.b*Y.b*x.b,P.a=v.a*Y.a*x.a,d&&(P.r*=P.a,P.g*=P.a,P.b*=P.a);let X=this.tempColor2;A.darkColor?(d?(X.r=A.darkColor.r*P.a,X.g=A.darkColor.g*P.a,X.b=A.darkColor.b*P.a):X.setFromColor(A.darkColor),X.a=d?1:0):X.set(0,0,0,1);let B=A.data.blendMode;if(B!=r&&(r=B,e.setBlendMode(Rt.getSourceColorGLBlendMode(r,d),Rt.getSourceAlphaGLBlendMode(r),Rt.getDestGLBlendMode(r))),a.isClipping()){a.clipTriangles(u.vertices,u.numFloats,f,f.length,m,P,X,n);let C=new Float32Array(a.clippedVertices),k=a.clippedTriangles;if(this.vertexEffect){let D=this.vertexEffect,R=C;if(n)for(let L=0,se=C.length;L<se;L+=p)h.x=R[L],h.y=R[L+1],l.set(R[L+2],R[L+3],R[L+4],R[L+5]),o.x=R[L+6],o.y=R[L+7],c.set(R[L+8],R[L+9],R[L+10],R[L+11]),D.transform(h,o,l,c),R[L]=h.x,R[L+1]=h.y,R[L+2]=l.r,R[L+3]=l.g,R[L+4]=l.b,R[L+5]=l.a,R[L+6]=o.x,R[L+7]=o.y,R[L+8]=c.r,R[L+9]=c.g,R[L+10]=c.b,R[L+11]=c.a;else for(let L=0,se=C.length;L<se;L+=p)h.x=R[L],h.y=R[L+1],l.set(R[L+2],R[L+3],R[L+4],R[L+5]),o.x=R[L+6],o.y=R[L+7],c.set(0,0,0,0),D.transform(h,o,l,c),R[L]=h.x,R[L+1]=h.y,R[L+2]=l.r,R[L+3]=l.g,R[L+4]=l.b,R[L+5]=l.a,R[L+6]=o.x,R[L+7]=o.y}e.draw(I,C,k)}else{let C=u.vertices;if(this.vertexEffect){let D=this.vertexEffect;if(n)for(let R=0,L=0,se=u.numFloats;R<se;R+=p,L+=2)h.x=C[R],h.y=C[R+1],o.x=m[L],o.y=m[L+1],l.setFromColor(P),c.setFromColor(X),D.transform(h,o,l,c),C[R]=h.x,C[R+1]=h.y,C[R+2]=l.r,C[R+3]=l.g,C[R+4]=l.b,C[R+5]=l.a,C[R+6]=o.x,C[R+7]=o.y,C[R+8]=c.r,C[R+9]=c.g,C[R+10]=c.b,C[R+11]=c.a;else for(let R=0,L=0,se=u.numFloats;R<se;R+=p,L+=2)h.x=C[R],h.y=C[R+1],o.x=m[L],o.y=m[L+1],l.setFromColor(P),c.set(0,0,0,0),D.transform(h,o,l,c),C[R]=h.x,C[R+1]=h.y,C[R+2]=l.r,C[R+3]=l.g,C[R+4]=l.b,C[R+5]=l.a,C[R+6]=o.x,C[R+7]=o.y}else if(n)for(let D=2,R=0,L=u.numFloats;D<L;D+=p,R+=2)C[D]=P.r,C[D+1]=P.g,C[D+2]=P.b,C[D+3]=P.a,C[D+4]=m[R],C[D+5]=m[R+1],C[D+6]=X.r,C[D+7]=X.g,C[D+8]=X.b,C[D+9]=X.a;else for(let D=2,R=0,L=u.numFloats;D<L;D+=p,R+=2)C[D]=P.r,C[D+1]=P.g,C[D+2]=P.b,C[D+3]=P.a,C[D+4]=m[R],C[D+5]=m[R+1];let k=u.vertices.subarray(0,u.numFloats);e.draw(I,k,f)}}a.clipEndWithSlot(A)}a.clipEnd()}},Bi=vs;Bi.QUAD_TRIANGLES=[0,1,2,2,3,0];var S=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Pt=[0,1,2,2,3,0],Vt=new O(1,1,1,1),Pi=class{constructor(e,t,i=!0){this.twoColorTint=!1,this.canvas=e,this.context=t instanceof we?t:new we(t),this.twoColorTint=i,this.camera=new xs(e.width,e.height),this.batcherShader=i?be.newTwoColoredTextured(this.context):be.newColoredTextured(this.context),this.batcher=new Li(this.context,i),this.shapesShader=be.newColored(this.context),this.shapes=new Xi(this.context),this.skeletonRenderer=new Bi(this.context,i),this.skeletonDebugRenderer=new Bt(this.context)}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(e,t=!1,i=-1,s=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=t,this.skeletonRenderer.draw(this.batcher,e,i,s)}drawSkeletonDebug(e,t=!1,i=null){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=t,this.skeletonDebugRenderer.draw(this.shapes,e,i)}drawTexture(e,t,i,s,a,d=null){this.enableRenderer(this.batcher),d===null&&(d=Vt);var n=0;S[n++]=t,S[n++]=i,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=0,S[n++]=1,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n++]=0),S[n++]=t+s,S[n++]=i,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=1,S[n++]=1,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n++]=0),S[n++]=t+s,S[n++]=i+a,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=1,S[n++]=0,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n++]=0),S[n++]=t,S[n++]=i+a,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=0,S[n++]=0,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n]=0),this.batcher.draw(e,S,Pt)}drawTextureUV(e,t,i,s,a,d,n,r,h,o=null){this.enableRenderer(this.batcher),o===null&&(o=Vt);var l=0;S[l++]=t,S[l++]=i,S[l++]=o.r,S[l++]=o.g,S[l++]=o.b,S[l++]=o.a,S[l++]=d,S[l++]=n,this.twoColorTint&&(S[l++]=0,S[l++]=0,S[l++]=0,S[l++]=0),S[l++]=t+s,S[l++]=i,S[l++]=o.r,S[l++]=o.g,S[l++]=o.b,S[l++]=o.a,S[l++]=r,S[l++]=n,this.twoColorTint&&(S[l++]=0,S[l++]=0,S[l++]=0,S[l++]=0),S[l++]=t+s,S[l++]=i+a,S[l++]=o.r,S[l++]=o.g,S[l++]=o.b,S[l++]=o.a,S[l++]=r,S[l++]=h,this.twoColorTint&&(S[l++]=0,S[l++]=0,S[l++]=0,S[l++]=0),S[l++]=t,S[l++]=i+a,S[l++]=o.r,S[l++]=o.g,S[l++]=o.b,S[l++]=o.a,S[l++]=d,S[l++]=h,this.twoColorTint&&(S[l++]=0,S[l++]=0,S[l++]=0,S[l]=0),this.batcher.draw(e,S,Pt)}drawTextureRotated(e,t,i,s,a,d,n,r,h=null){this.enableRenderer(this.batcher),h===null&&(h=Vt);let o=t+d,l=i+n,c=-d,u=-n,m=s-d,f=a-n,g=c,x=u,v=c,p=f,b=m,w=f,y=m,T=u,A=0,E=0,I=0,Y=0,P=0,X=0,B=0,C=0;if(r!=0){let D=F.cosDeg(r),R=F.sinDeg(r);A=D*g-R*x,E=R*g+D*x,B=D*v-R*p,C=R*v+D*p,P=D*b-R*w,X=R*b+D*w,I=P+(A-B),Y=X+(E-C)}else A=g,E=x,B=v,C=p,P=b,X=w,I=y,Y=T;A+=o,E+=l,I+=o,Y+=l,P+=o,X+=l,B+=o,C+=l;var k=0;S[k++]=A,S[k++]=E,S[k++]=h.r,S[k++]=h.g,S[k++]=h.b,S[k++]=h.a,S[k++]=0,S[k++]=1,this.twoColorTint&&(S[k++]=0,S[k++]=0,S[k++]=0,S[k++]=0),S[k++]=I,S[k++]=Y,S[k++]=h.r,S[k++]=h.g,S[k++]=h.b,S[k++]=h.a,S[k++]=1,S[k++]=1,this.twoColorTint&&(S[k++]=0,S[k++]=0,S[k++]=0,S[k++]=0),S[k++]=P,S[k++]=X,S[k++]=h.r,S[k++]=h.g,S[k++]=h.b,S[k++]=h.a,S[k++]=1,S[k++]=0,this.twoColorTint&&(S[k++]=0,S[k++]=0,S[k++]=0,S[k++]=0),S[k++]=B,S[k++]=C,S[k++]=h.r,S[k++]=h.g,S[k++]=h.b,S[k++]=h.a,S[k++]=0,S[k++]=0,this.twoColorTint&&(S[k++]=0,S[k++]=0,S[k++]=0,S[k]=0),this.batcher.draw(e,S,Pt)}drawRegion(e,t,i,s,a,d=null){this.enableRenderer(this.batcher),d===null&&(d=Vt);var n=0;S[n++]=t,S[n++]=i,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=e.u,S[n++]=e.v2,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n++]=0),S[n++]=t+s,S[n++]=i,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=e.u2,S[n++]=e.v2,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n++]=0),S[n++]=t+s,S[n++]=i+a,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=e.u2,S[n++]=e.v,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n++]=0),S[n++]=t,S[n++]=i+a,S[n++]=d.r,S[n++]=d.g,S[n++]=d.b,S[n++]=d.a,S[n++]=e.u,S[n++]=e.v,this.twoColorTint&&(S[n++]=0,S[n++]=0,S[n++]=0,S[n]=0),this.batcher.draw(e.page.texture,S,Pt)}line(e,t,i,s,a=null,d=null){this.enableRenderer(this.shapes),this.shapes.line(e,t,i,s,a)}triangle(e,t,i,s,a,d,n,r=null,h=null,o=null){this.enableRenderer(this.shapes),this.shapes.triangle(e,t,i,s,a,d,n,r,h,o)}quad(e,t,i,s,a,d,n,r,h,o=null,l=null,c=null,u=null){this.enableRenderer(this.shapes),this.shapes.quad(e,t,i,s,a,d,n,r,h,o,l,c,u)}rect(e,t,i,s,a,d=null){this.enableRenderer(this.shapes),this.shapes.rect(e,t,i,s,a,d)}rectLine(e,t,i,s,a,d,n=null){this.enableRenderer(this.shapes),this.shapes.rectLine(e,t,i,s,a,d,n)}polygon(e,t,i,s=null){this.enableRenderer(this.shapes),this.shapes.polygon(e,t,i,s)}circle(e,t,i,s,a=null,d=0){this.enableRenderer(this.shapes),this.shapes.circle(e,t,i,s,a,d)}curve(e,t,i,s,a,d,n,r,h,o=null){this.enableRenderer(this.shapes),this.shapes.curve(e,t,i,s,a,d,n,r,h,o)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(e){let t=this.canvas;var i=window.devicePixelRatio||1,s=Math.round(t.clientWidth*i),a=Math.round(t.clientHeight*i);if((t.width!=s||t.height!=a)&&(t.width=s,t.height=a),this.context.gl.viewport(0,0,t.width,t.height),e===it.Expand)this.camera.setViewport(s,a);else if(e===it.Fit){let d=t.width,n=t.height,r=this.camera.viewportWidth,h=this.camera.viewportHeight,o=h/r,l=n/d,c=o<l?r/d:h/n;this.camera.setViewport(d*c,n*c)}this.camera.update()}enableRenderer(e){this.activeRenderer!==e&&(this.end(),e instanceof Li?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(be.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):e instanceof Xi?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(be.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}},it;(function(e){e[e.Stretch=0]="Stretch",e[e.Expand=1]="Expand",e[e.Fit=2]="Fit"})(it||(it={}));var wt,ot,ys=0,pr=1,Vi=1,As=165,Ss=108,st=163,Cs=class{constructor(e){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new vt,this.backgroundColor=new O(.135,.135,.135,1),this.tempColor=new O,this.renderer=e,this.timeKeeper.maxDelta=9,!ot){let t=navigator.userAgent.indexOf("Safari")>-1,i=()=>ys++;ot=new Image,ot.src=wr,t||(ot.crossOrigin="anonymous"),ot.onload=i,wt=new Image,wt.src=xr,t||(wt.crossOrigin="anonymous"),wt.onload=i}}draw(e=!1){if(ys<2||e&&this.fadeOut>Vi)return;this.timeKeeper.update();let t=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(t,5));let i=this.tempColor,s=this.renderer,a=s.canvas,d=s.context.gl;if(s.resize(it.Expand),s.camera.position.set(a.width/2,a.height/2,0),s.batcher.setBlendMode(d.ONE,d.ONE,d.ONE_MINUS_SRC_ALPHA),e){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>Vi)return;i.setFromColor(this.backgroundColor),t=1-this.fadeOut/Vi,t=1-(t-1)*(t-1),i.a*=t,i.a>0&&(s.camera.zoom=1,s.begin(),s.quad(!0,0,0,a.width,0,a.width,a.height,0,a.height,i,i,i,i),s.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(d.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),d.clear(d.COLOR_BUFFER_BIT)),t=1;t*=Math.min(this.fadeIn/pr,1),i.set(t,t,t,t),this.logo||(this.logo=new pt(s.context,ot),this.spinner=new pt(s.context,wt)),s.camera.zoom=Math.max(1,st/a.height),s.begin(),s.drawTexture(this.logo,(a.width-As)/2,(a.height-Ss)/2,As,Ss,i),s.drawTextureRotated(this.spinner,(a.width-st)/2,(a.height-st)/2,st,st,st/2,st/2,this.angle,i),s.end()}},xr="data:image/png;base64,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",wr="data:image/png;base64,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",br=class{constructor(e,t){this.time=new vt,t.pathPrefix===void 0&&(t.pathPrefix=""),t.app===void 0&&(t.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),t.webglConfig===void 0&&(t.webglConfig={alpha:!0}),this.htmlCanvas=e,this.context=new we(e,t.webglConfig),this.renderer=new Pi(e,this.context),this.gl=this.context.gl,this.assetManager=new Yi(this.context,t.pathPrefix),this.input=new xt(e),t.app.loadAssets(this);let i=()=>{requestAnimationFrame(i),this.time.update(),t.app.update(this,this.time.delta),t.app.render(this)},s=()=>{if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?t.app.error(this,this.assetManager.getErrors()):(t.app.initialize(this),i());return}requestAnimationFrame(s)};requestAnimationFrame(s)}clear(e,t,i,s){this.gl.clearColor(e,t,i,s),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},vr=class{constructor(e,t){if(this.config=t,this.bg=new O,this.bgFullscreen=new O,this.playTime=0,this.cancelId=0,this.paused=!0,this.speed=1,this.time=new vt,this.stopRequestAnimationFrame=!1,this.viewport={},this.viewportTransitionStart=0,this.parent=typeof e=="string"?document.getElementById(e):e,!this.parent)throw new Error("SpinePlayer parent not found: "+e);t.showControls===void 0&&(t.showControls=!0);let i=t.showControls?`
<div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">
<div class="spine-player-timeline"></div>
<div class="spine-player-buttons">
<button class="spine-player-button spine-player-button-icon-pause"></button>
<div class="spine-player-button-spacer"></div>
<button class="spine-player-button spine-player-button-icon-speed"></button>
<button class="spine-player-button spine-player-button-icon-animations"></button>
<button class="spine-player-button spine-player-button-icon-skins"></button>
<button class="spine-player-button spine-player-button-icon-settings"></button>
<button class="spine-player-button spine-player-button-icon-fullscreen"></button>
<img class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cpath%20d%3D%22M104%2012.68a1.31%201.31%200%200%201-.37%201%201.28%201.28%200%200%201-.85.31H91.57a10.51%2010.51%200%200%200%20.29%202.55%204.92%204.92%200%200%200%201%202%204.27%204.27%200%200%200%201.64%201.26%206.89%206.89%200%200%200%202.6.44%2010.66%2010.66%200%200%200%202.17-.2%2012.81%2012.81%200%200%200%201.64-.44q.69-.25%201.14-.44a1.87%201.87%200%200%201%20.68-.2.44.44%200%200%201%20.27.04.43.43%200%200%201%20.16.2%201.38%201.38%200%200%201%20.09.37%204.89%204.89%200%200%201%200%20.58%204.14%204.14%200%200%201%200%20.43v.32a.83.83%200%200%201-.09.26%201.1%201.1%200%200%201-.17.22%202.77%202.77%200%200%201-.61.34%208.94%208.94%200%200%201-1.32.46%2018.54%2018.54%200%200%201-1.88.41%2013.78%2013.78%200%200%201-2.28.18%2010.55%2010.55%200%200%201-3.68-.59%206.82%206.82%200%200%201-2.66-1.74%207.44%207.44%200%200%201-1.63-2.89%2013.48%2013.48%200%200%201-.55-4%2012.76%2012.76%200%200%201%20.57-3.94%208.35%208.35%200%200%201%201.64-3%207.15%207.15%200%200%201%202.58-1.87%208.47%208.47%200%200%201%203.39-.65%208.19%208.19%200%200%201%203.41.64%206.46%206.46%200%200%201%202.32%201.73%207%207%200%200%201%201.3%202.54%2011.17%2011.17%200%200%201%20.43%203.13zm-3.14-.93a5.69%205.69%200%200%200-1.09-3.86%204.17%204.17%200%200%200-3.42-1.4%204.52%204.52%200%200%200-2%20.44%204.41%204.41%200%200%200-1.47%201.15A5.29%205.29%200%200%200%2092%209.75a7%207%200%200%200-.36%202zM80.68%2021.94a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.31%206.31%200%200%201-.76%200%206.5%206.5%200%200%201-.78%200%201.74%201.74%200%200%201-.47-.11.59.59%200%200%201-.25-.18.42.42%200%200%201-.08-.26V12a9.8%209.8%200%200%200-.23-2.35%204.86%204.86%200%200%200-.66-1.53%202.88%202.88%200%200%200-1.13-1%203.57%203.57%200%200%200-1.6-.34%204%204%200%200%200-2.35.83A12.71%2012.71%200%200%200%2069.11%2010v11.9a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.51%206.51%200%200%201-.78%200%206.31%206.31%200%200%201-.76%200%201.88%201.88%200%200%201-.48-.11.52.52%200%200%201-.25-.18.46.46%200%200%201-.07-.26v-17a.53.53%200%200%201%20.03-.21.5.5%200%200%201%20.23-.19%201.28%201.28%200%200%201%20.44-.11%208.53%208.53%200%200%201%201.39%200%201.12%201.12%200%200%201%20.43.11.6.6%200%200%201%20.22.19.47.47%200%200%201%20.07.26V7.2a10.46%2010.46%200%200%201%202.87-2.36%206.17%206.17%200%200%201%202.88-.75%206.41%206.41%200%200%201%202.87.58%205.16%205.16%200%200%201%201.88%201.54%206.15%206.15%200%200%201%201%202.26%2013.46%2013.46%200%200%201%20.31%203.11z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M43.35%202.86c.09%202.6%201.89%204%205.48%204.61%203%20.48%205.79.24%206.69-2.37%201.75-5.09-2.4-3.82-6-4.39s-6.31-2.03-6.17%202.15zm1.08%2010.69c.33%201.94%202.14%203.06%204.91%203s4.84-1.16%205.13-3.25c.53-3.88-2.53-2.38-5.3-2.3s-5.4-1.26-4.74%202.55zM48%2022.44c.55%201.45%202.06%202.06%204.1%201.63s3.45-1.11%203.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2019.6%2048%2022.44zm1.78%206.78c.16%201.22%201.22%202%202.88%201.93s2.92-.67%203.13-2c.4-2.43-1.46-1.53-3.12-1.51s-3.17-.82-2.89%201.58z%22%20fill%3D%22%23ff4000%22%2F%3E%3Cpath%20d%3D%22M35.28%2013.16a15.33%2015.33%200%200%201-.48%204%208.75%208.75%200%200%201-1.42%203%206.35%206.35%200%200%201-2.32%201.91%207.14%207.14%200%200%201-3.16.67%206.1%206.1%200%200%201-1.4-.15%205.34%205.34%200%200%201-1.26-.47%207.29%207.29%200%200%201-1.24-.81q-.61-.49-1.29-1.15v8.51a.47.47%200%200%201-.08.26.56.56%200%200%201-.25.19%201.74%201.74%200%200%201-.47.11%206.47%206.47%200%200%201-.78%200%206.26%206.26%200%200%201-.76%200%201.89%201.89%200%200%201-.48-.11.49.49%200%200%201-.25-.19.51.51%200%200%201-.07-.26V4.91a.57.57%200%200%201%20.06-.27.46.46%200%200%201%20.23-.18%201.47%201.47%200%200%201%20.44-.1%207.41%207.41%200%200%201%201.3%200%201.45%201.45%200%200%201%20.43.1.52.52%200%200%201%20.24.18.51.51%200%200%201%20.07.27V7.2a18.06%2018.06%200%200%201%201.49-1.38%209%209%200%200%201%201.45-1%206.82%206.82%200%200%201%201.49-.59%207.09%207.09%200%200%201%204.78.52%206%206%200%200%201%202.13%202%208.79%208.79%200%200%201%201.2%202.9%2015.72%2015.72%200%200%201%20.4%203.51zm-3.28.36a15.64%2015.64%200%200%200-.2-2.53%207.32%207.32%200%200%200-.69-2.17%204.06%204.06%200%200%200-1.3-1.51%203.49%203.49%200%200%200-2-.57%204.1%204.1%200%200%200-1.2.18%204.92%204.92%200%200%200-1.2.57%208.54%208.54%200%200%200-1.28%201A15.77%2015.77%200%200%200%2022.76%2010v6.77a13.53%2013.53%200%200%200%202.46%202.4%204.12%204.12%200%200%200%202.44.83%203.56%203.56%200%200%200%202-.57A4.28%204.28%200%200%200%2031%2018a7.58%207.58%200%200%200%20.77-2.12%2011.43%2011.43%200%200%200%20.23-2.36zM12%2017.3a5.39%205.39%200%200%201-.48%202.33%204.73%204.73%200%200%201-1.37%201.72%206.19%206.19%200%200%201-2.12%201.06%209.62%209.62%200%200%201-2.71.36%2010.38%2010.38%200%200%201-3.21-.5A7.63%207.63%200%200%201%201%2021.82a3.25%203.25%200%200%201-.66-.43%201.09%201.09%200%200%201-.3-.53%203.59%203.59%200%200%201-.04-.93%204.06%204.06%200%200%201%200-.61%202%202%200%200%201%20.09-.4.42.42%200%200%201%20.16-.22.43.43%200%200%201%20.24-.07%201.35%201.35%200%200%201%20.61.26q.41.26%201%20.56a9.22%209.22%200%200%200%201.41.55%206.25%206.25%200%200%200%201.87.26%205.62%205.62%200%200%200%201.44-.17%203.48%203.48%200%200%200%201.12-.5%202.23%202.23%200%200%200%20.73-.84%202.68%202.68%200%200%200%20.26-1.21%202%202%200%200%200-.37-1.21%203.55%203.55%200%200%200-1-.87%208.09%208.09%200%200%200-1.36-.66l-1.56-.61a16%2016%200%200%201-1.57-.73%206%206%200%200%201-1.37-1%204.52%204.52%200%200%201-1-1.4%204.69%204.69%200%200%201-.37-2%204.88%204.88%200%200%201%20.39-1.87%204.46%204.46%200%200%201%201.16-1.61%205.83%205.83%200%200%201%201.94-1.11A8.06%208.06%200%200%201%206.53%204a8.28%208.28%200%200%201%201.36.11%209.36%209.36%200%200%201%201.23.28%205.92%205.92%200%200%201%20.94.37%204.09%204.09%200%200%201%20.59.35%201%201%200%200%201%20.26.26.83.83%200%200%201%20.09.26%201.32%201.32%200%200%200%20.06.35%203.87%203.87%200%200%201%200%20.51%204.76%204.76%200%200%201%200%20.56%201.39%201.39%200%200%201-.09.39.5.5%200%200%201-.16.22.35.35%200%200%201-.21.07%201%201%200%200%201-.49-.21%207%207%200%200%200-.83-.44%209.26%209.26%200%200%200-1.2-.44%205.49%205.49%200%200%200-1.58-.16%204.93%204.93%200%200%200-1.4.18%202.69%202.69%200%200%200-1%20.51%202.16%202.16%200%200%200-.59.83%202.43%202.43%200%200%200-.2%201%202%202%200%200%200%20.38%201.24%203.6%203.6%200%200%200%201%20.88%208.25%208.25%200%200%200%201.38.68l1.58.62q.8.32%201.59.72a6%206%200%200%201%201.39%201%204.37%204.37%200%200%201%201%201.36%204.46%204.46%200%200%201%20.37%201.8z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E">
</div></div>`:"";this.parent.appendChild(this.dom=Ge(`<div class="spine-player" style="position:relative;height:100%"><canvas class="spine-player-canvas" style="display:block;width:100%;height:100%"></canvas>${i}</div>`));try{this.validateConfig(t)}catch(s){this.showError(s.message,s)}this.initialize(),window.addEventListener("resize",()=>this.drawFrame(!1)),requestAnimationFrame(()=>this.drawFrame())}validateConfig(e){if(!e)throw new Error("A configuration object must be passed to to new SpinePlayer().");if(e.skelUrl&&(e.binaryUrl=e.skelUrl),!e.jsonUrl&&!e.binaryUrl)throw new Error("A URL must be specified for the skeleton JSON or binary file.");if(!e.atlasUrl)throw new Error("A URL must be specified for the atlas file.");if(e.backgroundColor||(e.backgroundColor=e.alpha?"00000000":"000000"),e.fullScreenBackgroundColor||(e.fullScreenBackgroundColor=e.backgroundColor),e.backgroundImage&&!e.backgroundImage.url&&(e.backgroundImage=null),e.premultipliedAlpha===void 0&&(e.premultipliedAlpha=!0),e.mipmaps===void 0&&(e.mipmaps=!0),e.debug||(e.debug={}),e.animations&&e.animation&&e.animations.indexOf(e.animation)<0)throw new Error("Animation '"+e.animation+"' is not in the config animation list: "+Di(e.animations));if(e.skins&&e.skin&&e.skins.indexOf(e.skin)<0)throw new Error("Default skin '"+e.skin+"' is not in the config skins list: "+Di(e.skins));e.viewport||(e.viewport={}),e.viewport.animations||(e.viewport.animations={}),e.viewport.debugRender===void 0&&(e.viewport.debugRender=!1),e.viewport.transitionTime===void 0&&(e.viewport.transitionTime=.25),e.controlBones||(e.controlBones=[]),e.showLoading===void 0&&(e.showLoading=!0),e.defaultMix===void 0&&(e.defaultMix=.25)}initialize(){let e=this.config,t=this.dom;if(!e.alpha){let i=e.backgroundColor;this.dom.style.backgroundColor=(i.charAt(0)=="#"?i:"#"+i).substr(0,7)}try{this.canvas=qe(t,"spine-player-canvas"),this.context=new we(this.canvas,{alpha:e.alpha}),this.sceneRenderer=new Pi(this.canvas,this.context,!0),e.showLoading&&(this.loadingScreen=new Cs(this.sceneRenderer))}catch(i){this.showError(`Sorry, your browser does not support 
Please use the latest version of Firefox, Chrome, Edge, or Safari.`,i)}if(this.assetManager=new Yi(this.context,"",e.downloader),e.rawDataURIs)for(let i in e.rawDataURIs)this.assetManager.setRawDataURI(i,e.rawDataURIs[i]);if(e.jsonUrl?this.assetManager.loadJson(e.jsonUrl):this.assetManager.loadBinary(e.binaryUrl),this.assetManager.loadTextureAtlas(e.atlasUrl),e.backgroundImage&&this.assetManager.loadTexture(e.backgroundImage.url),this.bg.setFromString(e.backgroundColor),this.bgFullscreen.setFromString(e.fullScreenBackgroundColor),e.showControls){this.playerControls=t.children[1];let i=this.playerControls.children,s=i[0],a=i[1].children;this.playButton=a[0];let d=a[2];this.animationButton=a[3],this.skinButton=a[4];let n=a[5],r=a[6],h=a[7];this.timelineSlider=new Ts,s.appendChild(this.timelineSlider.create()),this.timelineSlider.change=f=>{this.pause();let x=this.animationState.getCurrent(0).animation.duration*f;this.animationState.update(x-this.playTime),this.animationState.apply(this.skeleton),this.skeleton.updateWorldTransform(),this.playTime=x},this.playButton.onclick=()=>this.paused?this.play():this.pause(),d.onclick=()=>this.showSpeedDialog(d),this.animationButton.onclick=()=>this.showAnimationsDialog(this.animationButton),this.skinButton.onclick=()=>this.showSkinsDialog(this.skinButton),n.onclick=()=>this.showSettingsDialog(n);let o=this.canvas.clientWidth,l=this.canvas.clientHeight,c=this.canvas.style.width,u=this.canvas.style.height,m=!1;r.onclick=()=>{let f=()=>{m=!m,m||(this.canvas.style.width=o+"px",this.canvas.style.height=l+"px",this.drawFrame(!1),requestAnimationFrame(()=>{this.canvas.style.width=c,this.canvas.style.height=u}))},g=t;g.onfullscreenchange=f,g.onwebkitfullscreenchange=f;let x=document;x.fullscreenElement||x.webkitFullscreenElement||x.mozFullScreenElement||x.msFullscreenElement?x.exitFullscreen?x.exitFullscreen():x.mozCancelFullScreen?x.mozCancelFullScreen():x.webkitExitFullscreen?x.webkitExitFullscreen():x.msExitFullscreen&&x.msExitFullscreen():(o=this.canvas.clientWidth,l=this.canvas.clientHeight,c=this.canvas.style.width,u=this.canvas.style.height,g.requestFullscreen?g.requestFullscreen():g.webkitRequestFullScreen?g.webkitRequestFullScreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.msRequestFullscreen&&g.msRequestFullscreen())},h.onclick=()=>window.open("http://esotericsoftware.com")}return t}loadSkeleton(){if(this.error)return;this.assetManager.hasErrors()&&this.showError(`Error: Assets could not be loaded.
`+Di(this.assetManager.getErrors()));let e=this.config,t=this.assetManager.require(e.atlasUrl),i=this.context.gl,s=i.getExtension("EXT_texture_filter_anisotropic"),a=i.getParameter(i.VERSION).indexOf("WebGL 1.0")!=-1;for(let l of t.pages){let c=l.minFilter;var d=e.mipmaps,n=F.isPowerOfTwo(l.width)&&F.isPowerOfTwo(l.height);a&&!n&&(d=!1),d&&(s?(i.texParameterf(i.TEXTURE_2D,s.TEXTURE_MAX_ANISOTROPY_EXT,8),c=pe.MipMapLinearLinear):c=pe.Linear,l.texture.setFilters(c,pe.Nearest)),c!=pe.Nearest&&c!=pe.Linear&&l.texture.update(!0)}let r;if(e.jsonUrl)try{let l=this.assetManager.remove(e.jsonUrl);if(!l)throw new Error("Empty JSON data.");if(e.jsonField&&(l=l[e.jsonField],!l))throw new Error("JSON field does not exist: "+e.jsonField);r=new fs(new pi(t)).readSkeletonData(l)}catch(l){this.showError(`Error: Could not load skeleton JSON.
${l.message}`,l)}else{let l=this.assetManager.remove(e.binaryUrl),c=new ds(new pi(t));try{r=c.readSkeletonData(l)}catch(u){this.showError(`Error: Could not load skeleton binary.
${u.message}`,u)}}this.skeleton=new hs(r);let h=new $i(r);h.defaultMix=e.defaultMix,this.animationState=new St(h),e.controlBones.forEach(l=>{r.findBone(l)||this.showError(`Error: Control bone does not exist in skeleton: ${l}`)}),!e.skin&&r.skins.length&&(e.skin=r.skins[0].name),e.skins&&e.skin.length&&e.skins.forEach(l=>{this.skeleton.data.findSkin(l)||this.showError(`Error: Skin in config list does not exist in skeleton: ${l}`)}),e.skin&&(this.skeleton.data.findSkin(e.skin)||this.showError(`Error: Skin does not exist in skeleton: ${e.skin}`),this.skeleton.setSkinByName(e.skin),this.skeleton.setSlotsToSetupPose()),Object.getOwnPropertyNames(e.viewport.animations).forEach(l=>{r.findAnimation(l)||this.showError(`Error: Animation for which a viewport was specified does not exist in skeleton: ${l}`)}),e.animations&&e.animations.length&&(e.animations.forEach(l=>{this.skeleton.data.findAnimation(l)||this.showError(`Error: Animation in config list does not exist in skeleton: ${l}`)}),e.animation||(e.animation=e.animations[0])),e.animation&&!r.findAnimation(e.animation)&&this.showError(`Error: Animation does not exist in skeleton: ${e.animation}`),this.setupInput(),e.showControls&&((r.skins.length==1||e.skins&&e.skins.length==1)&&this.skinButton.classList.add("spine-player-hidden"),(r.animations.length==1||e.animations&&e.animations.length==1)&&this.animationButton.classList.add("spine-player-hidden")),e.success&&e.success(this);let o=this.animationState.getCurrent(0);o?this.currentViewport||(this.setViewport(o.animation),this.play()):e.animation?(o=this.setAnimation(e.animation),this.play()):(o=this.animationState.setEmptyAnimation(0),o.trackEnd=1e8,this.setViewport(o.animation),this.pause())}setupInput(){let e=this.config,t=e.controlBones;if(!t.length&&!e.showControls)return;let i=this.selectedBones=new Array(t.length),s=this.canvas,a=null,d=new Ne,n=new Me,r=new Me,h=new Ne,o=this.skeleton,l=this.sceneRenderer,c=function(u,m){r.set(u,s.clientHeight-m,0),d.x=d.y=0;let f=24,g=0,x;for(let v=0;v<t.length;v++){i[v]=null;let p=o.findBone(t[v]),b=l.camera.worldToScreen(n.set(p.worldX,p.worldY,0),s.clientWidth,s.clientHeight).distance(r);b<f&&(f=b,x=p,g=v,d.x=n.x-r.x,d.y=n.y-r.y)}return x&&(i[g]=x),x};if(new xt(s).addListener({down:(u,m)=>{a=c(u,m)},up:()=>{a?a=null:e.showControls&&(this.paused?this.play():this.pause())},dragged:(u,m)=>{a&&(u=F.clamp(u+d.x,0,s.clientWidth),m=F.clamp(m-d.y,0,s.clientHeight),l.camera.screenToWorld(n.set(u,m,0),s.clientWidth,s.clientHeight),a.parent?(a.parent.worldToLocal(h.set(n.x-o.x,n.y-o.y)),a.x=h.x,a.y=h.y):(a.x=n.x-o.x,a.y=n.y-o.y))},moved:(u,m)=>c(u,m)}),e.showControls){document.addEventListener("mousemove",x=>{x instanceof MouseEvent&&g(x.clientX,x.clientY)}),document.addEventListener("touchmove",x=>{if(x instanceof TouchEvent){let v=x.changedTouches;if(v.length){let p=v[0];g(p.clientX,p.clientY)}}});let u=(x,v,p)=>{let b=x-p.left,w=v-p.top;return b>=0&&b<=p.width&&w>=0&&w<=p.height},m=!0,f=!1,g=(x,v)=>{let p=qe(this.dom,"spine-player-popup");m=u(x,v,this.playerControls.getBoundingClientRect()),f=u(x,v,s.getBoundingClientRect()),clearTimeout(this.cancelId),!p&&!m&&!f&&!this.paused?this.playerControls.classList.add("spine-player-controls-hidden"):this.playerControls.classList.remove("spine-player-controls-hidden"),!m&&!p&&!this.paused&&(this.cancelId=setTimeout(()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")},1e3))}}}play(){this.paused=!1;let e=this.config;e.showControls&&(this.cancelId=setTimeout(()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")},1e3),this.playButton.classList.remove("spine-player-button-icon-play"),this.playButton.classList.add("spine-player-button-icon-pause"),e.animation||(e.animations&&e.animations.length?e.animation=e.animations[0]:this.skeleton.data.animations.length&&(e.animation=this.skeleton.data.animations[0].name),e.animation&&this.setAnimation(e.animation)))}pause(){this.paused=!0,this.config.showControls&&(this.playerControls.classList.remove("spine-player-controls-hidden"),clearTimeout(this.cancelId),this.playButton.classList.remove("spine-player-button-icon-pause"),this.playButton.classList.add("spine-player-button-icon-play"))}setAnimation(e,t=!0){return e=this.setViewport(e),this.animationState.setAnimationWith(0,e,t)}addAnimation(e,t=!0,i=0){return e=this.setViewport(e),this.animationState.addAnimationWith(0,e,t,i)}setViewport(e){typeof e=="string"&&(e=this.skeleton.data.findAnimation(e)),this.previousViewport=this.currentViewport;let t=this.config.viewport,i=this.currentViewport={padLeft:t.padLeft!==void 0?t.padLeft:"10%",padRight:t.padRight!==void 0?t.padRight:"10%",padTop:t.padTop!==void 0?t.padTop:"10%",padBottom:t.padBottom!==void 0?t.padBottom:"10%"};t.x!==void 0&&t.y!==void 0&&t.width&&t.height?(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height):this.calculateAnimationViewport(e,i);let s=this.config.viewport.animations[e.name];return s&&(s.x!==void 0&&s.y!==void 0&&s.width&&s.height&&(i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height),s.padLeft!==void 0&&(i.padLeft=s.padLeft),s.padRight!==void 0&&(i.padRight=s.padRight),s.padTop!==void 0&&(i.padTop=s.padTop),s.padBottom!==void 0&&(i.padBottom=s.padBottom)),i.padLeft=this.percentageToWorldUnit(i.width,i.padLeft),i.padRight=this.percentageToWorldUnit(i.width,i.padRight),i.padBottom=this.percentageToWorldUnit(i.height,i.padBottom),i.padTop=this.percentageToWorldUnit(i.height,i.padTop),this.viewportTransitionStart=performance.now(),e}percentageToWorldUnit(e,t){return typeof t=="string"?e*parseFloat(t.substr(0,t.length-1))/100:t}calculateAnimationViewport(e,t){this.skeleton.setToSetupPose();let i=100,s=e.duration?e.duration/i:0,a=0,d=1e8,n=-1e8,r=1e8,h=-1e8,o=new Ne,l=new Ne;for(let c=0;c<i;c++,a+=s)e.apply(this.skeleton,a,a,!1,null,1,fe.setup,Pe.mixIn),this.skeleton.updateWorldTransform(),this.skeleton.getBounds(o,l),!isNaN(o.x)&&!isNaN(o.y)&&!isNaN(l.x)&&!isNaN(l.y)?(d=Math.min(o.x,d),n=Math.max(o.x+l.x,n),r=Math.min(o.y,r),h=Math.max(o.y+l.y,h)):this.showError("Animation bounds are invalid: "+e.name);t.x=d,t.y=r,t.width=n-d,t.height=h-r}drawFrame(e=!0){try{if(this.error)return;e&&!this.stopRequestAnimationFrame&&requestAnimationFrame(()=>this.drawFrame());let t=document,s=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement?this.bgFullscreen:this.bg;this.time.update();let a=this.time.delta,d=this.assetManager.isLoadingComplete();!this.skeleton&&d&&this.loadSkeleton();let n=this.skeleton,r=this.config;if(n){let h=this.sceneRenderer;h.resize(it.Expand);let o=this.paused?0:a*this.speed;if(r.frame&&r.frame(this,o),!this.paused&&(this.animationState.update(o),this.animationState.apply(n),n.updateWorldTransform(),r.showControls)){this.playTime+=o;let f=this.animationState.getCurrent(0);if(f){let g=f.animation.duration;for(;this.playTime>=g&&g!=0;)this.playTime-=g;this.playTime=Math.max(0,Math.min(this.playTime,g)),this.timelineSlider.setValue(this.playTime/g)}}let l=this.viewport;if(l.x=this.currentViewport.x-this.currentViewport.padLeft,l.y=this.currentViewport.y-this.currentViewport.padBottom,l.width=this.currentViewport.width+this.currentViewport.padLeft+this.currentViewport.padRight,l.height=this.currentViewport.height+this.currentViewport.padBottom+this.currentViewport.padTop,this.previousViewport){let f=(performance.now()-this.viewportTransitionStart)/1e3/r.viewport.transitionTime;if(f<1){let g=this.previousViewport.x-this.previousViewport.padLeft,x=this.previousViewport.y-this.previousViewport.padBottom,v=this.previousViewport.width+this.previousViewport.padLeft+this.previousViewport.padRight,p=this.previousViewport.height+this.previousViewport.padBottom+this.previousViewport.padTop;l.x=g+(l.x-g)*f,l.y=x+(l.y-x)*f,l.width=v+(l.width-v)*f,l.height=p+(l.height-p)*f}}h.camera.zoom=this.canvas.height/this.canvas.width>l.height/l.width?l.width/this.canvas.width:l.height/this.canvas.height,h.camera.position.x=l.x+l.width/2,h.camera.position.y=l.y+l.height/2;let c=this.context.gl;c.clearColor(s.r,s.g,s.b,s.a),c.clear(c.COLOR_BUFFER_BIT),r.update&&r.update(this,o),h.begin();let u=r.backgroundImage;if(u){let f=this.assetManager.require(u.url);u.x!==void 0&&u.y!==void 0&&u.width&&u.height?h.drawTexture(f,u.x,u.y,u.width,u.height):h.drawTexture(f,l.x,l.y,l.width,l.height)}h.drawSkeleton(n,r.premultipliedAlpha),((h.skeletonDebugRenderer.drawBones=r.debug.bones)||(h.skeletonDebugRenderer.drawBoundingBoxes=r.debug.bounds)||(h.skeletonDebugRenderer.drawClipping=r.debug.clipping)||(h.skeletonDebugRenderer.drawMeshHull=r.debug.hulls)||(h.skeletonDebugRenderer.drawPaths=r.debug.paths)||(h.skeletonDebugRenderer.drawRegionAttachments=r.debug.regions)||(h.skeletonDebugRenderer.drawMeshTriangles=r.debug.meshes))&&h.drawSkeletonDebug(n,r.premultipliedAlpha);let m=r.controlBones;if(m.length){let f=this.selectedBones;c.lineWidth(2);for(let g=0;g<m.length;g++){let x=n.findBone(m[g]);if(!x)continue;let v=f[g]?Ar:Cr,p=f[g]?Sr:Tr;h.circle(!0,n.x+x.worldX,n.y+x.worldY,20,v),h.circle(!1,n.x+x.worldX,n.y+x.worldY,20,p)}}r.viewport.debugRender&&(c.lineWidth(1),h.rect(!1,this.currentViewport.x,this.currentViewport.y,this.currentViewport.width,this.currentViewport.height,O.GREEN),h.rect(!1,l.x,l.y,l.width,l.height,O.RED)),h.end(),r.draw&&r.draw(this,o)}r.showLoading&&(this.loadingScreen.backgroundColor.setFromColor(s),this.loadingScreen.draw(d)),d&&r.loading&&r.loading(this,a)}catch(t){this.showError(`Error: Unable to render skeleton.
${t.message}`,t)}}stopRendering(){this.stopRequestAnimationFrame=!0}hidePopup(e){return this.popup&&this.popup.hide(e)}showSpeedDialog(e){let t="speed";if(this.hidePopup(t))return;let i=new Dt(t,e,this,this.playerControls,`
<div class="spine-player-popup-title">Speed</div>
<hr>
<div class="spine-player-row" style="align-items:center;padding:8px">
<div class="spine-player-column">
	<div class="spine-player-speed-slider" style="margin-bottom:4px"></div>
	<div class="spine-player-row" style="justify-content:space-between"><div>0.1x</div><div>1x</div><div>2x</div></div>
</div>
</div>`),s=new Ts(2,.1,!0);qe(i.dom,"spine-player-speed-slider").appendChild(s.create()),s.setValue(this.speed/2),s.change=a=>this.speed=a*2,i.show()}showAnimationsDialog(e){let t="animations";if(this.hidePopup(t)||!this.skeleton||!this.skeleton.data.animations.length)return;let i=new Dt(t,e,this,this.playerControls,'<div class="spine-player-popup-title">Animations</div><hr><ul class="spine-player-list"></ul>'),s=qe(i.dom,"spine-player-list");this.skeleton.data.animations.forEach(a=>{if(this.config.animations&&this.config.animations.indexOf(a.name)<0)return;let d=Ge('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');a.name==this.config.animation&&d.classList.add("selected"),qe(d,"selectable-text").innerText=a.name,s.appendChild(d),d.onclick=()=>{ks(s.children,"selected"),d.classList.add("selected"),this.config.animation=a.name,this.playTime=0,this.setAnimation(a.name),this.play()}}),i.show()}showSkinsDialog(e){let t="skins";if(this.hidePopup(t)||!this.skeleton||!this.skeleton.data.animations.length)return;let i=new Dt(t,e,this,this.playerControls,'<div class="spine-player-popup-title">Skins</div><hr><ul class="spine-player-list"></ul>'),s=qe(i.dom,"spine-player-list");this.skeleton.data.skins.forEach(a=>{if(this.config.skins&&this.config.skins.indexOf(a.name)<0)return;let d=Ge('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');a.name==this.config.skin&&d.classList.add("selected"),qe(d,"selectable-text").innerText=a.name,s.appendChild(d),d.onclick=()=>{ks(s.children,"selected"),d.classList.add("selected"),this.config.skin=a.name,this.skeleton.setSkinByName(this.config.skin),this.skeleton.setSlotsToSetupPose()}}),i.show()}showSettingsDialog(e){let t="settings";if(this.hidePopup(t)||!this.skeleton||!this.skeleton.data.animations.length)return;let i=new Dt(t,e,this,this.playerControls,'<div class="spine-player-popup-title">Debug</div><hr><ul class="spine-player-list"></li>'),s=qe(i.dom,"spine-player-list"),a=(d,n)=>{let r=Ge('<li class="spine-player-list-item"></li>'),h=new yr(d);r.appendChild(h.create());let o=this.config.debug;h.setEnabled(o[n]),h.change=l=>o[n]=l,s.appendChild(r)};a("Bones","bones"),a("Regions","regions"),a("Meshes","meshes"),a("Bounds","bounds"),a("Paths","paths"),a("Clipping","clipping"),a("Points","points"),a("Hulls","hulls"),i.show()}showError(e,t=null){if(this.error){if(t)throw t}else throw this.error=!0,this.dom.appendChild(Ge('<div class="spine-player-error" style="background:#000;color:#fff;position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:auto;z-index:999">'+e.replace(`
`,"<br><br>")+"</div>")),this.config.error&&this.config.error(this,e),t||new Error(e)}},Dt=class{constructor(e,t,i,s,a){this.id=e,this.button=t,this.player=i,this.dom=Ge('<div class="spine-player-popup spine-player-hidden"></div>'),this.dom.innerHTML=a,s.appendChild(this.dom),this.className="spine-player-button-icon-"+e+"-selected"}hide(e){if(this.dom.remove(),this.button.classList.remove(this.className),this.id==e)return this.player.popup=null,!0}show(){this.player.popup=this,this.button.classList.add(this.className),this.dom.classList.remove("spine-player-hidden");let e=!1,t=()=>{e||requestAnimationFrame(t);let a=this.player.dom,d=Math.abs(a.getBoundingClientRect().bottom-a.getBoundingClientRect().bottom),n=Math.abs(a.getBoundingClientRect().right-a.getBoundingClientRect().right);this.dom.style.maxHeight=a.clientHeight-d-n+"px"};requestAnimationFrame(t);let i=!0,s=a=>{if(i||this.player.popup!=this){i=!1;return}this.dom.contains(a.target)||(this.dom.remove(),window.removeEventListener("click",s),this.button.classList.remove(this.className),this.player.popup=null,e=!0)};window.addEventListener("click",s)}},yr=class{constructor(e){this.text=e,this.enabled=!1}create(){return this.switch=Ge(`
<div class="spine-player-switch">
	<span class="spine-player-switch-text">${this.text}</span>
	<div class="spine-player-switch-knob-area">
		<div class="spine-player-switch-knob"></div>
	</div>
</div>`),this.switch.addEventListener("click",()=>{this.setEnabled(!this.enabled),this.change&&this.change(this.enabled)}),this.switch}setEnabled(e){e?this.switch.classList.add("active"):this.switch.classList.remove("active"),this.enabled=e}isEnabled(){return this.enabled}},Ts=class{constructor(e=0,t=.1,i=!1){this.snaps=e,this.snapPercentage=t,this.big=i}create(){this.slider=Ge(`
<div class="spine-player-slider ${this.big?"big":""}">
	<div class="spine-player-slider-value"></div>
	<!--<div class="spine-player-slider-knob"></div>-->
</div>`),this.value=qe(this.slider,"spine-player-slider-value"),this.setValue(0);let e=!1;return new xt(this.slider).addListener({down:(t,i)=>{e=!0,this.value.classList.add("hovering")},up:(t,i)=>{e=!1,this.change&&this.change(this.setValue(t/this.slider.clientWidth)),this.value.classList.remove("hovering")},moved:(t,i)=>{e&&this.change&&this.change(this.setValue(t/this.slider.clientWidth))},dragged:(t,i)=>{this.change&&this.change(this.setValue(t/this.slider.clientWidth))}}),this.slider}setValue(e){if(e=Math.max(0,Math.min(1,e)),this.snaps){let t=1/this.snaps,i=e%t;i<t*this.snapPercentage?e=e-i:i>t-t*this.snapPercentage&&(e=e-i+t),e=Math.max(0,Math.min(1,e))}return this.value.style.width=""+e*100+"%",e}};function qe(e,t){return e.getElementsByClassName(t)[0]}function Ge(e){let t=document.createElement("div");return t.innerHTML=e,t.children[0]}function ks(e,t){for(let i=0;i<e.length;i++)e[i].classList.remove(t)}function Di(e){return JSON.stringify(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")}var Ar=new O(.478,0,0,.25),Sr=new O(1,1,1,1),Cr=new O(.478,0,0,.5),Tr=new O(1,0,0,.8),Ms=class{constructor(e){this.prefix=`<html>
<head>
<style>
body { margin: 0px; }
</style>
</head>
<body>`.trim(),this.postfix="</body>",this.timerId=0,this.render(e)}render(e){let t=`
				<div class="spine-player-editor-container">
					<div class="spine-player-editor-code"></div>
					<iframe class="spine-player-editor-player"></iframe>
				</div>
			`;e.innerHTML=t;let i=e.getElementsByClassName("spine-player-editor-code")[0];this.player=e.getElementsByClassName("spine-player-editor-player")[0],requestAnimationFrame(()=>{this.code=CodeMirror(i,{lineNumbers:!0,tabSize:3,indentUnit:3,indentWithTabs:!0,scrollBarStyle:"native",mode:"htmlmixed",theme:"monokai"}),this.code.on("change",()=>{this.startPlayer()}),this.setCode(Ms.DEFAULT_CODE)})}setPreAndPostfix(e,t){this.prefix=e,this.postfix=t,this.startPlayer()}setCode(e){this.code.setValue(e),this.startPlayer()}startPlayer(){clearTimeout(this.timerId),this.timerId=setTimeout(()=>{let e=this.code.getDoc().getValue();e=this.prefix+e+this.postfix,e=window.btoa(e),this.player.src="",this.player.src="data:text/html;base64,"+e},500)}},Es=Ms;return Es.DEFAULT_CODE=`
<script src="https://esotericsoftware.com/files/spine-player/4.0/spine-player.js"><\/script>
<link rel="stylesheet" href="https://esotericsoftware.com/files/spine-player/4.0/spine-player.css">

<div id="player-container" style="width: 100%; height: 100vh;"></div>

<script>
new spine.SpinePlayer("player-container", {
	jsonUrl: "https://esotericsoftware.com/files/examples/4.0/spineboy/export/spineboy-pro.json",
	atlasUrl: "https://esotericsoftware.com/files/examples/4.0/spineboy/export/spineboy-pma.atlas"
});
<\/script>
		`.trim(),zi})();
